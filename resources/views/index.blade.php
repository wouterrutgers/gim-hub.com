<!DOCTYPE html>
<html>
  <head>
    <title>Group Ironmen</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root{--primary-text:white;--elevated:rgba(255, 255, 255, 0.08);--light-border:rgba(255, 255, 255, 0.12);--darken:rgba(0, 0, 0, 0.2);--background:#000000;--black:#000000;--invalid:#ee0d0d;--graph-grid-border:rgba(255, 255, 255, 0.05);--orange:#ff981f;--yellow:#ffff00;--red:#ff0000;--green:#0dc10d;--rsbackground:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAA8CAYAAADi8H14AAAEbklEQVR4nOWWQXLbMAxFG49P1H23vf+JmuZlBgkMEyRAgpLcvhlENCUCn18w47ffv36+/1jk9vb28feRt9vzXIT3P99y/rx/j6FVJ0KFFmGUS9aI9ttHPCCb4Ep4cI+oRMRdAU+LN+/xYLAYJldgTGj0Zz3eyVF1hFGnjkAvcf8Yfw4ijJ5bEZXtjCizmnp6uNfKy7zloYN7jMyt5usM+6hLzNLadAXRvLes+NabA28+gic2q62S7H68PXweEVGkqFxJKuNZyKGRzn0FrPYWIYM9E735KFrgLmNXNOq1WmuGkMHVWLEtc1ePB21OBeSzuiOE/8ntomXuKpixg5m899YGV7unx0wXZJgxIQP5M3s4tIOtsNbLfQUwmYjwdAbb7o0mslgz/0XEm95e79bQI3jVzp2he0TIG6okYu7KS+910y56Pj0dEb2HV9lt7plo3/RLfjBYP7SCLiAcaS71q/Yyg6591x92ETG3mrNNFrpncAVRc6u6V4PJZ7PV4Ki5HhUdeLbJD2ewh4iMbFiezZhru1fX0WPJnYV1Os+RDDsYcQJjohJtLiYQHr17I6p1Rwl1sAWxrc0yn8GauxvRRy0ZA5+rkfzDDvaQBC0yxwNEN2hrZusINk8FkpMrIUx1sEAizOGaRbqX9StgsuSaBf1ZHayxtOamO1iTEYcZRBYrHmMFPb4a3Q62m+ohJrMGA1ubZl4ja6qwNW29MyjpYI2YxuYIQY/PhJdAWGiMSqhBLBs8EoaxRCUIt4zmGBNHoOssGwyYTAjSxT0izwg6N2ReGJslRqzoIT/RosRgxBEa+9liRWbRJjOWmCWqJ/qcsGxwz8jePYiI7T2DoUQP7ksIerwD8hPg/orobUyoNLCVS+5lYGN8XblaWnM7od50B7cM0WTNyT7fg40dTasmHk0b7IFRxAx6nR5fhYwmzAX3iOghiy0ZAR4VOUA0VuXr5bHdK7XBNVg/9Gpo7Yx75ozIrqWepvSIIDlxNaKarJn2M/APVMLSquN28Aq2UEvoK9IydcQWgy3VhnsbtWehRjSManOfZ7l69OpYSo+IKGyAOAPqEj08czGW8Gitu9vJUfFKqGXrR+htMgq1IVOfb86ots331MH2gd3IRq8O5oJcozwZ/L+RfcGjDrbcsgV2UK2h8ltIxxKz3FpiWnO7OdNkr/aKsYL7M00EesWrkXo9olrIFX3Wo8JcGJ7BiL0CGcMyz7aoMBcNxNBguIrJUVb0VpkrhAy+AlHT5DmuxJFgLKFxz2ALYu3iq4FGC3NR3dnujeRNdTBidxERu6t+NK/+DRzRCymDATFENdGcPEdYWnMZRt07Yy48GTwqJKxuaJWz6mfMhQeDxVy5jjhrkwL1CchuPIPu3ixfBltT7WcPNkissmIQ9YkdaHNnNA5/RVijdUGNbHBGhMBayaPRGlr1WafROey9DK1aWW6IJ2ZhrQTozV2Bs/V8HREtxDRNa85y5KZaHcocUclsvuERYan42mTp1ZSX6RngzR/FX4+QgWqKX+gZAAAAAElFTkSuQmCC);--rsbackground-dark:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAA8BAMAAAAQ3mBLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURSQkJCUlJSYmJgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPTtHbMAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAIZSURBVEjHhZbZgcQgCEBJB2IH0n+RG7lBM5uPGY8ncidgz4NI8uDYk/1MWViyhRsb+xcdXgesIxSRKLsBY5fMsGJP7LxrDvvKHi6DscDQlmS4fGO5mCX3NDXeIRr8nlOWLpctm0PWgDcgYKKk9QlvV8DBmuwDBmiOS6LZ0TMtBpxYFV1h1uIGC8176a4vmGmokdrsbzhih5p/h4G6W7yZBXd4eypbVwR3Pd4H8slR4fkThqzFRXSGh8LzSzTDi1dRa3FGnt3gqDFQg++iFUZT+RFprkjm0eCpKj9THXPo/VpiMKrjUB0zWgVI1tlo9xZPqh2eD3jJGka2bthazR3ese9wWtlrBnNj8C2ND2R4BCydwexD65cYFo8sWZuJLLzesOCL4AK7VyhqmR3o8KsHWS8zdTwzRooKw2hwCJzRrgr8jhLsUcADXgwTWGo0eXFqmpyZkr9eXjyvZ2tZHfcLJD1/FphOywweFzjwoZnNh9D83WD3sZVBtpegV2X1mc41PtCrct1gTe1/4aUU/61Lt3QlFbYaA7w14qrHyDAekiWrbQ4Fnh0uc39zEOCx6drq3Frr/IA1HgWeRIBdD5vrVwaNaJeAXbRVpMLctbVdnu8xm9sFIXjDT1XEfFxgUng0Gy0iK+DHYSgNsFSAwXYvw1DiKF9UuwJJYP8S4G6/YU32As8LzFq5YgqTvsRWqEzeLDOsNiwqMNEfNgDswkZ+o/EAAAAASUVORK5CYII=)}body,html{width:100%;height:100%;padding:0;margin:0;background:var(--background);color:var(--primary-text);overflow:hidden;position:relative;font-size:16px;font-family:rssmall,ui-sans-serif,Arial,sans-serif;text-shadow:1.3px 1.3px var(--black)}h1,h2,h3{font-family:rsbold,ui-sans-serif,Arial,sans-serif}.unauthed-section{overflow:auto}.unauthed-section__outlet{width:100%;height:100%}@font-face{font-family:rssmall;font-display:block;src:url("/fonts/RuneScape-Chat-07.ttf")}@font-face{font-family:rsbold;font-display:block;src:url("/fonts/RuneScape-Chat-Bold-07.ttf")}@font-face{font-family:rstiny;font-display:block;src:url("/fonts/runescape-tiny.ttf")}.authed-section__main-content{width:100%;padding:20px 8px;overflow-y:auto;z-index:1;box-sizing:border-box}.authed-section__outlet{pointer-events:auto}button{cursor:pointer;font-family:Arial,Helvetica,sans-serif;background:0 0;border:none;padding:0;margin:0}button.men-button{font-size:20px;font-family:rssmall;color:var(--orange);text-shadow:1px 1px var(--black);padding:4px 8px;font-weight:400;box-sizing:border-box;line-height:1em;display:flex;justify-content:center;align-items:center;white-space:nowrap;border-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAIYSURBVEhL7ZZBTxNBFMf/A0i4SKsJMU2TJTEkxgtqtETkQFQOBg5c7IXPoYnGxBPqQQ98Ag0XvHuBCGiAkAiWaDlAiInJrjapJ5uWptCWjvteZ7KztCZYB078krZvdrbvt7Mzk3lCSglCiLZ6cAxIWRP0yzISTU09RbVywJ0mHz4u4nxnl2oFdJ7pUFGdbHEXd27fVa0wDx4+Y6FvFCzaK5WRzxdUd8DCwiIudJ9VrYCO9nYV1cn8zmFkpFFW2i8jm/2FtzPvwI9HIyJRX99FFIv7SG9u+skEUmspfP6yw6/gKCSuXZJXb1zn+NZggnMtryxjN7/H19r4WzE7N4/p129aEhF0/9fUBsc6V7Vaw0GtPj0hWSQSBT1ZKyKNFupcJiEZQTe2KtLQ/9dXP6lWQEhmQ6RJb31vJhRydHRQDiQu+7tA+kvU7icePyej0S5/DwvJI6N91Gx52yDW0wMnFuO4Yc6Ok1OZFU5lVjhZWSTSjfGJCYzdT6pLdhkaHsbA0E2OeWSu68LzXExOPrJaGlA+z/PguRluh16j63rWhJSH8pk0zJkNYTMREZLRUX6lv/+/hFqkc5mEZGZZkPn5Ay+eP/4noTkinatiVGz+QSnkq5dPsLX9DYVCnmsGE8dxsLq0pFp/h1YdLQYTLSr7Fdb7+ZWgbkwm76FUqnCHidMbR7Mj/jC0vPWqO8zaehq5XE6cYEUM/AH5fEjp+TjTywAAAABJRU5ErkJggg==) 9 9/9px stretch;border-style:solid;border-radius:4px;background:#4d4336}.dark-mode button.men-button{border-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAHDSURBVEhL7ZZdqwFRFIYXSnIhlCtSpMiV8je4kB/qZ7hyKUSSKFdI5Ns+8y57NbOPceo427ny1DR7TWM9s7/sFSAXpe/vgD0iU81mk263mw5dBoMBhcNhHbmEQiHdurPf76lYLOrIpNVq4RaAjEXn85kOhwMeGvT7fYpGozpyCQaDunVnu91SqVTSkQvybjYb6nQ63DPVaDRot9tRKpWi0+lE8/mck00mE5rNZt6h/pFMJqOy2Sy3c7kc5xoOh3Q8HqnX65Hxed1ul9rt9ksigPen0ym3JZdSii9gyDBc+LJXRIIIJZcXc+Ad8OKrIgG/H4/HOnIxZDZEwmKx8BWqcrmMiX3LPovFYioSiSC34p5hH/ktbxs4MorH49x+mLN38pFZ4SOzwv/KnN1N1WqVKpWKfmSXQqFA+Xye29yz5XLJV61Ws/qXhXyr1YpzA2MYbQqRRyTCw5zZEPqJgCHDUZ5Op/8kFJHk8mLIvGXBer2mer3+K6G3R5Lrer1yDHBQcsHjHHZcjkm9ICQSCRqNRjp6DlYdFoMXEV0uF67S5FRWWPp4iMtLMpkkvxP3O1jefvMEUNM4ZSLXjYKVVfgEx0P0BXgw9WO/67nMAAAAAElFTkSuQmCC) 9 9/9px stretch;background:#282828}button.men-button:hover{background:#423726}.dark-mode button.men-button:hover{background:#383838}button.men-button.small{padding:.2em .4em}button:disabled{background:#b5b5b5;color:#6a6868;cursor:not-allowed}button.active{outline:1px solid rgb(200,200,200)}a{color:var(--link-color);text-decoration:none}a:link{text-decoration:none}a:visited{text-decoration:none}a:hover{text-decoration:none}a:active{text-decoration:none}input[type=checkbox],input[type=radio]{display:none}input[type=checkbox]+label,input[type=radio]+label{display:flex;align-items:center;cursor:pointer;white-space:nowrap;overflow:hidden}input[type=checkbox]+label::before,input[type=radio]+label::before{height:16px;width:16px;display:inline-block;padding:0;padding-right:4px;content:""}input[type=checkbox]+label::before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABaUlEQVR4nH2SO04DMRCGxwGJRCAKBA0NgoqWhgIkLoA4AC0SR+AIiIIj5AAcIKJMB4gG0lHSAEp4KEGgkOzLy//bsvfBLp+047Ez33iztkollTxKsPQPqFcYPLN4PJTbp0fIMsbTENGSxFrUmUrzTbCd3dDJL68j0ShpKFsTRYGEsc0d5+1LWLaJaeDk/vunaJ3K2/AbP/1lvjWHKPI8GMlF5wZmqhpO5s6kTibdqx6iZXdrw2zcQO4ZfHwhVnN79yCtZlPGk0Amue9iGvBD8b8SFpbhGuXFhSZmRUyDPCyk4GDONcrra6tYKeKPMdEziBYKFAnzOpn4N0i0RhRTTCjy4bxOJr6Bg8WUVpaXzMh5GbcZMQ14w4g7Z0rB9MeMZZ76Q8QMf5FOjvcxtfCoqsjLne49zFSZBoRNDg92cBO1BGGMlYz8KxMnI4WF1MEme9ubkkQhZtVc9x5hWJkUGhA2wVAL6r1MfgGU56TWOp7/IAAAAABJRU5ErkJggg==") no-repeat}input[type=checkbox]:checked+label::before{background:url("/ui/checkbox-checked.png") no-repeat}input[type=radio]+label::before{background:url("/ui/radio.png") no-repeat}input[type=radio]:checked+label::before{background:url("/ui/radio-checked.png") no-repeat}input.input-small,search-element.input-small input{padding:0 6px}input{color:var(--orange);font-size:16px;padding:5px;background:#372e22;border:none;box-shadow:inset 3px 3px 3px #261d11;border-radius:4px;line-height:1em}.dark-mode input{background:#282828;box-shadow:inset 3px 3px 3px #161616}input::placeholder{color:var(--orange);opacity:.9}input:focus-visible{outline:1px solid rgb(200,200,200);border:none}input.invalid{border:1px solid var(--invalid)}.select-container{display:inline-flex;padding:5px;min-height:1em}input,select{font-family:rssmall,ui-sans-serif,Arial,sans-serif;font-size:18px;text-shadow:1px 1px var(--black)}select{color:var(--orange);border:none;background:0 0;padding:0;margin:0;cursor:pointer}select:focus,select:focus-visible{border:none;outline:0}option{color:initial;text-shadow:none}fieldset{border:1px solid var(--black)}h4{margin:0}h2,h3,h4{text-shadow:2px 2px var(--black)}h3{margin:0;font-size:2em}p{margin:0;margin-bottom:1em}.emphasize{font-weight:700;text-decoration:underline;font-family:rsbold,ui-sans-serif,Arial,sans-serif}.validation-error{color:var(--invalid);font-weight:700}ul{margin:0;padding:0;padding-left:1em}.men-control-container{display:flex;align-items:center;padding:.4em;margin-left:8px}.men-control-container:first-child{margin-left:0}.men-control-container input{margin:0 .5em 0 0}#background-worldmap.interactable{filter:none!important}#background-worldmap{position:absolute;top:0;left:0;width:100%;z-index:0;height:100%;overflow:hidden;filter:opacity(.8);transition:filter .5s}.dark-mode #background-worldmap{filter:opacity(.15)}.rstext{color:#ff0}.rsborder{border-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQAAACAWCCokFSwnGDEqGzgyJkA5KEg6KEtAK0tAMk9INlJLO1dQQFtTRWBZSmphTGdgUmxkU29pXXBpVHVrWXdwX311Y395b4J4ZYd/bI6HdpCJdpaMeqKajK2pk6+qmrCspbWzq725rwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEYoieEAAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADkklEQVRoQ+1a3XraMAxlLDSpY5sE4gKFtLD3f8fuSP4hGf3GDedi+xAQB8nxiRzbRwYtvhZUkeY/P0RsCMP+6Pt+22+Hfr0NASU0w349vB1COBTr3D5TphL1rTY6CsbneDpCatMY7401vjXG4NM00NSNfIvinaj/tMslV2UuTS1tvh86AHycLucQaoOKNptF5DpjoYTIIVpv7HNlLKV+HcLl7K0AHH0datRs0YqzXhqEtJB45qGNgrK9sU+VuRSpg68TAO7fOec7D3F4O7zx8V2XVA5lPIX51j5RplLrw4cMUPtltcRbXstqFctlVVWrFQ7L6gXHZL2xz5WlrCrvV5sEUNuu+nq4BNOuFMCi/z0B4IAn/QPtLwJOGADabg+AA4YVp4sAIPPgzVjnXpL2gbL1bQToWyCskvaB0mNeew8ARSJ00RbzWgEU6WfSPlDQrnXqgSAxALAiKYAiEQC8MVhNBECQCABHLIb6DBSJ8JD3WGzVA0UieDBg+KsHikRaizrxQJGWSftAmaxFQGKuRazVVBdR8YAFoIto0C7iLNdD7iLWcr3G2NGlQpEIHuyzB4pEGKY6/AVAkQgenJrkgSIxukiilQ0AFIkyijA6BUCRCJw8NK9xoikSAUCYMi52gkToor4BFQuAIhEAQmPbyMmCxADIYYsiERgNPROjCkUizOS1RIzpGVCiihJ4KRJpoukoYgVe5RkoEmMeSM/IUsF6Bs/9wV0pw1SRGADS9cmDf3R/4Nj7A5tI/yijiOCBTmDxYO85pH/dHwjSc3/wjTz3B3fluT+4K//R/oBFOCU2pcdFLMIpsSmLcArpUwlH5wGJcMozYBFOiU1ZhFNiUxYfaMQoXcQCKLEpi3DKMGURTvntmkU4JTZlEY5OYPGARTg6gZmEU2JTFuGU2JRHOLhxiexYhKMA4gGLcEpsyiKcEpuyfpAqsSnrB6kSm/46wwPKDse0OyGcj+PIClvG/Jf76Pt+ljgxSZ043UmsGPZTEwzZPtix/KcfRmtyWgV4aJY6MU2smOdQxMQKvFTnUr222MeSNHA5hxGD9po4kepKc69QQ+TwTWLFq1w1ManEU9x/zqt4lwSFUdMkYo5Ezo7IqRN3EiuiFFOyy/3XTgDGDbjZ+x3YIeVIzFIn5NvfEitEXUxiiPZdVLUAWHi9v400pjVR4Eu8suu1kdDjJOlm1g1kYtJS7Rt1Q9rnpv8svn4Du/Ccu4BfJYQAAAAASUVORK5CYII=) 32 32/32px/3px 4px 4px 3px round;border-style:solid;border-radius:4px}.metal-border{border-image:url(/ui/metal-border.png) 18 18/18px/2px round;border-style:solid;border-radius:4px}.dark-mode .rsborder{border-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQAAAAkJCQ4ODhAQEBMTExYWFhcXFxkZGRwcHB0dHR8fHyAgICIiIiUlJSYmJicnJykpKSoqKisrKy0tLS8vLzExMTQ0NDU1NTc3Nzw8PEFBQUJCQkNDQ0ZGRkhISAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANbpKagAAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7CAAAOwgEVKEqAAAADhklEQVRoQ+1a7ZKiMBD0xIWQBIEsruLqvf9bej2TD+G8Ov/YV3VVjkpwJqSZkKQnOpvbhirS/PdZxIYwTkff90M/jP1+CAElNOO0Hz8PIRyKdW1fKVOJ+lYbnQXjez4dIbVpjPfGGt8aY/BpGmjqRr5F8U7Uv9vlkrsyl6aWNr8OHQDOp+slhNqgos1mEbnOWCghcojWB/taGUupX4dwvXgrAEdfhxo1W7TirJcGIS0knnloo6BsH+xLZS5F6uDrBID7d875zkMc3g5vfHzXJZVDGU9hfrQvlKnU+vAhA9R+W23xlte22sVyW1XVbofDtvrAMVkf7GtlKavK+92QAGrbVbeXSzDtTgEs+t8TAA540j/Q/ibghAGg7fYAOGBYcboIADIPPo117iNpXyiDbyNA3wJhl7QvlB7z2nsAKBKhiwbMawVQpG3SvlDQrnXqgSAxALAiKYAiEQC8MVhNBECQCABHLIb6DBSJ8JAnLLbqgSIRPBgx/NUDRSKtRZ14oEgEDxZrEZCYaxFrNdVFVDxgAegiGrSLOMv1mLuItVzvMXZ0qVAkggdT9kCRWBNNABSJ4MGpSR4oEqOLJFoZAKBIlFGE0SkAikTg5LFp4kRTJAKAMGVc7ASJ0EV9AyoWAEUiAITGtpGTBYkBkMMWRSJMNPRMjCoUiQCwl4gxPQNKVFECL0UiTTQdRazAqzwDRWLMA+kZWSpYz+C9P3gqZZgqEgNAuj558J/uDxx7f2AT6R9lFBE80AksHkyeQ/r3/YEgETx47w+eynt/8FTe+4On8u/2ByzCKbEpPS5iEU6JTVmEU0ifSjg6D0iEU54Bi3BKbMoinBKbsvhAI0bpIhZAiU1ZhFOGKYtwym/XLMIpsSmLcHQCiwcswtEJzCScEpuyCKfEpjzCwY1LZMciHAUQD1iEU2JTFuGU2JT1g1SJTVk/SJXY9OeFF7ZMQjjn48wKW+b8l/vs+36VOLFInTg9SawYp6UJhmwf7Vz+0w+zNTmtAjy0Sp1YJlascyhiYgVeqnOpXlvsc8gA10uYMWjviROprjTXQA2Rwx8SKxq5amFSiae4/5xX8SUJCrOmScQciZwdkVMnniRWRCmmZJf7r50AzAO42fsJ7JByJFapE/Ltb4kVoi4mMUT7FFUtADZe72+QxrQmCnyJV3a9NhJ6nCTdyjpAFiYt1T6oG9I+N/1nc/sFyCqLOrY9UXkAAAAASUVORK5CYII=) 32 32/32px/4px round}.rsborder-tiny{border-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABeSURBVChTY/z//z8DCOjrqEAYOMDFK3cYQTRYA0ixi6UeWAIX2HP8ElgTo562Mlxx7+x1YFPQQXFqENh2kCYmsAgQ4FIMAshycA3EgmGlARZ02ACyHOkRR1rSYGAAAOfpMoP9GF1GAAAAAElFTkSuQmCC) 4 4/4px round;border-style:solid;border-radius:4px}.dark-mode .rsborder-tiny{border-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAABZSURBVChTY2SAAm1t7f9QJlZw9epVsFowAVJsbW0NYuIER48eBWtiRFY8a9YsuI3IIC0tDWw7SBMTWAQIcCkGAWQ5uAZiwbDSAAs6bABZjvSIg/KJTBoMDAAZ2iaUZhzAawAAAABJRU5ErkJggg==) 4 4/4px round}.rsbackground{background:var(--rsbackground);background-repeat:repeat}.dark-mode .rsbackground{background:var(--rsbackground-dark)}.rsbackground-hover:hover{background:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1)),var(--rsbackground)}.dark-mode .rsbackground-hover:hover{background:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1)),var(--rsbackground-dark)}.no-pointer-events{pointer-events:none}.dialog{display:none;justify-content:center;align-items:center;width:100%;height:100%;position:fixed;top:0;left:0;z-index:1000;backdrop-filter:blur(3px);background:rgba(0,0,0,.5);padding:32px 0;box-sizing:border-box}.dialog__visible{display:flex}.dialog h2{padding:0;margin:0}.dialog__container{padding:16px 24px;width:min(95%,1000px);max-height:100%;display:flex;flex-direction:column}search-element{display:flex;position:relative;min-width:300px;max-width:500px}.search-element__input{width:100%;padding:12px;font-size:20px}inventory-item{display:flex;box-sizing:border-box;overflow:hidden;flex-direction:column;position:relative;transform:translate3d(0,0,1px);color:var(--primary-text);min-height:250px;visibility:hidden}inventory-item.rendered{min-height:unset;visibility:visible}.inventory-item__top{display:grid;grid-template-columns:2fr 1fr;align-items:center;transform:translateZ(1px);padding:8px;background:rgba(255,255,255,.05)}.inventory-item__details{display:grid;grid-template-columns:1fr 2fr;grid-gap:0 0.5em;word-break:keep-all;white-space:nowrap}.inventory-item__picture{width:63px;min-height:56px;min-width:63px;border:none;image-rendering:optimizequality}.inventory-item__bottom{display:grid;grid-template-columns:1fr 1fr 2fr;align-items:center;white-space:nowrap;grid-gap:0 8px;padding:8px}.inventory-item__quantity-bar{height:8px;width:100%;transform-origin:left}.inventory-item__picture-container{display:flex;justify-content:center;align-items:center;min-height:45px;height:45px;min-width:50px}.inventory-item__name{font-size:20px}inventory-pager{display:block}.inventory-pager__label{margin-bottom:.25em}.inventory-pager__buttons{display:flex;flex-wrap:wrap;row-gap:4px;column-gap:4px}.inventory-pager__buttons button{padding:4px 8px}app-navigation{display:flex;margin-bottom:1em;align-items:center;padding:8px 16px;pointer-events:auto;overflow-x:auto;overflow-y:hidden}.mobile{display:none}@media only screen and (max-width:850px){.desktop{display:none}.mobile{display:initial}}app-navigation .men-button img{height:24px}.app-navigation__nav{display:flex;align-items:center;column-gap:6px;justify-content:flex-start;flex-grow:1}.app-navigation__separator{flex-grow:1}.app-navigation__nav men-link{margin:0}.app-navigation__group-name{color:#fff;font-size:1.5em;margin-right:1em;font-weight:300}.items-page__list{display:grid;grid-template-columns:repeat(7,1fr);grid-gap:10px 10px;margin-top:16px;align-items:flex-start}@media only screen and (max-width:2200px){.items-page__list{grid-template-columns:repeat(6,1fr)}}@media only screen and (max-width:1900px){.items-page__list{grid-template-columns:repeat(5,1fr)}}@media only screen and (max-width:1500px){.items-page__list{grid-template-columns:repeat(4,1fr)}}@media only screen and (max-width:1300px){.items-page__list{grid-template-columns:repeat(3,1fr)}}.items-page__head{display:flex;align-items:flex-end;column-gap:8px;row-gap:6px}@media only screen and (max-width:850px){.items-page__list{grid-template-columns:repeat(2,1fr)}.items-page__head{flex-direction:column;align-items:flex-start}.items-page__head search-element{margin-right:0}}@media only screen and (max-width:500px){.items-page__list{grid-template-columns:repeat(1,1fr)}}.items-page__utility{margin-top:8px;display:flex;align-items:center;overflow-x:auto}.items-page__info-box input{margin:0 .5em 0 0}app-route{display:none}map-page{display:block}.map-page__container{display:flex;overflow-x:auto;padding:0 4px}.map-page__focus-player-buttons{display:flex}.map-page__focus-player-buttons>button+button{margin-left:6px}side-panel{display:block;height:max-content;max-height:100%;width:300px;max-width:300px;min-width:300px;overflow-y:auto;overflow-x:hidden;box-sizing:border-box;padding:20px 8px;z-index:1;pointer-events:auto}@media only screen and (max-width:1000px){side-panel{display:none}}button.side-panel__move{width:100%;padding:0;margin-bottom:4px;pointer-events:auto}.side-panel__panels{pointer-events:auto}player-panel{display:block;width:100%;position:relative;transform:translate3d(0,0,1px);color:#fff;box-sizing:border-box}player-panel+player-panel{margin-top:12px}.player-panel__minibar{display:grid;grid-template-columns:repeat(6,1fr)}player-panel.expanded .player-panel__minibar{box-shadow:rgba(0,0,0,.15) 0 2px 8px}.player-panel__minibar button{flex-grow:1;margin:0;background:0 0;border:none;padding:0;display:flex;justify-content:center;align-items:center}.player-panel__minibar img{pointer-events:none;image-rendering:crisp-edges;image-rendering:pixelated;transform:translateZ(0);padding:4px 0}.player-panel__minibar button:hover,button.player-panel__tab-active{background:rgba(255,255,255,.2)}player-panel.expanded .player-panel__content{padding:8px 0}.player-panel__collection-log img{image-rendering:initial}player-stats{display:block;width:100%;overflow:visible;white-space:nowrap;line-height:1;position:relative;color:#fff}.player-stats__hitpoints-numbers,.player-stats__name,.player-stats__prayer-numbers{margin-left:8px;z-index:1;position:relative}.player-stats__energy,.player-stats__hitpoints,.player-stats__prayer{box-sizing:border-box;position:relative;padding:2px 0}.player-stats__energy-bar,.player-stats__hitpoints-bar,.player-stats__prayer-bar{position:absolute;left:0;top:0;width:100%;z-index:0}.player-stats__energy{height:3px}.player-stats__inactive stat-bar{filter:grayscale(100%)}player-stats player-interacting{height:45%;width:40%;position:absolute;top:50%;left:50%;transform:translate(-50%,-10%)}player-inventory{--inventory-height:254px;display:flex;justify-content:center;position:relative;min-width:190px;height:var(--inventory-height)}player-inventory .item-box__container:hover{background:rgba(255,255,255,.1)}.player-inventory__inventory{padding-top:8px;display:grid;grid-template-columns:repeat(4,40px);grid-template-rows:repeat(7,34px);justify-content:center}.player-inventory__background{display:flex;position:absolute;top:0;left:50%;transform:translateX(-50%);width:190px;height:var(--inventory-height);background-image:url(/ui/inventory_background.png);background-repeat:no-repeat;background-size:contain}.dark-mode .player-inventory__background{background-image:url(/ui/inventory_background-dark.png)}player-skills{display:grid;margin-bottom:4px;height:256px;grid-template-columns:62px 62px 62px;justify-content:center}player-skills skill-box:hover,player-skills total-level-box:hover{filter:brightness(1.25)}skill-box{display:flex;position:relative;transform:translateZ(1px);width:62px;height:32px;font-family:rstiny}.skill-box__left{background-image:url(/ui/174-0.png)}.dark-mode .skill-box__left{background-image:url(/ui/174-0-dark.png)}.skill-box__right{position:relative;background-image:url(/ui/175-0.png)}.dark-mode .skill-box__right{background-image:url(/ui/175-0-dark.png)}.skill-box__left,.skill-box__right{display:flex;justify-content:center;align-items:center;width:31px;height:32px;background-repeat:no-repeat;background-size:contain}.skill-box__left,.skill-box__progress,.skill-box__right{pointer-events:none}.skill-box__baseline-level,.skill-box__current-level{position:absolute;font-size:16px;color:#ff0;text-shadow:1px 1px var(--black);min-width:10px}.skill-box__baseline-level{transform:translate(calc(50% - 1px),5px);text-align:right}.skill-box__current-level{transform:translate(calc(-50% - 2px),-5px);text-align:left}.skill-box__progress{width:100%;padding:0 4px;box-sizing:border-box;position:absolute;bottom:1px}.skill-box__progress-bar{height:2px;width:100%;transform-origin:left}player-equipment{display:flex;justify-content:center}.equipment{position:relative;width:175px;height:200px;display:flex}.equipment-slot{position:absolute;display:flex;justify-content:center;align-items:center;background-image:url(/ui/170-0.png);width:36px;height:36px}.dark-mode .equipment-slot{background-image:url(/ui/170-0-dark.png)}.equipment-slot item-box{height:32px}.equipment-head{left:70px;top:0}.equipment-cape{left:29px;top:39px}.equipment-neck{left:70px;top:39px}.equipment-ammo{left:111px;top:39px}.equipment-weapon{left:14px;top:78px}.equipment-torso{left:70px;top:78px}.equipment-shield{left:126px;top:78px}.equipment-legs{left:70px;top:118px}.equipment-gloves{left:14px;top:158px}.equipment-boots{left:70px;top:158px}.equipment-ring{left:126px;top:158px}xp-dropper{display:block;position:absolute;right:0;top:0;width:100%;overflow:hidden;height:100%;pointer-events:none}@keyframes scroll{0%{transform:translateY(0)}100%{transform:translateY(-100%)}}.xp-dropper__drop{position:absolute;right:4px;top:0;height:max-content;animation:scroll 4s linear;animation-fill-mode:forwards;white-space:nowrap;display:flex;flex-direction:column;align-items:flex-end}.xp-droppper__skill-icon{height:1em}rs-tooltip{display:none;position:absolute;background:rgba(0,0,0,.8);border:1px solid rgba(255,255,255,.2);padding:4px;pointer-events:none;z-index:10000;top:0;left:0;color:#fff}item-box{display:flex;justify-content:center;align-items:center;image-rendering:-webkit-optimize-contrast;image-rendering:optimizequality}.item-box__container{position:relative;display:flex;justify-content:center;align-items:center;height:100%;max-width:100%}.item-box__image{z-index:0;pointer-events:none;transform:translateX(2px);height:100%}.item-box__quantity{pointer-events:none;position:absolute;top:0;left:0;z-index:1;color:#ff0;transform:translate(0,-20%);font-size:16px;font-family:rstiny}total-level-box{display:flex;font-size:13px;color:#ff0;position:relative;justify-content:center;align-items:center}.total-level-box__content,.total-level-box__image{pointer-events:none}.total-level-box__content{position:absolute;text-align:center;display:flex;flex-direction:column;justify-content:center;align-items:center;line-height:1em}player-quests{display:block;padding:0 8px}.player-quests__top{display:flex;align-items:center}.player-quests__list{color:#fff;max-height:300px;overflow-y:scroll}.player-quests__quest{display:flex;align-items:center;font-size:18px}.player-quests__quest:hover{background:rgba(255,255,255,.1)}.player-quests__not-started{color:red}.player-quests__in-progress{color:#ff0}.player-quests__finished{color:#0f0}.player-quests__difficulty-icon{margin-right:8px}.player-quests__section-header{color:var(--orange);margin:4px 0;font-size:20px;font-weight:400}.player-quests__filter{flex-grow:1;box-sizing:border-box;min-width:0}.player-quests__filter input{font-size:18px}.player-quests__hidden{display:none}.player-quests__points{white-space:nowrap;margin-left:16px}men-homepage{display:flex;flex-direction:column;width:100%;font-size:16px;position:relative;height:100%;color:#fff}men-homepage social-links{position:absolute;top:0;left:0;padding:1em;font-size:1.2em}.men-homepage__container{display:flex;justify-content:center;align-items:center;height:100%;width:100%;flex-direction:column}.men-homepage__container h1{text-shadow:3px 3px var(--black);font-size:min(128px, 16vw);margin:0}.men-homepage__links{margin-top:1.5em;display:flex}.men-homepage__links>men-link+men-link{margin-left:2em}wrap-routes{display:none;width:100%;height:100%;flex-direction:row;position:relative}create-group{display:flex;justify-content:center;padding:64px 12px;box-sizing:border-box}.create-group__steps{display:flex;align-items:flex-start;flex-direction:column;padding:8px 24px;box-sizing:border-box}.create-group__step+.create-group__step{margin-top:1em}.create-group__name input{font-size:1.5em}.create-group__step-members,.create-group__submit{display:none}.create-group__submit{margin-top:2em;margin-bottom:1em}men-link>a{display:flex;justify-content:center;align-items:center}setup-instructions{display:flex;justify-content:center;padding:64px 12px;width:100%;box-sizing:border-box}.setup__container{max-width:500px;padding:8px 24px;width:100%;box-sizing:border-box}.setup__block{display:flex;flex-direction:column;align-items:flex-start}.setup__block{margin-bottom:1em}.setup__config img{max-width:250px}.setup__go-to-group{display:flex;justify-content:center;margin-top:2em}.setup__credential{padding:.25em .5em;position:relative}.setup__credential-hide{position:absolute;left:0;top:0;background:#222;color:#fff;height:100%;width:100%;display:flex;justify-content:center;align-items:center;cursor:pointer;z-index:10}.setup__credential-hide:hover{background:#444}group-settings{display:flex}.group-settings__container{padding:8px 12px;max-width:500px;width:100%}.group-settings__section-content{padding-left:1em}.group-settings__members edit-member{margin-bottom:1em}member-name-input,men-input{display:block}member-name-input label,men-input label{display:block}member-name-input+member-name-input,men-input+men-input{padding-top:1em}edit-member{display:block}.edit-member__buttons{display:flex;margin-top:4px}.edit-member__buttons>button+button{margin-left:8px}loading-screen{position:fixed;z-index:1000;width:100%;height:100%;top:0;left:0;background:rgba(0,0,0,.75);display:none}.loader{top:50%;left:50%;transform:translate(-50%,-50%);display:inline-block;position:relative;width:80px;height:80px}.loader div{position:absolute;top:33px;width:13px;height:13px;border-radius:50%;background:#fff;animation-timing-function:cubic-bezier(0,1,1,0)}.loader div:first-child{left:8px;animation:lds-ellipsis1 .6s infinite}.loader div:nth-child(2){left:8px;animation:lds-ellipsis2 .6s infinite}.loader div:nth-child(3){left:32px;animation:lds-ellipsis2 .6s infinite}.loader div:nth-child(4){left:56px;animation:lds-ellipsis3 .6s infinite}@keyframes lds-ellipsis1{0%{transform:scale(0)}100%{transform:scale(1)}}@keyframes lds-ellipsis3{0%{transform:scale(1)}100%{transform:scale(0)}}@keyframes lds-ellipsis2{0%{transform:translate(0,0)}100%{transform:translate(24px,0)}}login-page{display:flex;justify-content:center;align-items:center;height:100%;width:100%}.login__container{max-width:500px;display:flex;flex-direction:column;align-items:center;padding:8px 24px}.login__container,.login__container input{font-size:1.2em}.login__button{margin-top:1em}.login__error{text-align:center;margin-top:1em}social-links{display:flex;align-items:center}social-links a{display:flex;align-items:center}social-links a+a{margin-left:.5em}rune-pouch{display:grid;grid-template-columns:50% 50%;grid-template-rows:1fr 1fr;grid-column-gap:4px;position:absolute;top:0;left:0;height:100%;width:100%}.rune-pouch__rune{display:flex;min-height:100%;height:100%;max-height:100%;align-items:center}.rune-pouch__rune item-box{width:100%;height:100%}.rune-pouch__rune .item-box__quantity{font-size:14px}stat-bar{display:block;height:100%}player-interacting{display:block;visibility:hidden}.player-interacting__name{position:absolute;top:50%;left:0;padding:0 4px;overflow:hidden;text-overflow:ellipsis;transform:translateY(-50%);max-width:100%}skills-graphs{display:block}.skills-graphs__chart-container{width:100%;height:100%;position:relative;box-sizing:border-box;margin-top:12px;padding-bottom:12px}.skills-graphs__control-container{display:flex;overflow-x:auto}.skills-graphs__loader{position:absolute}skill-graph{display:block;max-width:100%;overflow:hidden;position:relative}.skill-graph__skill-image{position:absolute;height:50%;top:50%;left:0;right:0;margin:auto;transform:translateY(-50%);image-rendering:crisp-edges;image-rendering:pixelated;opacity:.2;z-index:0}.skill-graph__top{position:relative}.skill-graph__container{position:relative;height:max(40vh,300px);z-index:1;background:rgba(255,255,255,.05)}.skill-graph__table-container{padding:1em 2em 0 2em}.skill-graph__table-container table{width:100%;border-collapse:collapse;font-size:20px}.skill-graph__table-container tr{border-bottom:1px solid var(--graph-grid-border)}.skill-graph__table-container tr:hover{border-bottom:1px solid #fff}.skill-graph__table-container td{padding:4px}.skill-graph__overall-skill-change{font-size:18px}.skill-graph__overall-skill-change>td:first-child{display:flex;align-items:center}.skill-graph__overall-skill-change img{margin-right:.5em;width:1.25em}.confirm-dialog__container{width:350px}.confirm-dialog__buttons{display:flex}.confirm-dialog__buttons>button+button{margin-left:8px}.panels-page .authed-section{display:block!important;overflow-y:auto}.panels-page side-panel{display:block;width:100%;max-width:none;max-height:unset}.panels-page .side-panel__panels{display:flex;align-items:flex-start;row-gap:12px;column-gap:12px;flex-wrap:wrap}.panels-page player-panel{margin:0;width:300px}.panels-page .authed-section__main-content{overflow:hidden}diary-dialog h2{color:var(--orange)}diary-dialog .dialog__container{padding:0;cursor:auto}.dialog__visible{cursor:pointer}.diary-dialog__scroll-container{max-height:100%;overflow:auto}.diary-dialog__section{text-align:center}.diary-dialog__requirement-met,.diary-dialog__task-complete{text-decoration:underline;text-underline-offset:-40%;text-decoration-skip-ink:none;color:rgba(255,255,255,.6)!important}.diary-dialog__task{display:flex;flex-wrap:wrap;padding:6px 0;justify-content:center;align-items:flex-end}.diary-dialog__task:hover{background:rgba(0,0,0,.15)}.diary-dialog__requirements span{color:var(--invalid)}.diary-dialog__requirements img{height:16px}.diary-dialog__requirement-met img{opacity:.5}.diary-dialog__header{display:flex;justify-content:space-between;align-items:center;padding:16px;background:rgba(255,255,255,.05)}.dialog__close:hover{filter:brightness(1.3)}.diary-dialog__diary-complete .diary-dialog__header,.diary-dialog__tier-complete{background:rgba(0,200,0,.1)}.diary-dialog__diary-complete .diary-dialog__header h2,.diary-dialog__tier-complete h2{color:#00c800}.diary-dialog__section h2{text-decoration:underline}player-diaries{display:block;max-height:300px;overflow-y:auto;overflow-x:hidden}.player-diaries__title{margin:0;text-align:center;color:var(--orange)}.player-diaries__completions{padding:0 4px}diary-completion+diary-completion{margin-top:2px}diary-completion{display:block;color:#ff0;cursor:pointer}diary-completion:hover{background:rgba(0,0,0,.15)}.diary-completion__container{padding:4px}.diary-completion__top{display:flex;justify-content:space-between;align-items:center}.diary-completion__bottom{display:flex}.diary-completion__bottom stat-bar{height:8px;flex-grow:1;border:1px solid #000}.diary-completion__bottom stat-bar+stat-bar{border-left:none}canvas-map{display:block;touch-action:none;cursor:grab}canvas-map.dragging{cursor:grabbing}.canvas-map__coordinates{position:fixed;bottom:0;left:8px}collection-log{display:block;color:var(--orange)}collection-log h2{font-size:20px;text-shadow:1.3px 1.3px var(--black)}.collection-log__container{height:95%;padding:0;cursor:auto}.collection-log__header{display:grid;grid-template-columns:1fr 2fr 1fr;align-items:center;text-align:center;padding:8px}.collection-log__close{justify-self:end}.collection-log__search{justify-self:start;min-width:unset}.collection-log__title-border{background:url("/ui/173-0.png") repeat;width:100%;height:6px}.collection-log__main{padding:4px;display:flex;flex-direction:column;height:100%;overflow:hidden}.collection-log__tab-buttons{display:grid;grid-template-columns:repeat(5,1fr);grid-gap:4px}.collection-log__tab-buttons button{font-family:rssmall,ui-sans-serif,Arial,sans-serif;text-shadow:1.3px 1.3px var(--black);color:var(--orange);font-size:18px;background:#28251e;border:1px solid hsl(40deg 15.79% 29.8%);border-bottom:none;border-top-left-radius:4px;border-top-right-radius:4px;padding:4px}.collection-log__tab-buttons button.collection-log__tab-button-active{background:#3e3529}.collection-log__tab-container{border:1px solid hsl(40deg 15.79% 29.8%);height:100%;overflow:hidden}.collection-log__complete{color:var(--green)}.collection-log__in-progress{color:var(--yellow)}.collection-log__not-started{color:var(--red)}collection-log-page{display:flex;flex-direction:column;height:100%;overflow:hidden}.collection-log__page-top{font-size:18px;padding:4px 8px;border-bottom:1px solid hsl(40deg 15.79% 29.8%)}.collection-log__page-items{display:grid;--collection-log__columns:6;grid-template-columns:repeat(var(--collection-log__columns),1fr);padding:2px 8px;overflow-y:auto;box-sizing:border-box}@media only screen and (max-width:800px){.collection-log__page-items{--collection-log__columns:5}}@media only screen and (max-width:600px){.collection-log__page-items{--collection-log__columns:4}}@media only screen and (max-width:500px){.collection-log__page-items{--collection-log__columns:3}}@media only screen and (max-width:400px){.collection-log__page-items{--collection-log__columns:2}}.collection-log__count{color:#fff}collection-log-tab{display:grid;grid-template-columns:2fr 4fr;overflow:hidden;height:100%}.collection-log__tab-list{display:flex;flex-direction:column;height:100%;overflow-y:auto;padding:2px;min-width:150px;border-right:1px solid hsl(40deg 15.79% 29.8%);box-sizing:border-box}.collection-log__tab-list button{font-size:18px;color:var(--orange);font-family:rssmall,ui-sans-serif,Arial,sans-serif;text-shadow:1.3px 1.3px var(--black);text-align:left;padding:2px 0}.collection-log__tab-list button:nth-child(odd){background-color:rgba(255,255,255,.05)}.collection-log__tab-list button:hover{background-color:rgba(255,255,255,.2)}.collection-log__tab-list button>*{pointer-events:none}.collection-log__tab-list button.collection-log__page-active{background-color:rgba(255,255,255,.2)}.collection-log__tab-list button.collection-log__complete{color:var(--green)}.collection-log__page-container{overflow:hidden}collection-log-item{display:block}collection-log-item a{display:block;position:relative}collection-log-item item-box{opacity:.3}collection-log-item item-box.collection-log__item-unlocked{opacity:1}collection-log-item .item-box__quantity{font-size:20px;transform:translate(0,0)}collection-log-item item-box:hover{background:rgba(255,255,255,.1)}.collection-log-item__other-players{pointer-events:none;position:absolute;bottom:0}player-icon{display:inline}player-icon img{filter:hue-rotate(var(--player-icon-color)) saturate(75%)}donate-button img.donate-button__logo{margin-right:.25rem;height:20px;image-rendering:crisp-edges;image-rendering:pixelated}
    </style>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="preload" href="/fonts/RuneScape-Chat-07.ttf" as="font" type="font/ttf" crossorigin />

    <script>
      window.getTheme = () => {
        let theme = localStorage.getItem("theme");

        if (!theme && window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches) {
          theme = "dark";
        }

        return theme;
      };

      window.updateTheme = () => {
        const theme = window.getTheme();
        const darkMode = theme === "dark";
        if (darkMode) {
          document.documentElement.classList.add("dark-mode");
        } else {
          document.documentElement.classList.remove("dark-mode");
        }
      };

      window.updateTheme(true);
    </script>
  </head>
  <body>
    <loading-screen></loading-screen>
    <app-route
      route-path="/"
      route-component="men-homepage"
      route-outlet=".unauthed-section__outlet"
      route-wrapper=".unauthed-section"
    ></app-route>
    <app-route
      route-path="/create-group"
      route-component="create-group"
      route-outlet=".unauthed-section__outlet"
      route-wrapper=".unauthed-section"
    ></app-route>
    <app-route
      route-path="/setup-instructions"
      route-component="setup-instructions"
      route-outlet=".unauthed-section__outlet"
      route-wrapper=".unauthed-section"
    ></app-route>
    <app-route
      route-path="/login"
      route-component="login-page"
      route-outlet=".unauthed-section__outlet"
      route-wrapper=".unauthed-section"
    ></app-route>
    <app-route
      route-path="/logout"
      route-component="logout-page"
      route-outlet=".unauthed-section__outlet"
      route-wrapper=".unauthed-section"
    ></app-route>
    <app-route
      route-path="/demo"
      route-component="demo-page"
      route-outlet=".unauthed-section__outlet"
      route-wrapper=".unauthed-section"
    ></app-route>

    <app-route
      route-path="/"
      route-component="items-page"
      route-outlet=".authed-section__outlet"
      route-wrapper=".authed-section"
    ></app-route>
    <app-route route-path="/items" alias-for="/" route-wrapper=".authed-section"></app-route>
    <app-route
      route-path="/map"
      route-component="map-page"
      route-outlet=".authed-section__outlet"
      route-wrapper=".authed-section"
    ></app-route>
    <app-route
      route-path="/settings"
      route-component="group-settings"
      route-outlet=".authed-section__outlet"
      route-wrapper=".authed-section"
    ></app-route>
    <app-route
      route-path="/graphs"
      route-component="skills-graphs"
      route-outlet=".authed-section__outlet"
      route-wrapper=".authed-section"
      ></app-route>
    <app-route
      route-path="/panels"
      route-component="panels-page"
      route-outlet=".authed-section__outlet"
      route-wrapper=".authed-section"
    ></app-route>

    <canvas-map id="background-worldmap"></canvas-map>
    <wrap-routes class="unauthed-section" route-path="">
      <template>
        <main class="unauthed-section__outlet"></main>
      </template>
    </wrap-routes>

    <wrap-routes class="authed-section" route-path="/group">
      <template>
        <app-initializer></app-initializer>
        <div class="authed-section__main-content">
          <app-navigation class="rsborder-tiny rsbackground"></app-navigation>
          <div class="authed-section__outlet"></div>
        </div>
        <side-panel></side-panel>
      </template>
    </wrap-routes>

    <rs-tooltip></rs-tooltip>
    <confirm-dialog class="dialog"></confirm-dialog>
    <script>var t=new class{constructor(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>{this.updateTheme()})),this.updateLayout()}setLayout(t){localStorage.setItem("layout-direction",t),this.updateLayout()}getLayout(){return localStorage.getItem("layout-direction")}updateLayout(){if("row-reverse"===this.getLayout())document.querySelector(".authed-section").style.flexDirection="row";else{const t=document.querySelector(".authed-section");t&&(t.style.flexDirection="row-reverse")}}setTheme(t){localStorage.setItem("theme",t),this.updateTheme()}getTheme(){return window.getTheme()}updateTheme(){window.updateTheme()}},e=new class{constructor(){this.subscribers=new Map,this.mostRecentPublish=new Map}subscribe(t,e,i=!0){this.subscribers.has(t)||this.subscribers.set(t,new Set),this.subscribers.get(t).add(e),i&&this.mostRecentPublish.has(t)&&e(...this.mostRecentPublish.get(t))}unsubscribe(t,e){this.subscribers.has(t)&&this.subscribers.get(t).delete(e)}publish(t,...e){if(this.mostRecentPublish.set(t,e),this.subscribers.has(t))for(const i of this.subscribers.get(t))i(...e)}unpublishAll(){this.mostRecentPublish.clear()}unpublish(t){this.mostRecentPublish.delete(t)}getMostRecent(t){return this.mostRecentPublish.get(t)}anyoneListening(t){return this.subscribers.has(t)&&this.subscribers.get(t).size>0}waitUntilNextEvent(t,e=!0){return new Promise((i=>{const s=()=>{this.unsubscribe(t,s),i()};this.subscribe(t,s,e)}))}waitForAllEvents(...t){const e=[];for(const i of t)e.push(this.waitUntilNextEvent(i));return Promise.all(e)}},i=new class{get globalTooltip(){return this._globalTooltip||(this._globalTooltip=document.querySelector("rs-tooltip")),this._globalTooltip}showTooltip(t){this.globalTooltip.showTooltip(t)}hideTooltip(){this.globalTooltip.hideTooltip()}},s=class extends HTMLElement{constructor(){super(),this.eventUnbinders=new Set,this.eventListeners=new Map}connectedCallback(){}disconnectedCallback(){this.unbindEvents(),this.showingTooltip&&(this.showingTooltip=!1,i.hideTooltip())}enableTooltip(){this.eventListener(this,"mouseover",this.handleMouseOver.bind(this)),this.eventListener(this,"mouseout",this.handleMouseOut.bind(this))}updateTooltip(t){this.tooltipText=t,this.showingTooltip&&i.showTooltip(t)}handleMouseOver(t){const e=this.tooltipText||this.getAttribute("tooltip-text");e&&(this.showingTooltip=!0,this.updateTooltip(e.trim()),t.stopPropagation())}handleMouseOut(){this.showingTooltip=!1,i.hideTooltip()}unbindEvents(){this.eventUnbinders.forEach((t=>{t()})),this.eventUnbinders=new Set,this.eventListeners=new Map}eventListener(t,e,i,s={}){this.isConnected&&(this.eventListeners.has(t)||this.eventListeners.set(t,new Set),this.eventListeners.get(t).has(e)||(this.eventListeners.get(t).add(e),t.addEventListener(e,i,Object.assign({passive:!0},s)),this.eventUnbinders.add((()=>t.removeEventListener(e,i)))))}subscribe(t,i){this.isConnected&&(e.subscribe(t,i),this.eventUnbinders.add((()=>e.unsubscribe(t,i))))}subscribeOnce(t,i){let s=(...t)=>{this.eventUnbinders.has(n)&&(this.eventUnbinders.delete(n),n()),i(...t)},n=()=>e.unsubscribe(t,s);this.eventUnbinders.add(n),e.subscribe(t,s)}html(){return""}render(){this.innerHTML=this.html()}},n=new class{storeGroup(t,e){localStorage.setItem("groupName",t),localStorage.setItem("groupToken",e)}getGroup(){return{groupName:localStorage.getItem("groupName"),groupToken:localStorage.getItem("groupToken")}}clearGroup(){localStorage.removeItem("groupName"),localStorage.removeItem("groupToken")}};customElements.define("men-homepage",class extends s{constructor(){super()}html(){return`<social-links></social-links>\n\n<div class="men-homepage__container">\n  <h1>GroupIron.men</h1>\n  <div class="men-homepage__links">\n    <men-link link-href="/create-group">\n      <button class="men-button">Get started</button>\n    </men-link>\n    <men-link link-href="/demo">\n      <button class="men-button">Demo</button>\n    </men-link>\n    ${this.hasLogin?'\n    <men-link link-href="/group">\n      <button class="men-button">Go to group</button>\n    </men-link>\n    ':'\n    <men-link link-href="/login">\n      <button class="men-button">Login</button>\n    </men-link>\n    '}\n  </div>\n</div>\n`}connectedCallback(){super.connectedCallback(),this.render()}disconnectedCallback(){super.disconnectedCallback()}get hasLogin(){const t=n.getGroup();return t&&t.groupName&&t.groupToken&&"@EXAMPLE"!==t.groupName}});customElements.define("wrap-routes",class extends s{constructor(){super()}html(){return""}connectedCallback(){super.connectedCallback(),this.template=this.querySelector("template"),this.path=this.getAttribute("route-path"),this.active=!1}disconnectedCallback(){super.disconnectedCallback()}enable(){this.active||(this.active=!0,this.appendChild(this.template.cloneNode(!0).content),this.style.display="flex")}disable(){this.active&&(this.active=!1,this.innerHTML="",this.style.display="none")}});var a=new class{constructor(){this.tagRegexp=/<[^>]*>/gi,this.loadImages()}async loadImages(){this.images={};const t=localStorage.getItem("images");t&&(this.images=JSON.parse(t));const e=await fetch("/data/images.json"),i=await e.json();this.images=i,localStorage.setItem("images",JSON.stringify(i))}callOnInterval(t,e,i=!0){i&&t();let s=Date.now()+e;return setInterval((async()=>{if(Date.now()>=s&&"visible"===document.visibilityState){s=1/0;try{await t()}catch(t){console.error(t)}s=Date.now()+e}}),Math.max(e/10,10))}formatShortQuantity(t){return t>=1e9?Math.floor(t/1e9)+"B":t>=1e7?Math.floor(t/1e6)+"M":t>=1e5?Math.floor(t/1e3)+"K":t}formatVeryShortQuantity(t){return t>=1e3&&t<1e5?Math.floor(t/1e3)+"K":this.formatShortQuantity(t)}removeArticles(t){const e=t.split(" ");return e.length<=1?t:["a","the","an"].includes(e[0].toLowerCase())?e.splice(1).join(" "):t}timeSinceLastUpdate(t){t=new Date(t);return(new Date).getTime()-t.getTime()}throttle(t,e){let i=!1;return()=>{i||(i=!0,setTimeout((()=>{t(),i=!1}),e))}}setsEqual(t,e){return!(!t||!e)&&(t.size===e.size&&[...t].every((t=>e.has(t))))}isBitSet(t,e){return!!(t&1<<e)}average(t){let e=0;for(let i=0;i<t.length;++i)e+=t[i];return e/t.length}removeTags(t){return t?.replace(this.tagRegexp,"")}image(t){return`${t}?id=${this.images[t]}`}},r={IN_PROGRESS:"IN_PROGRESS",NOT_STARTED:"NOT_STARTED",FINISHED:"FINISHED"},o=class t{constructor(t,e){this.id=t,void 0===r[e]&&console.error(`Unrecognized quest state ${e}`),this.state=e}get name(){return t.questData[this.id].name||"UNKNOWN_QUEST"}get difficulty(){return t.questData[this.id].difficulty}get icon(){const t=this.difficulty;switch(t){case"Novice":return a.image("/icons/3399-0.png");case"Intermediate":return a.image("/icons/3400-0.png");case"Experienced":return a.image("/icons/3402-0.png");case"Master":return a.image("/icons/3403-0.png");case"Grandmaster":case"Special":return a.image("/icons/3404-0.png")}return console.error(`Unknown quest difficulty for icon ${t}`),""}get wikiLink(){return`https://oldschool.runescape.wiki/w/${this.name.replaceAll(" ","_")}/Quick_guide`}get points(){return this.state===r.FINISHED&&t.questData[this.id]?.points||0}static parseQuestData(e){const i={};if(e)for(const[s,n]of Object.entries(e))i[s]=new t(s,n);return i}static async loadQuests(){const i=await fetch("/data/quest_data.json");t.questData=await i.json(),t.freeToPlayQuests={},t.memberQuests={},t.miniQuests={},t.lookupByName=new Map,t.questIds=Object.keys(t.questData).map((t=>parseInt(t))).sort(((t,e)=>t-e));let s=0;for(const[e,i]of Object.entries(t.questData))i.sortName=a.removeArticles(i.name),i.points=parseInt(i.points),s+=i.points,i.miniquest?t.miniQuests[e]=i:!1===i.member?t.freeToPlayQuests[e]=i:t.memberQuests[e]=i,t.lookupByName.set(i.name,e);t.totalPoints=s,e.publish("quest-data-loaded")}static randomQuestStates(){if(!t.questData)return;const e=[],i=Object.keys(r);let s=0;for(const e of Object.keys(t.questData))s=Math.max(parseInt(e),s);for(let t=0;t<s;++t)e.push(Math.floor(Math.random()*i.length));return e}},l=class t{constructor(t,e){this.id="string"==typeof t?parseInt(t):t,this.quantity=e,this.visible=!0}static imageUrl(e,i){const s=t.itemDetails[e];let n=s.id;if(s.stacks)for(const t of s.stacks)i>=t.count&&(n=t.id);return a.image(`/icons/items/${n}.webp`)}static itemName(e){return t.itemDetails[e].name}static shortQuantity(t){return a.formatShortQuantity(t)}static veryShortQuantity(t){return a.formatVeryShortQuantity(t)}get imageUrl(){return t.imageUrl(this.id,this.quantity)}get shortQuantity(){return t.shortQuantity(this.quantity)}get veryShortQuantity(){return t.veryShortQuantity(this.quantity)}get name(){return t.itemDetails[this.id].name}get wikiLink(){return`https://oldschool.runescape.wiki/w/Special:Lookup?type=item&id=${this.id}`}get highAlch(){return t.itemDetails[this.id].highalch}get gePrice(){if(995==this.id)return 1;if(13204==this.id)return 1e3;const e=t.itemDetails[this.id].mapping;return e?e.reduce(((e,i)=>e+new t(i.id,1).gePrice*i.quantity),0):t.gePrices[this.id]||0}isValid(){return this.id>0}isRunePouch(){return 1===this.quantity&&(12791===this.id||27281===this.id)}static parseItemData(e){const i=[];for(let s=0;s<e.length;++s){if(e[s].id<=0){i.push(new t(0,0));continue}if(!t.itemDetails[e[s].id]){console.warn(`Unrecognized item id: ${e[s].id}`);continue}const n=new t(e[s].id,e[s].quantity);i.push(n)}return i}static async loadItems(){const i=await fetch("/data/item_data.json");t.itemDetails=await i.json();for(const[e,i]of Object.entries(t.itemDetails)){const t=i.stacks;i.stacks=t?t.map((t=>({id:t[1],count:t[0]}))):null,i.id=e}e.publish("item-data-loaded")}static async loadGePrices(){const e=await k.getGePrices();t.gePrices=await e.json()}static randomItem(e=null){const i=Object.keys(t.itemDetails),s=i[i.length*Math.random()|0];return[t.itemDetails[s].id,e||Math.round(1e5*Math.random()+1)]}static randomItems(e,i){let s=[];for(let n=0;n<e;++n)s.push(...t.randomItem(i));return s}},c={Agility:"Agility",Attack:"Attack",Construction:"Construction",Cooking:"Cooking",Crafting:"Crafting",Defence:"Defence",Farming:"Farming",Firemaking:"Firemaking",Fishing:"Fishing",Fletching:"Fletching",Herblore:"Herblore",Hitpoints:"Hitpoints",Hunter:"Hunter",Magic:"Magic",Mining:"Mining",Overall:"Overall",Prayer:"Prayer",Ranged:"Ranged",Runecraft:"Runecraft",Slayer:"Slayer",Smithing:"Smithing",Strength:"Strength",Thieving:"Thieving",Woodcutting:"Woodcutting"},h=new Map;function d(t){let e=0;for(let i=1;i<=t;++i)e+=Math.floor(i+300*2**(i/7));return Math.floor(.25*e)}h.set(1,0);for(let t=1;t<=126;++t)h.set(t+1,d(t));var u=class t{constructor(t,e){this.name=c[t],this.xp=e,this.level=this.calculateLevel()}static getIcon(t){switch(t){case c.Attack:return"/ui/197-0.png";case c.Strength:return"/ui/198-0.png";case c.Defence:return"/ui/199-0.png";case c.Ranged:return"/ui/200-0.png";case c.Prayer:return"/ui/201-0.png";case c.Magic:return"/ui/202-0.png";case c.Hitpoints:return"/ui/203-0.png";case c.Agility:return"/ui/204-0.png";case c.Herblore:return"/ui/205-0.png";case c.Thieving:return"/ui/206-0.png";case c.Crafting:return"/ui/207-0.png";case c.Fletching:return"/ui/208-0.png";case c.Mining:return"/ui/209-0.png";case c.Smithing:return"/ui/210-0.png";case c.Fishing:return"/ui/211-0.png";case c.Cooking:return"/ui/212-0.png";case c.Firemaking:return"/ui/213-0.png";case c.Woodcutting:return"/ui/214-0.png";case c.Runecraft:return"/ui/215-0.png";case c.Slayer:return"/ui/216-0.png";case c.Farming:return"/ui/217-0.png";case c.Hunter:return"/ui/220-0.png";case c.Construction:return"/ui/221-0.png"}return""}get icon(){return t.getIcon(this.name)}calculateLevel(){if(this.name===c.Overall)return this.level;for(let t=1;t<=126;++t){const e=h.get(t),i=h.get(t+1);if(this.xp>=e&&this.xp<i)return t}return 1}get levelProgress(){const t=this.level,e=h.get(t),i=h.get(t+1);return(this.xp-e)/(i-e)}get xpUntilNextLevel(){return h.get(this.level+1)-this.xp}static parseSkillData(e){const i={};let s=0;for(const[n,a]of Object.entries(e)){const e=new t(n,a);i[n]=e,n!==c.Overall&&(s+=Math.min(99,e.level))}return i[c.Overall].level=s,i}},p=class t{constructor(t){this.completion=t}static randomDiaries(){return Array.from({length:62},(()=>Math.floor(Math.random()*2**32)))}static async loadDiaries(){const e=await fetch("/data/diary_data.json");t.diaries=await e.json()}static parseDiaryData(e){const i={Ardougne:{},Desert:{},Falador:{},Fremennik:{},Kandarin:{},Karamja:{},"Kourend & Kebos":{},"Lumbridge & Draynor":{},Morytania:{},Varrock:{},"Western Provinces":{},Wilderness:{}};return i.Ardougne.Easy=[a.isBitSet(e[0],0),a.isBitSet(e[0],1),a.isBitSet(e[0],2),a.isBitSet(e[0],4),a.isBitSet(e[0],5),a.isBitSet(e[0],6),a.isBitSet(e[0],7),a.isBitSet(e[0],9),a.isBitSet(e[0],11),a.isBitSet(e[0],12)],i.Ardougne.Medium=[a.isBitSet(e[0],13),a.isBitSet(e[0],14),a.isBitSet(e[0],15),a.isBitSet(e[0],16),a.isBitSet(e[0],17),a.isBitSet(e[0],18),a.isBitSet(e[0],19),a.isBitSet(e[0],20),a.isBitSet(e[0],21),a.isBitSet(e[0],23),a.isBitSet(e[0],24),a.isBitSet(e[0],25)],i.Ardougne.Hard=[a.isBitSet(e[0],26),a.isBitSet(e[0],27),a.isBitSet(e[0],28),a.isBitSet(e[0],29),a.isBitSet(e[0],30),a.isBitSet(e[0],31),a.isBitSet(e[1],0),a.isBitSet(e[1],1),a.isBitSet(e[1],2),a.isBitSet(e[1],3),a.isBitSet(e[1],4),a.isBitSet(e[1],5)],i.Ardougne.Elite=[a.isBitSet(e[1],6),a.isBitSet(e[1],7),a.isBitSet(e[1],9),a.isBitSet(e[1],8),a.isBitSet(e[1],10),a.isBitSet(e[1],11),a.isBitSet(e[1],12),a.isBitSet(e[1],13)],i.Desert.Easy=[a.isBitSet(e[2],1),a.isBitSet(e[2],2),a.isBitSet(e[2],3),a.isBitSet(e[2],4),a.isBitSet(e[2],5),a.isBitSet(e[2],6),a.isBitSet(e[2],7),a.isBitSet(e[2],8),a.isBitSet(e[2],9),a.isBitSet(e[2],10),a.isBitSet(e[2],11)],i.Desert.Medium=[a.isBitSet(e[2],12),a.isBitSet(e[2],13),a.isBitSet(e[2],14),a.isBitSet(e[2],15),a.isBitSet(e[2],16),a.isBitSet(e[2],17),a.isBitSet(e[2],18),a.isBitSet(e[2],19),a.isBitSet(e[2],20),a.isBitSet(e[2],21),a.isBitSet(e[2],22)||a.isBitSet(e[3],9),a.isBitSet(e[2],23)],i.Desert.Hard=[a.isBitSet(e[2],24),a.isBitSet(e[2],25),a.isBitSet(e[2],26),a.isBitSet(e[2],27),a.isBitSet(e[2],28),a.isBitSet(e[2],29),a.isBitSet(e[2],30),a.isBitSet(e[2],31),a.isBitSet(e[3],0),a.isBitSet(e[3],1)],i.Desert.Elite=[a.isBitSet(e[3],2),a.isBitSet(e[3],4),a.isBitSet(e[3],5),a.isBitSet(e[3],6),a.isBitSet(e[3],7),a.isBitSet(e[3],8)],i.Falador.Easy=[a.isBitSet(e[4],0),a.isBitSet(e[4],1),a.isBitSet(e[4],2),a.isBitSet(e[4],3),a.isBitSet(e[4],4),a.isBitSet(e[4],5),a.isBitSet(e[4],6),a.isBitSet(e[4],7),a.isBitSet(e[4],8),a.isBitSet(e[4],9),a.isBitSet(e[4],10)],i.Falador.Medium=[a.isBitSet(e[4],11),a.isBitSet(e[4],12),a.isBitSet(e[4],13),a.isBitSet(e[4],14),a.isBitSet(e[4],15),a.isBitSet(e[4],16),a.isBitSet(e[4],17),a.isBitSet(e[4],18),a.isBitSet(e[4],20),a.isBitSet(e[4],21),a.isBitSet(e[4],22),a.isBitSet(e[4],23),a.isBitSet(e[4],24),a.isBitSet(e[4],25)],i.Falador.Hard=[a.isBitSet(e[4],26),a.isBitSet(e[4],27),a.isBitSet(e[4],28),a.isBitSet(e[4],29),a.isBitSet(e[4],30),a.isBitSet(e[4],31),a.isBitSet(e[5],0),a.isBitSet(e[5],1),a.isBitSet(e[5],2),a.isBitSet(e[5],3),a.isBitSet(e[5],4)],i.Falador.Elite=[a.isBitSet(e[5],5),a.isBitSet(e[5],6),a.isBitSet(e[5],7),a.isBitSet(e[5],8),a.isBitSet(e[5],9),a.isBitSet(e[5],10)],i.Fremennik.Easy=[a.isBitSet(e[6],1),a.isBitSet(e[6],2),a.isBitSet(e[6],3),a.isBitSet(e[6],4),a.isBitSet(e[6],5),a.isBitSet(e[6],6),a.isBitSet(e[6],7),a.isBitSet(e[6],8),a.isBitSet(e[6],9),a.isBitSet(e[6],10)],i.Fremennik.Medium=[a.isBitSet(e[6],11),a.isBitSet(e[6],12),a.isBitSet(e[6],13),a.isBitSet(e[6],14),a.isBitSet(e[6],15),a.isBitSet(e[6],17),a.isBitSet(e[6],18),a.isBitSet(e[6],19),a.isBitSet(e[6],20)],i.Fremennik.Hard=[a.isBitSet(e[6],21),a.isBitSet(e[6],23),a.isBitSet(e[6],24),a.isBitSet(e[6],25),a.isBitSet(e[6],26),a.isBitSet(e[6],27),a.isBitSet(e[6],28),a.isBitSet(e[6],29),a.isBitSet(e[6],30)],i.Fremennik.Elite=[a.isBitSet(e[6],31),a.isBitSet(e[7],0),a.isBitSet(e[7],1),a.isBitSet(e[7],2),a.isBitSet(e[7],3),a.isBitSet(e[7],4)],i.Kandarin.Easy=[a.isBitSet(e[8],1),a.isBitSet(e[8],2),a.isBitSet(e[8],3),a.isBitSet(e[8],4),a.isBitSet(e[8],5),a.isBitSet(e[8],6),a.isBitSet(e[8],7),a.isBitSet(e[8],8),a.isBitSet(e[8],9),a.isBitSet(e[8],10),a.isBitSet(e[8],11)],i.Kandarin.Medium=[a.isBitSet(e[8],12),a.isBitSet(e[8],13),a.isBitSet(e[8],14),a.isBitSet(e[8],15),a.isBitSet(e[8],16),a.isBitSet(e[8],17),a.isBitSet(e[8],18),a.isBitSet(e[8],19),a.isBitSet(e[8],20),a.isBitSet(e[8],21),a.isBitSet(e[8],22),a.isBitSet(e[8],23),a.isBitSet(e[8],24),a.isBitSet(e[8],25)],i.Kandarin.Hard=[a.isBitSet(e[8],26),a.isBitSet(e[8],27),a.isBitSet(e[8],28),a.isBitSet(e[8],29),a.isBitSet(e[8],30),a.isBitSet(e[8],31),a.isBitSet(e[9],0),a.isBitSet(e[9],1),a.isBitSet(e[9],2),a.isBitSet(e[9],3),a.isBitSet(e[9],4)],i.Kandarin.Elite=[a.isBitSet(e[9],5),a.isBitSet(e[9],6),a.isBitSet(e[9],7),a.isBitSet(e[9],8),a.isBitSet(e[9],9),a.isBitSet(e[9],10),a.isBitSet(e[9],11)],i.Karamja.Easy=[5===e[23],1===e[24],1===e[25],1===e[26],1===e[27],1===e[28],1===e[29],5===e[30],1===e[31],1===e[32]],i.Karamja.Medium=[1===e[33],1===e[34],1===e[35],1===e[36],1===e[37],1===e[38],1===e[39],1===e[40],1===e[41],1===e[42],1===e[43],1===e[44],1===e[45],1===e[46],1===e[47],1===e[48],1===e[49],1===e[50],1===e[51]],i.Karamja.Hard=[1===e[52],1===e[53],1===e[54],1===e[55],1===e[56],1===e[57],1===e[58],5===e[59],1===e[60],1===e[61]],i.Karamja.Elite=[a.isBitSet(e[10],1),a.isBitSet(e[10],2),a.isBitSet(e[10],3),a.isBitSet(e[10],4),a.isBitSet(e[10],5)],i["Kourend & Kebos"].Easy=[a.isBitSet(e[11],1),a.isBitSet(e[11],2),a.isBitSet(e[11],3),a.isBitSet(e[11],4),a.isBitSet(e[11],5),a.isBitSet(e[11],6),a.isBitSet(e[11],7),a.isBitSet(e[11],8),a.isBitSet(e[11],9),a.isBitSet(e[11],10),a.isBitSet(e[11],11),a.isBitSet(e[11],12)],i["Kourend & Kebos"].Medium=[a.isBitSet(e[11],25),a.isBitSet(e[11],13),a.isBitSet(e[11],14),a.isBitSet(e[11],15),a.isBitSet(e[11],21),a.isBitSet(e[11],16),a.isBitSet(e[11],17),a.isBitSet(e[11],18),a.isBitSet(e[11],19),a.isBitSet(e[11],22),a.isBitSet(e[11],20),a.isBitSet(e[11],23),a.isBitSet(e[11],24)],i["Kourend & Kebos"].Hard=[a.isBitSet(e[11],26),a.isBitSet(e[11],27),a.isBitSet(e[11],28),a.isBitSet(e[11],29),a.isBitSet(e[11],31),a.isBitSet(e[11],30),a.isBitSet(e[12],0),a.isBitSet(e[12],1),a.isBitSet(e[12],2),a.isBitSet(e[12],3)],i["Kourend & Kebos"].Elite=[a.isBitSet(e[12],4),a.isBitSet(e[12],5),a.isBitSet(e[12],6),a.isBitSet(e[12],7),a.isBitSet(e[12],8),a.isBitSet(e[12],9),a.isBitSet(e[12],10),a.isBitSet(e[12],11)],i["Lumbridge & Draynor"].Easy=[a.isBitSet(e[13],1),a.isBitSet(e[13],2),a.isBitSet(e[13],3),a.isBitSet(e[13],4),a.isBitSet(e[13],5),a.isBitSet(e[13],6),a.isBitSet(e[13],7),a.isBitSet(e[13],8),a.isBitSet(e[13],9),a.isBitSet(e[13],10),a.isBitSet(e[13],11),a.isBitSet(e[13],12)],i["Lumbridge & Draynor"].Medium=[a.isBitSet(e[13],13),a.isBitSet(e[13],14),a.isBitSet(e[13],15),a.isBitSet(e[13],16),a.isBitSet(e[13],17),a.isBitSet(e[13],18),a.isBitSet(e[13],19),a.isBitSet(e[13],20),a.isBitSet(e[13],21),a.isBitSet(e[13],22),a.isBitSet(e[13],23),a.isBitSet(e[13],24)],i["Lumbridge & Draynor"].Hard=[a.isBitSet(e[13],25),a.isBitSet(e[13],26),a.isBitSet(e[13],27),a.isBitSet(e[13],28),a.isBitSet(e[13],29),a.isBitSet(e[13],30),a.isBitSet(e[13],31),a.isBitSet(e[14],0),a.isBitSet(e[14],1),a.isBitSet(e[14],2),a.isBitSet(e[14],3)],i["Lumbridge & Draynor"].Elite=[a.isBitSet(e[14],4),a.isBitSet(e[14],5),a.isBitSet(e[14],6),a.isBitSet(e[14],7),a.isBitSet(e[14],8),a.isBitSet(e[14],9)],i.Morytania.Easy=[a.isBitSet(e[15],1),a.isBitSet(e[15],2),a.isBitSet(e[15],3),a.isBitSet(e[15],4),a.isBitSet(e[15],5),a.isBitSet(e[15],6),a.isBitSet(e[15],7),a.isBitSet(e[15],8),a.isBitSet(e[15],9),a.isBitSet(e[15],10),a.isBitSet(e[15],11)],i.Morytania.Medium=[a.isBitSet(e[15],12),a.isBitSet(e[15],13),a.isBitSet(e[15],14),a.isBitSet(e[15],15),a.isBitSet(e[15],16),a.isBitSet(e[15],17),a.isBitSet(e[15],18),a.isBitSet(e[15],19),a.isBitSet(e[15],20),a.isBitSet(e[15],21),a.isBitSet(e[15],22)],i.Morytania.Hard=[a.isBitSet(e[15],23),a.isBitSet(e[15],24),a.isBitSet(e[15],25),a.isBitSet(e[15],26),a.isBitSet(e[15],27),a.isBitSet(e[15],28),a.isBitSet(e[15],29),a.isBitSet(e[15],30),a.isBitSet(e[16],1),a.isBitSet(e[16],2)],i.Morytania.Elite=[a.isBitSet(e[16],3),a.isBitSet(e[16],4),a.isBitSet(e[16],5),a.isBitSet(e[16],6),a.isBitSet(e[16],7),a.isBitSet(e[16],8)],i.Varrock.Easy=[a.isBitSet(e[17],1),a.isBitSet(e[17],2),a.isBitSet(e[17],3),a.isBitSet(e[17],4),a.isBitSet(e[17],5),a.isBitSet(e[17],6),a.isBitSet(e[17],7),a.isBitSet(e[17],8),a.isBitSet(e[17],9),a.isBitSet(e[17],10),a.isBitSet(e[17],11),a.isBitSet(e[17],12),a.isBitSet(e[17],13),a.isBitSet(e[17],14)],i.Varrock.Medium=[a.isBitSet(e[17],15),a.isBitSet(e[17],16),a.isBitSet(e[17],18),a.isBitSet(e[17],19),a.isBitSet(e[17],20),a.isBitSet(e[17],21),a.isBitSet(e[17],22),a.isBitSet(e[17],23),a.isBitSet(e[17],24),a.isBitSet(e[17],25),a.isBitSet(e[17],26),a.isBitSet(e[17],27),a.isBitSet(e[17],28)],i.Varrock.Hard=[a.isBitSet(e[17],29),a.isBitSet(e[17],30),a.isBitSet(e[17],31),a.isBitSet(e[18],0),a.isBitSet(e[18],1),a.isBitSet(e[18],2),a.isBitSet(e[18],3),a.isBitSet(e[18],4),a.isBitSet(e[18],5),a.isBitSet(e[18],6)],i.Varrock.Elite=[a.isBitSet(e[18],7),a.isBitSet(e[18],8),a.isBitSet(e[18],9),a.isBitSet(e[18],10),a.isBitSet(e[18],11)],i["Western Provinces"].Easy=[a.isBitSet(e[19],1),a.isBitSet(e[19],2),a.isBitSet(e[19],3),a.isBitSet(e[19],4),a.isBitSet(e[19],5),a.isBitSet(e[19],6),a.isBitSet(e[19],7),a.isBitSet(e[19],8),a.isBitSet(e[19],9),a.isBitSet(e[19],10),a.isBitSet(e[19],11)],i["Western Provinces"].Medium=[a.isBitSet(e[19],12),a.isBitSet(e[19],13),a.isBitSet(e[19],14),a.isBitSet(e[19],15),a.isBitSet(e[19],16),a.isBitSet(e[19],17),a.isBitSet(e[19],18),a.isBitSet(e[19],19),a.isBitSet(e[19],20),a.isBitSet(e[19],21),a.isBitSet(e[19],22),a.isBitSet(e[19],23),a.isBitSet(e[19],24)],i["Western Provinces"].Hard=[a.isBitSet(e[19],25),a.isBitSet(e[19],26),a.isBitSet(e[19],27),a.isBitSet(e[19],28),a.isBitSet(e[19],29),a.isBitSet(e[19],30),a.isBitSet(e[19],31),a.isBitSet(e[20],0),a.isBitSet(e[20],1),a.isBitSet(e[20],2),a.isBitSet(e[20],3),a.isBitSet(e[20],4),a.isBitSet(e[20],5)],i["Western Provinces"].Elite=[a.isBitSet(e[20],6),a.isBitSet(e[20],7),a.isBitSet(e[20],8),a.isBitSet(e[20],9),a.isBitSet(e[20],12),a.isBitSet(e[20],13),a.isBitSet(e[20],14)],i.Wilderness.Easy=[a.isBitSet(e[21],1),a.isBitSet(e[21],2),a.isBitSet(e[21],3),a.isBitSet(e[21],4),a.isBitSet(e[21],5),a.isBitSet(e[21],6),a.isBitSet(e[21],7),a.isBitSet(e[21],8),a.isBitSet(e[21],9),a.isBitSet(e[21],10),a.isBitSet(e[21],11),a.isBitSet(e[21],12)],i.Wilderness.Medium=[a.isBitSet(e[21],13),a.isBitSet(e[21],14),a.isBitSet(e[21],15),a.isBitSet(e[21],16),a.isBitSet(e[21],18),a.isBitSet(e[21],19),a.isBitSet(e[21],20),a.isBitSet(e[21],21),a.isBitSet(e[21],22),a.isBitSet(e[21],23),a.isBitSet(e[21],24)],i.Wilderness.Hard=[a.isBitSet(e[21],25),a.isBitSet(e[21],26),a.isBitSet(e[21],27),a.isBitSet(e[21],28),a.isBitSet(e[21],29),a.isBitSet(e[21],30),a.isBitSet(e[21],31),a.isBitSet(e[22],0),a.isBitSet(e[22],1),a.isBitSet(e[22],2)],i.Wilderness.Elite=[a.isBitSet(e[22],3),a.isBitSet(e[22],5),a.isBitSet(e[22],7),a.isBitSet(e[22],8),a.isBitSet(e[22],9),a.isBitSet(e[22],10),a.isBitSet(e[22],11)],new t(i)}},m=["hsl(41, 100%, 40%)","hsl(151, 69%, 26%)","hsl(210, 50%, 40%)","hsl(355, 76%, 36%)","hsl(288, 65%, 19%)"],g=0,b=class{constructor(t){this.name=t,this.itemQuantities={bank:new Map,inventory:new Map,equipment:new Map,runePouch:new Map,seedVault:new Map},this.inactive=!1,this.color=m[g],g=(g+1)%m.length,this.hue=this.color.substring(this.color.indexOf("(")+1,this.color.indexOf(","))}update(t){let i=new Set;if(t.stats&&(this.stats=t.stats,this.publishUpdate("stats"),i.add("stats")),t.last_updated){this.lastUpdated=new Date(t.last_updated);const e=a.timeSinceLastUpdate(t.last_updated);let i=this.inactive;this.inactive=!isNaN(e)&&e>3e5,!i&&this.inactive?this.publishUpdate("inactive"):i&&!this.inactive&&this.publishUpdate("active")}if(t.coordinates&&(this.coordinates=t.coordinates,e.publish("coordinates",this),i.add("coordinates")),t.quests&&(this.quests=o.parseQuestData(t.quests),this.publishUpdate("quests"),i.add("quests")),t.skills){const e=this.skills;this.skills=u.parseSkillData(t.skills),this.publishUpdate("skills"),i.add("skills"),this.computeXpDrops(e),this.computeCombatLevel()}return t.inventory&&(this.inventory=l.parseItemData(t.inventory),this.updateItemQuantitiesIn("inventory"),this.publishUpdate("inventory"),i.add("inventory")),t.equipment&&(this.equipment=l.parseItemData(t.equipment),this.updateItemQuantitiesIn("equipment"),this.publishUpdate("equipment"),i.add("equipment")),t.bank&&(this.bank=l.parseItemData(t.bank),this.updateItemQuantitiesIn("bank"),this.publishUpdate("bank"),i.add("bank")),t.rune_pouch&&(this.runePouch=l.parseItemData(t.rune_pouch),this.updateItemQuantitiesIn("runePouch"),this.publishUpdate("runePouch"),i.add("runePouch")),t.interacting&&(t.interacting.name=a.removeTags(t.interacting.name),this.interacting=t.interacting,this.publishUpdate("interacting")),t.seed_vault&&(this.seedVault=l.parseItemData(t.seed_vault),this.updateItemQuantitiesIn("seedVault"),this.publishUpdate("seedVault"),i.add("seedVault")),t.diary_vars&&(this.diaries=p.parseDiaryData(t.diary_vars),this.publishUpdate("diaries")),i}publishUpdate(t){e.publish(`${t}:${this.name}`,this[t],this)}totalItemQuantity(t){return(this.itemQuantities.bank.get(t)||0)+(this.itemQuantities.equipment.get(t)||0)+(this.itemQuantities.inventory.get(t)||0)+(this.itemQuantities.runePouch.get(t)||0)+(this.itemQuantities.seedVault.get(t)||0)}updateItemQuantitiesIn(t){this.itemQuantities[t]=new Map;for(const e of this.itemsIn(t)){const i=this.itemQuantities[t];i.set(e.id,(i.get(e.id)||0)+e.quantity)}}*allItems(){const t=new Set;for(const e of this.itemsIn("inventory","bank","equipment","runePouch","seedVault"))t.has(e.id)||(t.add(e.id),yield e)}*itemsIn(...t){for(const e of t)if(void 0!==this[e])for(const t of this[e])t.isValid()&&(yield t)}computeXpDrops(t){if(!t){for(const t of Object.values(c))e.publish(`${t}:${this.name}`,this.skills[t]);return}const i=[];for(const s of Object.values(c)){if(!this.skills[s]||!t[s])continue;const n=this.skills[s].xp-t[s].xp;n>0&&"Overall"!==s&&i.push(new u(s,n)),0!==n&&e.publish(`${s}:${this.name}`,this.skills[s])}i.length>0&&e.publish(`xp:${this.name}`,i)}computeCombatLevel(){const t=.325,e=Math.min(this.skills.Defence.level,99),i=Math.min(this.skills.Hitpoints.level,99),s=Math.min(this.skills.Prayer.level,99),n=Math.min(this.skills.Attack.level,99),a=Math.min(this.skills.Strength.level,99),r=Math.min(this.skills.Ranged.level,99),o=Math.min(this.skills.Magic.level,99),l=(e+i+Math.floor(s/2))/4,c=t*(n+a),h=t*(Math.floor(r/2)+r),d=t*(Math.floor(o/2)+o),u=Math.floor(l+Math.max(c,h,d));u!==this.combatLevel&&(this.combatLevel=u,this.publishUpdate("combatLevel"))}hasQuestComplete(t){const e=o.lookupByName.get(t);return this.quests[e].state===r.FINISHED}},y=class t{constructor(){this.members=new Map,this.groupItems={},this.textFilter="",this.textFilters=[""],this.playerFilter="@ALL"}update(t){this.transformFromStorage(t),t.sort(((t,e)=>t.name.localeCompare(e.name)));const i=new Set(this.members.keys());let s=new Set,n=new Date(0);for(const e of t){const t=e.name;i.delete(t),this.members.has(t)||this.members.set(t,new b(t));const a=this.members.get(t);a.update(e).forEach((t=>s.add(t))),a.lastUpdated&&a.lastUpdated>n&&(n=a.lastUpdated)}for(const t of i.values())this.members.delete(t);let r=!1;if(i.size>0)for(const t of Object.values(this.groupItems))for(const e of i.values())t.quantities?.[e]&&(t.quantity-=t.quantities[e],0===t.quantity?delete this.groupItems[t.id]:delete t.quantities[e],r=!0);let o=s.has("inventory")||s.has("bank")||s.has("equipment")||s.has("runePouch")||s.has("seedVault");const c=new Set;if(o){for(const t of this.allItems()){c.add(t.id);const i=this.groupItems[t.id],s=this.itemQuantities(t.id);if(!this.quantitiesEqual(i?.quantities,s)){let i=0;for(const t of Object.values(s))i+=t;let n=this.groupItems[t.id],a=!1;n||(n=new l(t.id,0),a=!0),n.quantity=i,n.quantities=s,this.groupItems[t.id]=n,a&&(n.visible=this.shouldItemBeVisible(n,this.textFilters,this.playerFilter)),e.publish(`item-update:${t.id}`,n),r=!0}}for(const t of Object.values(this.groupItems))c.has(t.id)||(delete this.groupItems[t.id],r=!0)}const[h]=e.getMostRecent("members-updated")||[],d=h?.map((t=>t.name)),u=[...this.members.values()].map((t=>t.name));return!a.setsEqual(new Set(u),new Set(d))&&e.publish("members-updated",[...this.members.values()]),r&&e.publish("items-updated"),new Date(n.getTime()+1)}convertFilterToFilterList(t){if(!t.includes("|"))return[t];const e=t.split("|"),i=[];return e.forEach((t=>{const e=t.trim();0!==e.length&&i.push(e)})),i}isExactItem(t,e){const i=e.replaceAll('"',"");return t.name.toLowerCase()===i||t.id.toString()===i}passesTextFilter(t,e){for(const i of e){if(i.startsWith('"')&&i.endsWith('"')&&this.isExactItem(t,i))return!0;if(0===i.length||t.name.toLowerCase().includes(i)||t.id.toString()===i)return!0}return!1}passesPlayerFilter(t,e){return"@ALL"===e||void 0===t.quantities[e]||t.quantities[e]>0}shouldItemBeVisible(t,e,i){return!(!t||!t.quantities)&&(this.passesTextFilter(t,e)&&this.passesPlayerFilter(t,i))}applyTextFilter(t){this.textFilter=t||"";const e=this.convertFilterToFilterList(t);this.textFilters=e;const i=Object.values(this.groupItems);for(const t of i)t.visible=this.shouldItemBeVisible(t,e,this.playerFilter)}applyPlayerFilter(t){this.playerFilter=t;const e=Object.values(this.groupItems);for(const i of e)i.visible=this.shouldItemBeVisible(i,this.textFilters,t)}itemQuantities(t){let e={};for(const i of this.members.values())e[i.name]=i.totalItemQuantity(t);return e}inventoryQuantityForItem(t,e,i){return this.members.get(e)?.itemQuantities?.[i]?.get(t)||0}quantitiesEqual(t,e){if(!t||!e)return!1;for(const i of this.members.values())if(t[i.name]!==e[i.name])return!1;return!0}*allItems(){const t=new Set;for(const e of this.members.values())for(const i of e.allItems())t.has(i.id)||(t.add(i.id),yield i)}static transformItemsFromStorage(t){if(null==t)return;let e=[];for(let i=0;i<t.length;i+=2)e.push({id:t[i],quantity:t[i+1]});return e}static transformSkillsFromStorage(t){if(null==t)return;let e={},i=0,s=0;const n=23!==t.length;for(const a of Object.keys(c))(a!==c.Overall||n)&&(e[a]=t[i],a!==c.Overall&&(s+=t[i]),i+=1);return e[c.Overall]=s,e}static transformStatsFromStorage(t){if(null!=t)return{hitpoints:{current:t[0],max:t[1]},prayer:{current:t[2],max:t[3]},energy:{current:t[4],max:1e4},world:t[6]}}static transformCoordinatesFromStorage(t){if(null==t)return;return{x:t[0]+128,y:t[1]+1,plane:t[2]}}static transformQuestsFromStorage(t){if(null==t)return;const e={},i=Object.keys(r),s=o.questIds;for(let n=0;n<t.length;++n){const a=t[n];e[s[n]]=i[a]}return e}transformFromStorage(e){for(const i of e)i.inventory=t.transformItemsFromStorage(i.inventory),i.bank=t.transformItemsFromStorage(i.bank),i.equipment=t.transformItemsFromStorage(i.equipment),i.rune_pouch=t.transformItemsFromStorage(i.rune_pouch),i.seed_vault=t.transformItemsFromStorage(i.seed_vault),i.skills=t.transformSkillsFromStorage(i.skills),i.stats=t.transformStatsFromStorage(i.stats),i.coordinates=t.transformCoordinatesFromStorage(i.coordinates),i.quests=t.transformQuestsFromStorage(i.quests),i.interacting&&(i.interacting.location=t.transformCoordinatesFromStorage([i.interacting.location.x,i.interacting.location.y,i.interacting.location.plane]))}},v=new y,S=class t extends s{constructor(){super()}html(){return`<div class="skill-graph__top">\n  <img class="skill-graph__skill-image" loading="lazy" src="${u.getIcon(this.skillName)}" />\n  <div class="skill-graph__container rsborder-tiny">\n    <canvas></canvas>\n  </div>\n</div>\n\n<div class="skill-graph__table-container"></div>\n`}connectedCallback(){super.connectedCallback(),this.period=this.getAttribute("data-period"),this.skillName=this.getAttribute("skill-name"),this.render(),this.tableContainer=this.querySelector(".skill-graph__table-container"),this.ctx=this.querySelector("canvas").getContext("2d"),this.subscribeOnce("get-group-data",this.create.bind(this))}disconnectedCallback(){super.disconnectedCallback(),this.chart&&this.chart.destroy()}create(e){if(!this.isConnected)return;this.currentGroupData=e,this.dates=t.datesForPeriod(this.period);const i=this.dataSets(this.skillName);this.createChart(i),this.createTable(i)}tableDataForDataSet(t){let e=t.data[t.data.length-1];return isNaN(e)&&(e=0),{xpGain:e,color:t.backgroundColor}}createTable(t){const e={[this.skillName]:t},i=Object.values(c).filter((t=>t!==c.Overall)).sort(((t,e)=>t.localeCompare(e)));if(this.skillName===c.Overall)for(const t of i)e[t]=this.dataSets(t);const s={};for(const[t,i]of Object.entries(e)){let e=0;for(const n of i)s[n.label]||(s[n.label]={}),s[n.label][t]=this.tableDataForDataSet(n),e+=s[n.label][t].xpGain;for(const n of i)s[n.label][t].totalXpGain=e}const n=(t,e,i,s)=>{const n=Math.round(i.xpGain/s*100),a=u.getIcon(e).length?`<img src="${u.getIcon(e)}" />`:"";return`\n<tr class="${t}" style="background: linear-gradient(90deg, ${i.color} ${n}%, transparent ${n}%)">\n  <td>${a}${e}</td>\n  <td class="skill-graph__xp-change-data">${i.xpGain>0?"+":""}${i.xpGain.toLocaleString()}</td>\n</tr>\n`};let a=[];for(const[t,e]of Object.entries(s)){const s=e[this.skillName].totalXpGain;if(a.push(n("",t,e[this.skillName],s)),this.skillName===c.Overall){const t=[...i].sort(((t,i)=>e[i].xpGain-e[t].xpGain));for(const i of t){const t=e[i];t.xpGain>0&&a.push(n("skill-graph__overall-skill-change",i,t,e[this.skillName].xpGain))}}}this.tableContainer.innerHTML=`\n<table>\n  ${a.join("")}\n</table>\n`}createChart(t){this.chart&&this.chart.destroy();let e=Number.MAX_SAFE_INTEGER,i=0;for(let s=0;s<t.length;++s)e=Math.min(e,t[s].data[0]),i=Math.max(i,t[s].data[t[s].data.length-1]);const s={x:{grid:{drawTicks:!1}},y:{type:"linear",min:e,max:i+1,title:{display:!0,text:"XP Gain"}}};this.chart=new Chart(this.ctx,{type:"line",options:{maintainAspectRatio:!1,animation:!1,normalized:!0,layout:{padding:0},plugins:{tooltip:{callbacks:{label:t=>{const e=t.dataset.changeData[t.dataIndex],i=`${e>0?"+":""}${e.toLocaleString()}`,s=t.dataset.totalXpData[t.dataIndex]||0;return`${t.dataset.label}: ${s.toLocaleString()} (${i})`}}},title:{display:!0,text:`${this.skillName} - ${this.period}`}},interaction:{intersect:!1,mode:"index"},scales:s},data:{labels:this.labelsForPeriod(this.period,this.dates),datasets:t}})}dataSets(t){let e=[];for(let i=0;i<this.skillDataForGroup.length;++i){const s=this.skillDataForGroup[i],[n,a,r]=this.dataForPlayer(s,this.dates,t),o=this.currentGroupData.members.get(s.name).color;e.push({type:"line",label:s.name,data:r,borderColor:o,backgroundColor:o,pointBorderWidth:0,pointHoverBorderWidth:0,pointHoverRadius:3,pointRadius:0,borderWidth:2,changeData:a,totalXpData:n})}return e}dataForPlayer(t,e,i){const s=this.currentGroupData.members.get(t.name).skills,n=this.generateCompleteTimeSeries(t.skill_data,s,i),a=[0],r=[0];let o=0;for(let t=1;t<n.length;++t){const e=n[t-1],i=n[t];void 0===e||void 0===i?(a.push(0),r.push(o)):(a.push(i-e),o+=i-e,r.push(o))}return[n,a,r]}generateCompleteTimeSeries(e,i,s){const n=new Map,a=t.truncatedDateForPeriod(this.dates[0],this.period),r=[];for(const i of e){const e=t.truncatedDateForPeriod(i.time,this.period);n.set(e.getTime(),i.data),e<a&&r.push(i)}let o=r.length?r[0].data[s]:void 0;const l=[];for(let t=0;t<this.dates.length;++t){const e=this.dates[t].getTime();if(n.has(e)){let t=n.get(e)[s];l.push(t),o=t}else l.push(o)}return l[l.length-1]=i[s].xp,l}labelsForPeriod(t,e){return"Day"===t?e.map((t=>t.toLocaleTimeString([],{hour:"numeric"}))):"Week"===t||"Month"===t?e.map((t=>t.toLocaleDateString([],{timeZone:"UTC",day:"numeric",month:"short"}))):"Year"===t?e.map((t=>t.toLocaleDateString([],{timeZone:"UTC",year:"numeric",month:"short"}))):void 0}static datesForPeriod(e){const i={Day:36e5,Week:864e5,Month:864e5,Year:26298e5}[e],s={Day:24,Week:7,Month:30,Year:12}[e],n=new Date,a=[];for(let r=s-1;r>=0;--r){const s=new Date(n.getTime()-r*i);a.push(t.truncatedDateForPeriod(s,e))}return a}static truncatedDateForPeriod(t,e){const i=new Date(t);return i.setMinutes(0,0,0),"Day"!==e&&i.setHours(0),"Year"===e&&i.setMonth(i.getMonth(),1),i}};customElements.define("skill-graph",S);var f=new class{enable(){this.disable(),this.reset(),this.intervals=[a.callOnInterval(this.doHealthUpdate.bind(this),3e3),a.callOnInterval(this.doXpDrop.bind(this),2e3),a.callOnInterval((()=>{let t=this.members.Zezima.coordinates[2];t+=1,t>3&&(t=0),this.members.Zezima.coordinates=[this.members.Zezima.coordinates[0]+1,this.members.Zezima.coordinates[1],t]}),1e3)]}disable(){if(this.intervals){for(const t of this.intervals)clearInterval(t);this.intervals=[]}}reset(){this.members={Zezima:{quests:o.randomQuestStates(),bank:[995,Math.floor(25e6*Math.random())],stats:[99,99,99,99,100,100,330],skills:Object.values(c).map((()=>Math.floor(14e6*Math.random()))),equipment:l.randomItems(14,1),inventory:l.randomItems(28),coordinates:[3029,3e3,0],last_updated:"2022-01-23T01:34:06.104Z",diary_vars:p.randomDiaries()},"group alt two":{rune_pouch:[563,1922,561,5,554,15194],quests:o.randomQuestStates(),coordinates:[3029,3e3,0],stats:[55,93,13,70,75,100,330],skills:Object.values(c).map((()=>Math.floor(14e6*Math.random()))),bank:[995,Math.floor(5e6*Math.random())],diary_vars:p.randomDiaries(),inventory:[26382,1,26384,1,26386,1,12791,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6685,1,6685,1,6685,1,6685,1,6685,1,6685,1,6685,1,6685,1,6685,1,995,Math.floor(5e6*Math.random())],equipment:[26382,1,0,0,0,0,0,0,26384,1,0,0,0,0,26386,1,0,0,0,0,0,0,0,0,0,0,0,0]},"Bank alt":{bank:[995,Math.floor(5e6*Math.random()),...l.randomItems(500)],skills:Object.values(c).map((()=>Math.floor(14e6*Math.random()))),stats:[7,10,10,10,100,100,309],equipment:l.randomItems(14,1),coordinates:[3103,3025,0],quests:o.randomQuestStates(),diary_vars:p.randomDiaries(),interacting:{last_updated:"2050-01-01T00:00:00.000Z",name:"Goblin",ratio:25,scale:30,location:{x:3104,y:3025,plane:0}}},"@SHARED":{bank:[995,1e6]}}}getGroupData(){const t=Object.entries(this.members).map((([t,e])=>({name:t,...e})));return this.members={"group alt two":{skills:this.members["group alt two"].skills},Zezima:{coordinates:this.members.Zezima.coordinates},"Bank alt":{},"@SHARED":{}},t}doXpDrop(){this.members["group alt two"].skills[0]+=50}doHealthUpdate(){this.members["group alt two"].stats=[Math.floor(Math.max(1,93*Math.random())),93,13,70,75,100,330]}getSkillData(t,e){const i=S.datesForPeriod(t),s=[],n=Object.values(c);n.sort(((t,e)=>t.localeCompare(e)));for(const t of e.members.values()){if(!t.skills)continue;const e=[];let a=n.map((e=>t.skills[e].xp));for(const t of i)e.push({time:t.toISOString(),data:a}),a=a.map((t=>Math.random()>.9?Math.round(t+1e4*Math.random()):t));const r=y.transformSkillsFromStorage(a);for(const[e,i]of Object.entries(r))t.skills[e].xp=i;this.members[t.name].skills&&(this.members[t.name].skills=a),s.push({name:t.name,skill_data:e})}return s}getCollectionLog(){return{}}},k=new class{constructor(){this.baseUrl="/api",this.createGroupUrl=`${this.baseUrl}/create-group`,this.exampleDataEnabled=!1,this.enabled=!1}get getGroupDataUrl(){return`${this.baseUrl}/group/${this.groupName}/get-group-data`}get addMemberUrl(){return`${this.baseUrl}/group/${this.groupName}/add-group-member`}get deleteMemberUrl(){return`${this.baseUrl}/group/${this.groupName}/delete-group-member`}get renameMemberUrl(){return`${this.baseUrl}/group/${this.groupName}/rename-group-member`}get amILoggedInUrl(){return`${this.baseUrl}/group/${this.groupName}/am-i-logged-in`}get gePricesUrl(){return`${this.baseUrl}/ge-prices`}get skillDataUrl(){return`${this.baseUrl}/group/${this.groupName}/get-skill-data`}get captchaEnabledUrl(){return`${this.baseUrl}/captcha-enabled`}get collectionLogInfoUrl(){return`${this.baseUrl}/collection-log-info`}collectionLogDataUrl(){return`${this.baseUrl}/group/${this.groupName}/collection-log`}setCredentials(t,e){this.groupName=t,this.groupToken=e}async restart(){const t=this.groupName,e=this.groupToken;await this.enable(t,e)}async enable(t,i){await this.disable(),this.nextCheck=new Date(0).toISOString(),this.setCredentials(t,i),this.enabled||(this.enabled=!0,this.getGroupInterval=e.waitForAllEvents("item-data-loaded","quest-data-loaded").then((()=>a.callOnInterval(this.getGroupData.bind(this),1e3)))),await this.getGroupInterval}async disable(){this.enabled=!1,this.groupName=void 0,this.groupToken=void 0,v.members=new Map,v.groupItems={},v.filters=[""],this.getGroupInterval&&window.clearInterval(await this.getGroupInterval)}async getGroupData(){const t=this.nextCheck;if(this.exampleDataEnabled){const t=f.getGroupData();v.update(t),e.publish("get-group-data",v)}else{const i=await fetch(`${this.getGroupDataUrl}?from_time=${t}`,{headers:{Authorization:this.groupToken}});if(!i.ok)return void(401===i.status&&(await this.disable(),window.history.pushState("","","/login"),e.publish("get-group-data")));const s=await i.json();this.nextCheck=v.update(s).toISOString(),e.publish("get-group-data",v)}}async createGroup(t,e,i){return await fetch(this.createGroupUrl,{body:JSON.stringify({name:t,member_names:e,captcha_response:i}),headers:{"Content-Type":"application/json"},method:"POST"})}async addMember(t){return await fetch(this.addMemberUrl,{body:JSON.stringify({name:t}),headers:{"Content-Type":"application/json",Authorization:this.groupToken},method:"POST"})}async removeMember(t){return await fetch(this.deleteMemberUrl,{body:JSON.stringify({name:t}),headers:{"Content-Type":"application/json",Authorization:this.groupToken},method:"DELETE"})}async renameMember(t,e){return await fetch(this.renameMemberUrl,{body:JSON.stringify({original_name:t,new_name:e}),headers:{"Content-Type":"application/json",Authorization:this.groupToken},method:"PUT"})}async amILoggedIn(){return await fetch(this.amILoggedInUrl,{headers:{Authorization:this.groupToken}})}async getGePrices(){return await fetch(this.gePricesUrl)}async getSkillData(t){if(this.exampleDataEnabled){return f.getSkillData(t,v)}return(await fetch(`${this.skillDataUrl}?period=${t}`,{headers:{Authorization:this.groupToken}})).json()}async getCaptchaEnabled(){return!1}async getCollectionLogInfo(){return(await fetch(this.collectionLogInfoUrl)).json()}async getCollectionLog(){if(this.exampleDataEnabled){return f.getCollectionLog()}return(await fetch(this.collectionLogDataUrl(),{headers:{Authorization:this.groupToken}})).json()}};customElements.define("search-element",class extends s{constructor(){super()}connectedCallback(){super.connectedCallback(),this.render(),this.searchInput=this.querySelector(".search-element__input"),this.hasAttribute("auto-focus")&&this.eventListener(document.body,"keydown",this.focusSearch.bind(this))}html(){return`<input class="search-element__input" placeholder="${this.getAttribute("placeholder")}" type="text" tabindex="0" />\n`}focusSearch(t){"Tab"!==t.key&&document.activeElement!==this.searchInput&&"input"!==document.activeElement.tagName.toLowerCase()&&this.searchInput.focus()}get value(){return this.searchInput.value||""}});function _(t,e,i,s,n){B(t,e,i||0,s||t.length-1,n||w)}function B(t,e,i,s,n){for(;s>i;){if(s-i>600){var a=s-i+1,r=e-i+1,o=Math.log(a),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(a-l)/a)*(r-a/2<0?-1:1);B(t,e,Math.max(i,Math.floor(e-r*l/a+c)),Math.min(s,Math.floor(e+(a-r)*l/a+c)),n)}var h=t[e],d=i,u=s;for(C(t,i,e),n(t[s],h)>0&&C(t,i,s);d<u;){for(C(t,d,u),d++,u--;n(t[d],h)<0;)d++;for(;n(t[u],h)>0;)u--}0===n(t[i],h)?C(t,i,u):C(t,++u,s),u<=e&&(i=u+1),e<=u&&(s=u-1)}}function C(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function w(t,e){return t<e?-1:t>e?1:0}customElements.define("inventory-item",class extends s{constructor(){super()}connectedCallback(){super.connectedCallback();const t=this.getAttribute("item-id");this.showIndividualItemPrices=this.hasAttribute("individual-prices"),this.playerFilter=this.getAttribute("player-filter");this.offsetTop<document.body.clientHeight?this.subscribe(`item-update:${t}`,this.handleUpdatedItem.bind(this)):(this.intersectionObserver=new IntersectionObserver((e=>{for(const i of e)if(i.isIntersecting&&i.target===this)return this.intersectionObserver.disconnect(),void this.subscribe(`item-update:${t}`,this.handleUpdatedItem.bind(this))}),{}),this.intersectionObserver.observe(this))}disconnectedCallback(){super.disconnectedCallback(),this.intersectionObserver&&this.intersectionObserver.disconnect()}html(){const t=this.item;let e="";this.quantity;if(this.playerFilter)e=this.playerHtml(this.playerFilter);else for(const[i,s]of Object.entries(t.quantities))0!==s&&(e+=this.playerHtml(i));return`<div class="inventory-item__top rsborder-tiny">\n  <div class="inventory-item__top-right">\n    <div class="inventory-item__name"><a class="rstext" href="${t.wikiLink}" target="_blank">${t.name}</a></div>\n    <div class="inventory-item__details">\n      <span>Quantity</span>\n      <span>${this.quantity.toLocaleString()}</span>\n      <span>High Alch</span>\n      <span>${this.highAlch}</span>\n      <span>GE Price</span>\n      <span>${this.gePrice}</span>\n    </div>\n  </div>\n\n  <div class="inventory-item__picture-container">\n    <img class="inventory-item__picture" src="${t.imageUrl}" width="63" height="56"/>\n  </div>\n</div>\n<div class="inventory-item__bottom">${e}</div>\n`}playerHtml(t){const e=this.item.quantities[t],i=this.quantity,s=Math.round(e/i*100);return`\n<span class="${0===e?"inventory-item__no-quantity":""}">${t}</span>\n<span>${e.toLocaleString()}</span>\n<div class="inventory-item__quantity-bar"\n     style="transform: scaleX(${s}%); background: hsl(${s}, 100%, 40%);">\n</div>\n`}handleUpdatedItem(t){this.item=t,this.render(),this.classList.add("rendered")}get quantity(){return this.playerFilter?this.item.quantities[this.playerFilter]:this.item.quantity}get highAlch(){const t=this.item.highAlch;return 0===t?"N/A":this.showIndividualItemPrices?t.toLocaleString()+"gp":(this.quantity*t).toLocaleString()+"gp"}get gePrice(){const t=this.item.gePrice;return 0===t?"N/A":this.showIndividualItemPrices?t.toLocaleString()+"gp":(this.quantity*t).toLocaleString()+"gp"}});customElements.define("inventory-pager",class extends s{constructor(){super(),this.pageLimit=200,this.currentPage=1,this.numberOfItems=0,this.compare=this.compareOnQuantity.bind(this)}connectedCallback(){super.connectedCallback(),this.pageTarget=document.querySelector(".items-page__list"),this.sortTarget=document.querySelector(".items-page__sort"),this.itemCount=document.querySelector(".items-page__item-count"),this.totalGeValue=document.querySelector(".items-page__total-ge-price"),this.totalHaValue=document.querySelector(".items-page__total-ha-price"),this.searchElement=document.querySelector(".items-page__search"),this.showIndividualPricesInput=document.querySelector("#items-page__individual-items"),this.showIndividualPrices=this.showIndividualPricesInput.checked,this.playerFilter=document.querySelector(".items-page__player-filter"),this.eventListener(this.searchElement,"input",this.handleSearch.bind(this)),this.eventListener(this.sortTarget,"change",this.handleSortChange.bind(this)),this.eventListener(this,"click",this.handleClick.bind(this)),this.eventListener(this.showIndividualPricesInput,"change",this.handleIndividualPricesChange.bind(this)),this.eventListener(this.playerFilter,"change",this.handlePlayerFilterChange.bind(this)),this.subscribe("items-updated",this.handleUpdatedItems.bind(this)),this.searchElement.searchInput.value=v.textFilter}html(){let t="";const e=this.numberOfPages;for(let i=0;i<e;++i){t+=`<button class="${i===this.currentPage-1?"active":""} inventory-pager__button men-button">${i+1}</button>`}return`<div class="inventory-pager__label">Page:</div>\n<div class="inventory-pager__buttons">${t}</div>\n`}render(){super.render(),void 0!==this.numberOfItems&&(this.itemCount.innerHTML=this.numberOfItems.toLocaleString())}handlePlayerFilterChange(){const t=this.playerFilter.value;v.applyPlayerFilter(t),this.maybeRenderPage(this.currentPage,!0),this.render()}handleIndividualPricesChange(){this.showIndividualPrices=this.showIndividualPricesInput.checked,this.maybeRenderPage(this.currentPage,!0),this.render()}handleSearch(){const t=this.searchElement.value.trim().toLowerCase();v.applyTextFilter(t),this.maybeRenderPage(this.currentPage),this.render()}handleSortChange(){const t=this.sortTarget.value;"totalquantity"===t?this.compare=this.compareOnQuantity.bind(this):"highalch"===t?this.compare=this.compareOnHighAlch.bind(this):"geprice"===t?this.compare=this.compareOnGePrice.bind(this):"alphabetical"===t&&(this.compare=this.compareAlphabetical.bind(this)),this.maybeRenderPage(this.currentPage),this.render()}handleClick(t){const e=t.target;if(e.classList.contains("inventory-pager__button")){const t=parseInt(e.innerText);this.currentPage=t,this.maybeRenderPage(t),this.render()}}compareOnQuantity(t,e){return this.itemQuantity(e)-this.itemQuantity(t)}compareOnHighAlch(t,e){return this.showIndividualPrices?e.highAlch-t.highAlch:this.itemQuantity(e)*e.highAlch-this.itemQuantity(t)*t.highAlch}compareOnGePrice(t,e){return this.showIndividualPrices?e.gePrice-t.gePrice:this.itemQuantity(e)*e.gePrice-this.itemQuantity(t)*t.gePrice}compareAlphabetical(t,e){return t.name.localeCompare(e.name)}handleUpdatedItems(){const t=this.numberOfItems;this.maybeRenderPage(this.currentPage),this.numberOfItems!==t&&this.render()}maybeRenderPage(t,e=!1){const i=this.pageItems,s=Object.values(v.groupItems).filter((t=>t.visible));this.numberOfPages=Math.floor(s.length/this.pageLimit),this.numberOfItems=s.length,s.length-this.pageLimit*this.numberOfPages>0&&this.numberOfPages++,this.currentPage>this.numberOfPages&&(this.currentPage=1);const n=this.getPage(this.currentPage,s);(e||this.pageUpdated(i,n))&&(this.pageItems=n,this.renderPage(n)),this.updateItemValues()}pageUpdated(t,e){if(void 0===t)return!0;if(t.length!==e.length)return!0;for(let i=0;i<e.length;++i)if(e[i].id!==t[i].id)return!0;return!1}getPage(t,e){const i=this.compare;for(let s=0;s<t&&!(e.length<=this.pageLimit);++s)_(e,this.pageLimit,0,e.length-1,i),s!==t-1&&(e=e.slice(this.pageLimit,e.length));return(e=e.slice(0,this.pageLimit)).sort(i),e}renderPage(t){let e="";for(const i of t)e+=`\n<inventory-item item-id="${i.id}"\n                class="rsborder rsbackground"\n                ${this.showIndividualPrices?"individual-prices":""}\n                ${"@ALL"!==v.playerFilter?`player-filter="${v.playerFilter}"`:""}>\n</inventory-item>\n`;this.pageTarget.innerHTML=e}updateItemValues(){let t=0,e=0;for(const i of Object.values(v.groupItems))if(i.visible){const s=this.itemQuantity(i);t+=i.gePrice*s,e+=i.highAlch*s}this.totalGeValue.innerHTML=t.toLocaleString(),this.totalHaValue.innerHTML=e.toLocaleString()}itemQuantity(t){return"@ALL"!==v.playerFilter?t.quantities[v.playerFilter]:t.quantity}});customElements.define("app-navigation",class extends s{constructor(){super()}html(){return`<h4 class="app-navigation__group-name">${n.getGroup().groupName}</h4>\n<nav class="app-navigation__nav">\n  <men-link link-href="/group/items">\n    <button class="men-button" type="button" route-component="items-page">\n      <span class="desktop">Items</span>\n      <span class="mobile"><img loading="lazy" src="/ui/777-0.png" /></span>\n    </button>\n  </men-link>\n  <men-link link-href="/group/map">\n    <button class="men-button" type="button" route-component="map-page">\n      <span class="desktop">Map</span>\n      <span class="mobile"><img loading="lazy" src="/ui/1698-0.png" /></span>\n    </button>\n  </men-link>\n  <men-link link-href="/group/graphs">\n    <button class="men-button" type="button" route-component="skills-graphs">\n      <span class="desktop">Graphs</span>\n      <span class="mobile"><img loading="lazy" src="/ui/3579-0.png" /></span>\n    </button>\n  </men-link>\n  <men-link link-href="/group/panels">\n    <button class="men-button" type="button" route-component="panels-page">\n      <span class="desktop">Panels</span>\n      <span class="mobile"><img loading="lazy" src="/ui/1707-0.png" /></span>\n    </button>\n  </men-link>\n  <men-link link-href="/group/settings">\n    <button class="men-button" type="button" route-component="group-settings">\n      <span class="desktop">Settings</span>\n      <span class="mobile"><img loading="lazy" src="/ui/785-0.png" /></span>\n    </button>\n  </men-link>\n\n  <div class="app-navigation__separator desktop"></div>\n  <men-link link-href="/setup-instructions">\n    <button class="men-button" type="button">\n      <span class="desktop">Setup</span>\n      <span class="mobile"><img loading="lazy" src="/ui/1094-0.png" /></span>\n    </button>\n  </men-link>\n  <men-link link-href="/logout">\n    <button class="men-button" type="button">\n      <span class="desktop">Logout</span>\n      <span class="mobile"><img loading="lazy" src="/ui/225-0.png" /></span>\n    </button>\n  </men-link>\n</nav>\n`}connectedCallback(){super.connectedCallback(),this.render(),this.subscribe("route-activated",this.handleRouteActivated.bind(this))}handleRouteActivated(t){const e=t.getAttribute("route-component"),i=Array.from(this.querySelectorAll("button"));for(const t of i){e===t.getAttribute("route-component")?t.classList.add("active"):t.classList.remove("active")}}});customElements.define("items-page",class extends s{constructor(){super()}html(){return'<div class="items-page__head">\n  <search-element class="items-page__search" placeholder="Search" auto-focus></search-element>\n  <inventory-pager></inventory-pager>\n</div>\n<div class="items-page__utility">\n  <div class="men-control-container rsborder-tiny rsbackground rsbackground-hover">\n    <select class="items-page__sort">\n      <option value="totalquantity">Sort: Total Quantity</option>\n      <option value="highalch">Sort: High Alch</option>\n      <option value="geprice">Sort: GE Price</option>\n      <option value="alphabetical">Sort: Alphabetical</option>\n    </select>\n  </div>\n  <div class="men-control-container rsborder-tiny rsbackground rsbackground-hover">\n    <select class="items-page__player-filter"></select>\n  </div>\n  <div class="men-control-container rsborder-tiny rsbackground rsbackground-hover">\n    <input type="checkbox" id="items-page__individual-items" />\n    <label for="items-page__individual-items">Individual item price</label>\n  </div>\n  <span class="men-control-container rsborder-tiny rsbackground rsbackground-hover">\n    <span class="items-page__item-count">0</span>&nbsp;<span>items</span>\n  </span>\n  <span class="men-control-container rsborder-tiny rsbackground rsbackground-hover">\n    HA:&nbsp;<span class="items-page__total-ha-price">0</span><span>gp</span>\n  </span>\n  <span class="men-control-container rsborder-tiny rsbackground rsbackground-hover">\n    GE:&nbsp;<span class="items-page__total-ge-price">0</span><span>gp</span>\n  </span>\n</div>\n<section class="items-page__list"></section>\n'}connectedCallback(){super.connectedCallback(),this.render(),this.subscribe("members-updated",this.handleUpdatedMembers.bind(this))}handleUpdatedMembers(t){const e=this.querySelector(".items-page__player-filter"),i=e.value;let s='<option value="@ALL">All Players</option>';for(const e of t)s+=`<option value="${e.name}" ${e.name===i?"selected":""}>${e.name}</option>`;e.innerHTML=s,e.value!==i&&e.dispatchEvent(new CustomEvent("change"))}});var x=new class{constructor(){this.registeredRoutes=new Map,this.routeAliases=new Map,this.activeRoute=null,window.addEventListener("locationchange",this.handleLocationChange.bind(this))}register(t,e){this.registeredRoutes.set(t,e);this.didMatch(this.location,t)&&this.activateRoute(e)}aliasRoute(t,e){if(this.routeAliases.has(t)||this.routeAliases.set(t,new Set),this.routeAliases.get(t).add(e),this.registeredRoutes.has(t)){this.didMatch(this.location,t)&&this.activateRoute(this.registeredRoutes.get(t))}}unregister(t){this.registeredRoute.delete(t)}get location(){const t=window.location.pathname;return t.endsWith("/")?t.slice(0,-1):t}didMatch(t,e){return"*"===e&&!this.activeRoute||e===t||this.routeAliases.get(e)?.has(t)}activateRoute(t){this.activeRoute!==t&&(this.activeRoute=t,e.publish("route-activated",t),t.enable())}handleLocationChange(){const t=this.location;let e=null;for(const i of this.registeredRoutes.keys()){this.didMatch(t,i)?e=this.registeredRoutes.get(i):this.registeredRoutes.get(i).disable()}for(const t of this.registeredRoutes.values())null!==e&&t.wrapper===e.wrapper||!t.wrapper||t.wrapper.disable();e?this.activateRoute(e):(this.activeRoute=null,window.history.pushState("","","/"))}};history.pushState=(t=>function(...e){const i=t.apply(this,e);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),i})(history.pushState),history.replaceState=(t=>function(...e){const i=t.apply(this,e);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),i})(history.replaceState),window.addEventListener("popstate",(()=>{window.dispatchEvent(new Event("locationchange"))}));customElements.define("app-route",class extends s{constructor(){super()}html(){return""}connectedCallback(){super.connectedCallback(),this.hasAttribute("route-wrapper")&&(this.wrapper=document.querySelector(this.getAttribute("route-wrapper")));let t=this.getAttribute("route-path");this.path=this.buildPath(t),this.aliasFor=this.getAttribute("alias-for"),this.active=!1,this.aliasFor?x.aliasRoute(this.buildPath(this.aliasFor),this.path):(this.outletSelector=this.getAttribute("route-outlet"),x.register(this.path,this))}disconnectedCallback(){super.disconnectedCallback(),x.unregister(this.path)}get outlet(){return document.querySelector(this.outletSelector)}enable(){const t=this.getAttribute("route-redirect");if(t)window.history.pushState("","",t);else if(!this.active){if(this.active=!0,this.wrapper&&this.wrapper.enable(),void 0===this.page){const t=this.getAttribute("route-component");this.page=document.createElement(t)}this.outlet.appendChild(this.page)}}disable(){this.active&&(this.active=!1,this.page&&(this.outlet.removeChild(this.page),this.page.innerHTML=""))}buildPath(t){"/"===t.trim()&&(t="");let e="";return this.wrapper&&(e=this.wrapper.getAttribute("route-path")),`${e}${t}`}});customElements.define("map-page",class extends s{constructor(){super()}html(){return'<div class="map-page__container">\n  <div class="map-page__focus-player-buttons"></div>\n  <div class="men-control-container rsborder-tiny rsbackground rsbackground-hover">\n    <select class="map-page__plane-select">\n      <option value="1">Plane: 1</option>\n      <option value="2">Plane: 2</option>\n      <option value="3">Plane: 3</option>\n      <option value="4">Plane: 4</option>\n    </select>\n  </div>\n</div>\n'}connectedCallback(){super.connectedCallback(),this.render(),this.worldMap=document.querySelector("#background-worldmap"),document.querySelector(".authed-section").classList.add("no-pointer-events"),this.worldMap.classList.add("interactable"),this.playerButtons=this.querySelector(".map-page__focus-player-buttons"),this.planeSelect=this.querySelector(".map-page__plane-select"),this.planeSelect.value=this.worldMap.plane||1,this.subscribe("members-updated",this.handleUpdatedMembers.bind(this)),this.eventListener(this.playerButtons,"click",this.handleFocusPlayer.bind(this)),this.eventListener(this.planeSelect,"change",this.handlePlaneSelect.bind(this)),this.eventListener(this.worldMap,"plane-changed",this.handlePlaneChange.bind(this))}disconnectedCallback(){super.disconnectedCallback(),this.worldMap.classList.remove("interactable"),document.querySelector(".authed-section").classList.remove("no-pointer-events")}getSelectedPlane(){return parseInt(this.planeSelect.value,10)}handlePlaneChange(t){const e=t.detail.plane;this.getSelectedPlane()!==e&&(this.planeSelect.value=e)}handlePlaneSelect(){this.worldMap.stopFollowingPlayer(),this.worldMap.showPlane(this.getSelectedPlane())}handleUpdatedMembers(t){let e="";for(const i of t)"@SHARED"!==i.name&&(e+=`<button type="button" class="men-button" player-name="${i.name}">${i.name}</button>`);this.playerButtons&&(this.playerButtons.innerHTML=e)}handleFocusPlayer(t){const e=t.target.getAttribute("player-name");this.worldMap.followPlayer(e)}});customElements.define("side-panel",class extends s{constructor(){super()}html(){return'<div class="side-panel__panels"></div>\n'}connectedCallback(){super.connectedCallback(),this.render(),this.sidePanels=this.querySelector(".side-panel__panels"),this.subscribe("members-updated",this.handleUpdatedMembers.bind(this))}disconnectedCallback(){super.disconnectedCallback()}handleUpdatedMembers(t){let e="";for(const i of t)"@SHARED"!==i.name&&(e+=`<player-panel class="rsborder rsbackground" player-name="${i.name}"></player-panel>`);this.sidePanels.innerHTML=e}});customElements.define("player-panel",class extends s{constructor(){super()}html(){return`<player-stats player-name="${this.playerName}"></player-stats>\n<div class="player-panel__minibar">\n  <button type="button" data-component="player-inventory">\n    <img src="/ui/777-0.png" width="26" height="28" />\n  </button>\n  <button type="button" data-component="player-equipment">\n    <img src="/ui/778-0.png" width="27" height="32" />\n  </button>\n  <button type="button" data-component="player-skills">\n    <img src="/ui/3579-0.png" width="23" height="22" />\n  </button>\n  <button type="button" data-component="player-quests">\n    <img src="/ui/776-0.png" width="22" height="22" />\n  </button>\n  <button type="button" data-component="player-diaries">\n    <img src="/ui/1298-0.png" width="22" height="22" />\n  </button>\n  <button type="button" class="player-panel__collection-log">\n    <img src="/icons/items/22711.webp" width="32" />\n  </button>\n</div>\n<div class="player-panel__content"></div>\n`}connectedCallback(){super.connectedCallback(),this.playerName=this.getAttribute("player-name"),this.render(),this.contentArea=this.querySelector(".player-panel__content"),this.eventListener(this.querySelector(".player-panel__minibar"),"click",this.handleMiniBarClick.bind(this)),this.eventListener(this.querySelector(".player-panel__collection-log"),"click",this.handleCollectionLogClick.bind(this))}disconnectedCallback(){super.disconnectedCallback()}handleCollectionLogClick(){const t=document.createElement("collection-log");t.setAttribute("player-name",this.playerName),document.body.appendChild(t)}handleMiniBarClick(t){const e=t.target.getAttribute("data-component");e&&this.activeComponent!==e?(this.contentArea.innerHTML=`<${e} player-name="${this.playerName}"></${e}>`,this.activeComponent&&this.querySelector(`button[data-component="${this.activeComponent}"]`).classList.remove("player-panel__tab-active"),this.querySelector(`button[data-component="${e}"]`).classList.add("player-panel__tab-active"),this.activeComponent=e,this.classList.add("expanded")):this.activeComponent&&this.activeComponent===e&&(this.contentArea.innerHTML="",this.querySelector(`button[data-component="${this.activeComponent}"]`).classList.remove("player-panel__tab-active"),this.activeComponent=null,this.classList.remove("expanded"))}});customElements.define("player-stats",class extends s{constructor(){super(),this.hitpoints={current:1,max:1},this.prayer={current:1,max:1},this.energy={current:1,max:1},this.world=301}html(){return`<div class="player-stats__hitpoints">\n  <stat-bar class="player-stats__hitpoints-bar" bar-color="#157145"></stat-bar>\n  <player-interacting player-name="${this.playerName}"></player-interacting>\n  <div class="player-stats__name">\n    <player-icon player-name="${this.playerName}"></player-icon> ${this.playerName} -\n    <span class="player-stats__world"></span>\n  </div>\n  <div class="player-stats__hitpoints-numbers">${this.hitpoints.current} / ${this.hitpoints.max}</div>\n</div>\n<div class="player-stats__prayer">\n  <stat-bar class="player-stats__prayer-bar" bar-color="#336699"></stat-bar>\n  <div class="player-stats__prayer-numbers">${this.prayer.current} / ${this.prayer.max}</div>\n</div>\n<div class="player-stats__energy">\n  <stat-bar class="player-stats__energy-bar" bar-color="#a9a9a9"></stat-bar>\n</div>\n<xp-dropper player-name="${this.playerName}"></xp-dropper>\n`}connectedCallback(){super.connectedCallback(),this.playerName=this.getAttribute("player-name"),this.render(),this.worldEl=this.querySelector(".player-stats__world"),this.hitpointsBar=this.querySelector(".player-stats__hitpoints-bar"),this.prayerBar=this.querySelector(".player-stats__prayer-bar"),this.energyBar=this.querySelector(".player-stats__energy-bar"),this.subscribe(`stats:${this.playerName}`,this.handleUpdatedStats.bind(this)),this.subscribe(`inactive:${this.playerName}`,this.handleWentInactive.bind(this)),this.subscribe(`active:${this.playerName}`,this.handleWentActive.bind(this))}disconnectedCallback(){super.disconnectedCallback()}handleUpdatedStats(t,e){this.updateStatBars(t),this.updateWorld(t.world,e.inactive,e.lastUpdated)}handleWentInactive(t,e){this.updateWorld(void 0,t,e.lastUpdated)}handleWentActive(t,e){this.world=void 0,this.updateWorld(e.stats.world,!1)}updateWorld(t,e,i){if(e){const t=Intl?.DateTimeFormat()?.resolvedOptions()?.locale||void 0;this.worldEl.innerText=`${i.toLocaleString(t)}`,this.classList.contains("player-stats__inactive")||this.classList.add("player-stats__inactive")}else this.world!==t&&(this.world=t,this.classList.contains("player-stats__inactive")&&this.classList.remove("player-stats__inactive"),this.worldEl.innerText=`W${this.world}`)}updateStatBars(t){void 0!==t.hitpoints&&void 0!==t.prayer&&void 0!==t.energy&&(this.updateText(t.hitpoints,"hitpoints"),this.updateText(t.prayer,"prayer"),window.requestAnimationFrame((()=>{this.isConnected&&(this.hitpointsBar.update(t.hitpoints.current/t.hitpoints.max),this.prayerBar.update(t.prayer.current/t.prayer.max),this.energyBar.update(t.energy.current/t.energy.max))})))}updateText(t,e){const i=this.querySelector(`.player-stats__${e}-numbers`);if(!i)return;const s=this[e];void 0!==s&&s.current===t.current&&s.max===t.max||(this[e]=t,i.innerText=`${t.current} / ${t.max}`)}});customElements.define("player-inventory",class extends s{constructor(){super()}html(){return'<div class="player-inventory__background">\n</div>\n\n<div class="player-inventory__inventory"></div>\n'}connectedCallback(){super.connectedCallback(),this.render(),this.inventoryEl=this.querySelector(".player-inventory__inventory"),this.playerName=this.getAttribute("player-name"),this.subscribe(`inventory:${this.playerName}`,this.handleUpdatedInventory.bind(this))}disconnectedCallback(){super.disconnectedCallback()}handleUpdatedInventory(t){const e=document.createDocumentFragment();for(let i=0;i<t.length;++i){const s=t[i];if(!s.isValid())continue;const n=Math.floor(i/4),a=i-4*n,r=document.createElement("item-box");r.style.gridColumn=`${a+1} / ${a+1}`,r.style.gridRow=`${n+1} / ${n+1}`,r.setAttribute("player-name",this.playerName),r.setAttribute("inventory-type","inventory"),s.isRunePouch()&&r.setAttribute("no-tooltip","true"),r.item=s,e.appendChild(r)}this.inventoryEl.innerHTML="",this.inventoryEl.appendChild(e)}});customElements.define("player-skills",class extends s{constructor(){super()}html(){return""}connectedCallback(){super.connectedCallback(),this.render(),this.playerName=this.getAttribute("player-name"),this.renderSkillBoxes()}disconnectedCallback(){super.disconnectedCallback()}renderSkillBoxes(){const t=document.createDocumentFragment(),e=[c.Attack,c.Hitpoints,c.Mining,c.Strength,c.Agility,c.Smithing,c.Defence,c.Herblore,c.Fishing,c.Ranged,c.Thieving,c.Cooking,c.Prayer,c.Crafting,c.Firemaking,c.Magic,c.Fletching,c.Woodcutting,c.Runecraft,c.Slayer,c.Farming,c.Construction,c.Hunter];let i=e.length;e.forEach((e=>{const s=document.createElement("skill-box");s.setAttribute("player-name",this.playerName),s.setAttribute("skill-name",e),s.setAttribute("style","z-index: "+i--),t.appendChild(s)}));const s=document.createElement("total-level-box");s.setAttribute("player-name",this.playerName),t.appendChild(s),this.innerHTML="",this.appendChild(t)}});customElements.define("skill-box",class extends s{constructor(){super()}html(){return`<div class="skill-box__left">\n  <img class="skill-box__icon" src="${u.getIcon(this.skillName)}" />\n</div>\n\n<div class="skill-box__right">\n  <div class="skill-box__current-level"></div>\n  <div class="skill-box__baseline-level"></div>\n</div>\n\n<div class="skill-box__progress">\n  <div class="skill-box__progress-bar"></div>\n</div>\n`}connectedCallback(){super.connectedCallback(),this.enableTooltip(),this.skillName=this.getAttribute("skill-name"),this.playerName=this.getAttribute("player-name"),this.render(),this.currentLevel=this.querySelector(".skill-box__current-level"),this.baseLevel=this.querySelector(".skill-box__baseline-level"),this.progressBar=this.querySelector(".skill-box__progress-bar"),this.subscribe(`${this.skillName}:${this.playerName}`,this.handleUpdatedSkill.bind(this))}disconnectedCallback(){super.disconnectedCallback()}handleUpdatedSkill(t){this.currentLevel.innerHTML=Math.min(99,t.level),this.baseLevel.innerHTML=t.level;const e=t.levelProgress;this.progressBar.style.transform=`scaleX(${e})`,this.progressBar.style.background=`hsl(${100*e}, 100%, 50%)`,this.updateTooltip(`Total XP: ${t.xp.toLocaleString()}<br />XP until next level: ${t.xpUntilNextLevel.toLocaleString()}`)}});var L=0,q=1,M=2,T=3,I=4,$=5,P=7,E=9,A=10,D=12,N=13;customElements.define("player-equipment",class extends s{constructor(){super(),this.emptySlotImages={[L]:"156-0.png",[q]:"157-0.png",[M]:"158-0.png",[T]:"159-0.png",[I]:"161-0.png",[$]:"162-0.png",[P]:"163-0.png",[E]:"164-0.png",[A]:"165-0.png",[D]:"160-0.png",[N]:"166-0.png"}}html(){return'<div class="equipment">\n  <div class="equipment-head equipment-slot"></div>\n  <div class="equipment-cape equipment-slot"></div>\n  <div class="equipment-neck equipment-slot"></div>\n  <div class="equipment-ammo equipment-slot"></div>\n  <div class="equipment-weapon equipment-slot"></div>\n  <div class="equipment-torso equipment-slot"></div>\n  <div class="equipment-shield equipment-slot"></div>\n  <div class="equipment-legs equipment-slot"></div>\n  <div class="equipment-gloves equipment-slot"></div>\n  <div class="equipment-boots equipment-slot"></div>\n  <div class="equipment-ring equipment-slot"></div>\n</div>\n'}connectedCallback(){super.connectedCallback(),this.render(),this.playerName=this.getAttribute("player-name"),this.slotEls={[L]:this.querySelector(".equipment-head"),[q]:this.querySelector(".equipment-cape"),[M]:this.querySelector(".equipment-neck"),[T]:this.querySelector(".equipment-weapon"),[I]:this.querySelector(".equipment-torso"),[$]:this.querySelector(".equipment-shield"),[P]:this.querySelector(".equipment-legs"),[E]:this.querySelector(".equipment-gloves"),[A]:this.querySelector(".equipment-boots"),[D]:this.querySelector(".equipment-ring"),[N]:this.querySelector(".equipment-ammo")},this.subscribe(`equipment:${this.playerName}`,this.handleUpdatedEquipment.bind(this))}disconnectedCallback(){super.disconnectedCallback()}handleUpdatedEquipment(t){for(let e=0;e<t.length;++e){const i=this.slotEls[e];if(void 0===i)continue;const s=t[e];if(s.isValid()){const t=document.createElement("item-box");t.item=s,t.setAttribute("player-name",this.playerName),t.setAttribute("inventory-type","equipment"),i.innerHTML="",i.appendChild(t)}else i.innerHTML=`<img loading="lazy" src="/ui/${this.emptySlotImages[e]}" />`}}});customElements.define("xp-dropper",class extends s{constructor(){super()}html(){return""}connectedCallback(){super.connectedCallback();const t=this.getAttribute("player-name");this.render(),this.subscribe(`xp:${t}`,this.handleNewXpDrops.bind(this))}disconnectedCallback(){super.disconnectedCallback()}handleNewXpDrops(t){let e="";for(const i of t)e+=`<div><img class="xp-droppper__skill-icon" src="${i.icon}" />+${i.xp}</div>`;const i=document.createElement("div");i.classList.add("xp-dropper__drop"),i.innerHTML=e,i.style.paddingTop=this.offsetHeight+"px",i.addEventListener("animationend",(()=>i.remove())),this.appendChild(i)}});customElements.define("rs-tooltip",class t extends s{constructor(){super()}html(){return this.tooltipText?(this.style.display="block",`${this.tooltipText}\n`):(this.style.display="none","")}connectedCallback(){super.connectedCallback(),this.render(),t.globalTooltip=this}disconnectedCallback(){super.disconnectedCallback()}updatePosition(t){const e=t.clientX,i=t.clientY,s=Math.max(0,i-this.height);let n=e+2;n>=document.body.clientWidth/2&&(n-=this.offsetWidth+2),this.style.transform=`translate(${n}px, ${s}px)`}showTooltip(t){this.tooltipText=t,this.eventListener(document.body,"mousemove",this.updatePosition.bind(this)),this.render(),this.height=this.offsetHeight}hideTooltip(){this.tooltipText=null,this.unbindEvents(),this.render()}});customElements.define("item-box",class extends s{constructor(){super()}html(){return`<div class="item-box__container">\n  <img class="item-box__image" src="${l.imageUrl(this.itemId,this.quantity)}" loading="lazy" />\n  ${this.quantity>1?`\n  <span class="item-box__quantity">\n    ${this.veryShortQuantity?l.veryShortQuantity(this.quantity):l.shortQuantity(this.quantity)}\n  </span>\n  `:""}\n  ${this.item?.isRunePouch()?`\n  <rune-pouch\n    player-name="${this.playerName}"\n    pouch-name="${this.item.name}">\n  </rune-pouch>\n  `:""}\n</div>\n`}connectedCallback(){if(super.connectedCallback(),this.noTooltip=this.hasAttribute("no-tooltip"),this.playerName=this.getAttribute("player-name"),this.veryShortQuantity=this.hasAttribute("very-short-quantity"),this.quantity=this.item?.quantity||parseInt(this.getAttribute("item-quantity")),this.itemId=this.item?.id||parseInt(this.getAttribute("item-id")),!this.noTooltip)if(this.enableTooltip(),this.item){const t=this.getAttribute("inventory-type"),e=v.inventoryQuantityForItem(this.item.id,this.playerName,t),i=e*this.item.highAlch,s=e*this.item.gePrice;this.tooltipText=`\n${this.item.name} x ${e}\n<br />\nHA: ${i.toLocaleString()}\n<br />\nGE: ${s.toLocaleString()}`}else this.tooltipText=`${l.itemName(this.itemId)} x ${this.quantity.toLocaleString()}`;this.render()}disconnectedCallback(){super.disconnectedCallback()}});customElements.define("total-level-box",class extends s{constructor(){super()}html(){return'<img class="total-level-box__image" src="/ui/183-0.png" />\n<img class="total-level-box__image" src="/ui/184-0.png" />\n<div class="total-level-box__content">\n  <span>Total level:</span>\n  <span class="total-level-box__level"></span>\n</div>\n'}connectedCallback(){super.connectedCallback(),this.enableTooltip(),this.playerName=this.getAttribute("player-name"),this.render(),this.totalLevel=this.querySelector(".total-level-box__level"),this.subscribe(`Overall:${this.playerName}`,this.handleUpdatedTotalXp.bind(this))}disconnectedCallback(){super.disconnectedCallback()}handleUpdatedTotalXp(t){this.totalLevel.innerHTML=t.level,this.updateTooltip(`Total XP: ${t.xp.toLocaleString()}`)}});function F(t){return!/[^A-Za-z 0-9-_]/g.test(t)}function U(t){return t.length>=1&&t.length<=16}customElements.define("player-quests",class extends s{constructor(){super()}html(){const t=`\n<h4 class="player-quests__section-header">Free Quests</h4>\n${this.questSectionHtml(o.freeToPlayQuests)}\n`,e=`\n<h4 class="player-quests__section-header">Members' Quests</h4>\n${this.questSectionHtml(o.memberQuests)}\n`,i=`\n<h4 class="player-quests__section-header">Miniquests</h4>\n${this.questSectionHtml(o.miniQuests)}\n`;return`<div class="player-quests__top">\n  <search-element class="player-quests__filter input-small" placeholder="Filter Quests"></search-element>\n  <div class="player-quests__points">\n    <span class="player-quests__current-points">${this.questPoints}</span> / ${o.totalPoints}\n  </div>\n</div>\n<div class="player-quests__list">${t} ${e} ${i}</div>\n`}connectedCallback(){super.connectedCallback();const t=this.getAttribute("player-name");this.render(),this.questListElements=new Map;const e=Array.from(this.querySelectorAll(".player-quests__quest"));for(const t of e){const e=parseInt(t.getAttribute("quest-id"));this.questListElements.set(e,t)}this.currentQuestPointsEl=this.querySelector(".player-quests__current-points"),this.subscribe(`quests:${t}`,this.handleUpdatedQuests.bind(this)),this.searchElement=this.querySelector("search-element"),this.eventListener(this.searchElement,"input",this.handleSearch.bind(this))}disconnectedCallback(){super.disconnectedCallback()}questSectionHtml(t){let e="";const i=Object.entries(t).sort(((t,e)=>t[1].sortName.localeCompare(e[1].sortName)));for(const[t,s]of i){const i=this.getQuestById(t);e+=`\n<a href="${i.wikiLink}" target="_blank" rel="noopener noreferrer">\n  <div class="player-quests__quest" quest-id="${t}">\n    <img class="player-quests__difficulty-icon" src="${i.icon}" alt="${i.difficulty}" title="${i.difficulty}" />\n    ${i.name}\n  </div>\n</a>\n`}return e}get questPoints(){let t=0;if(this.quests)for(const e of Object.values(this.quests))t+=e.points;return t}classForQuestState(t){switch(t){case r.NOT_STARTED:return"player-quests__not-started";case r.IN_PROGRESS:return"player-quests__in-progress";case r.FINISHED:return"player-quests__finished"}return""}handleUpdatedQuests(t){const e=this.quests;this.quests=t;for(const[t,i]of this.questListElements.entries()){const s=e?.[t],n=this.quests?.[t],a=this.classForQuestState(s?.state),r=this.classForQuestState(n?.state);a!==r&&(a.length>0&&i.classList.remove(a),i.classList.add(r))}this.currentQuestPointsEl.innerHTML=this.questPoints}getQuestById(t){return this.quests?.[t]||new o(t,r.NOT_STARTED)}handleSearch(){const t=this.searchElement.value.trim().toLowerCase();for(const[e,i]of this.questListElements.entries()){const s=this.getQuestById(e).name;0===t.length||s.toLowerCase().includes(t)?i.classList.remove("player-quests__hidden"):i.classList.add("player-quests__hidden")}}});var O=new class{get globalLoadingScreen(){return this._globalLoadingScreen||(this._globalLoadingScreen=document.querySelector("loading-screen")),this._globalLoadingScreen}showLoadingScreen(){this.globalLoadingScreen.style.display="block"}hideLoadingScreen(){this.globalLoadingScreen.style.display="none"}};customElements.define("create-group",class extends s{constructor(){super()}html(){return`<div class="create-group__steps rsborder rsbackground">\n  <div class="create-group__step">\n    <h3>Pick a name for your group</h3>\n    <p>This does <span class="emphasize">not</span> need to be the in-game name.</p>\n    <men-input class="create-group__name" input-id="group-name" placeholder-text="Group name"></men-input>\n  </div>\n\n  <div class="create-group__step">\n    <h3>What size is the group?</h3>\n    <p>This can be changed later.</p>\n    <div class="select-container rsborder-tiny rsbackground">\n      <select id="group-member-count">\n        <option disabled selected value>Select an option</option>\n        <option value="2">2</option>\n        <option value="3">3</option>\n        <option value="4">4</option>\n        <option value="5">5</option>\n      </select>\n    </div>\n  </div>\n\n  <div class="create-group__step create-group__step-members">\n    <h3>Enter each members' name</h3>\n    <p>This <span class="emphasize">does</span> need to match the in-game name. (Can be changed later)</p>\n    <div class="create-group__member-inputs"></div>\n  </div>\n\n  ${this.captchaEnabled?'<div id="create-group__step-captcha" class="create-group__step h-captcha"></div>':""}\n\n  <button type="button" class="create-group__submit men-button">Create group</button>\n  <div class="create-group__server-error validation-error"></div>\n</div>\n`}connectedCallback(){super.connectedCallback(),O.showLoadingScreen(),this.initCaptcha().then((()=>{O.hideLoadingScreen(),this.isConnected&&(this.render(),this.groupName=this.querySelector(".create-group__name"),this.groupName.validators=[t=>F(t)?null:"Group name has some unsupported special characters.",t=>U(t)?null:"Group name must be between 1 and 16 characters."],this.serverError=this.querySelector(".create-group__server-error"),this.eventListener(this.querySelector("#group-member-count"),"change",this.handleMemberCountChange.bind(this)),this.eventListener(this.querySelector(".create-group__submit"),"click",this.createGroup.bind(this)),this.captchaEnabled&&(this.captchaWidgetID=hcaptcha.render("create-group__step-captcha",{sitekey:this.sitekey,theme:"dark"})))}))}disconnectedCallback(){super.disconnectedCallback(),this.captchaEnabled&&(document.getElementById("hcaptcha").remove(),window.hcaptcha=void 0)}resetMembersSection(){this.querySelector(".create-group__member-inputs").innerHTML=""}get memberNameInputs(){return Array.from(this.querySelectorAll(".create-group__member-inputs member-name-input"))}validateMemberNames(){const t=this.memberNameInputs;let e=!0;for(const i of t)i.valid||(e=!1);return e}displayMembersSection(t){this.resetMembersSection();const e=this.querySelector(".create-group__member-inputs"),i=document.createDocumentFragment();for(let e=0;e<t;++e){const t=document.createElement("member-name-input");t.setAttribute("member-number",e+1),i.appendChild(t)}e.innerHTML="",e.appendChild(i),this.querySelector(".create-group__step-members").style.display="block",this.querySelector(".create-group__submit").style.display="block"}handleMemberCountChange(t){const e=t.target,i=parseInt(e.value);this.displayMembersSection(i)}async createGroup(){if(this.serverError.innerHTML="",!this.groupName.valid||!this.validateMemberNames())return;let t="";if(this.captchaEnabled&&(t=hcaptcha.getResponse(this.captchaWidgetID),!t))return void(this.serverError.innerHTML="Complete the captcha");const e=this.groupName.value,i=this.memberNameInputs,s=[];for(const t of i)s.push(t.value);for(let t=s.length;t<5;++t)s.push("");const a=document.querySelector(".create-group__submit");try{a.disabled=!0;const i=await k.createGroup(e,s,t);if(i.ok){const t=await i.json();n.storeGroup(t.name,t.token),window.history.pushState("","","/setup-instructions")}else{const t=await i.text();this.serverError.innerHTML=`Error creating group: ${t}`}}catch(t){this.serverError.innerHTML=`Error creating group: ${t}`}finally{a.disabled=!1}}async initCaptcha(){const t=await k.getCaptchaEnabled();this.captchaEnabled=t.enabled,this.sitekey=t.sitekey,this.captchaEnabled&&await this.waitForCaptchaScript()}waitForCaptchaScript(){return new Promise((t=>{document.getElementById("hcaptcha")&&t(),window.menCaptchaLoaded=()=>t();const e=document.createElement("script");e.id="hcaptcha",e.src="https://js.hcaptcha.com/1/api.js?render=explicit&onload=menCaptchaLoaded",document.body.appendChild(e)}))}});customElements.define("men-link",class extends s{constructor(){super()}html(){return this.href=this.getAttribute("link-href"),`<a href="${this.href}"> ${this.innerHTML} </a>\n`}connectedCallback(){super.connectedCallback(),this.render(),this.eventListener(this.querySelector("a"),"click",this.navigate.bind(this),{passive:!1})}disconnectedCallback(){super.disconnectedCallback()}navigate(t){t.preventDefault(),window.history.pushState("","",this.href)}});customElements.define("setup-instructions",class extends s{constructor(){super()}html(){const t=n.getGroup();return`<div class="setup__container rsbackground rsborder">\n  <div class="setup__block">\n    <h3>The group's login</h3>\n    <p>Only share these with your group. You can't recover it so keep it safe!</p>\n    <div class="setup__block">\n      <h4>Group Name</h4>\n      <div class="setup__credential rsborder-tiny rsbackground">\n        ${t.groupName}\n      </div>\n    </div>\n\n    <div class="setup__block">\n      <h4>Group Token</h4>\n      <div class="setup__credential rsborder-tiny rsbackground">\n        <div class="setup__credential-hide" onclick="this.remove()">Click to show</div>\n        ${t.groupToken}\n      </div>\n    </div>\n  </div>\n\n  <div class="setup__block">\n    <h3>Setup</h3>\n    <p>\n      This app requires each group member to install a runelite plugin from the Plugin Hub in order to track player\n      information. Find it by searching "<span class="emphasize">Group Ironmen Tracker</span>" in the Runelite client.\n    </p>\n  </div>\n\n  <div class="setup__config">\n    <p>\n      Use the provided credentials to fill in the <span class="emphasize">Group Config</span> section in the plugin's\n      configuration.\n    </p>\n    <img src="/images/config_panel.png" />\n  </div>\n\n  <div class="setup__go-to-group">\n    <men-link link-href="/group">\n      <button class="men-button">Go to group</button>\n    </men-link>\n  </div>\n</div>\n`}connectedCallback(){super.connectedCallback(),this.render()}disconnectedCallback(){super.disconnectedCallback()}});customElements.define("app-initializer",class extends s{constructor(){super()}html(){return""}connectedCallback(){super.connectedCallback(),this.initializeApp()}disconnectedCallback(){super.disconnectedCallback(),this.cleanup()}cleanup(){k.disable(),e.unpublishAll(),f.disable(),k.exampleDataEnabled=!1,O.hideLoadingScreen()}async initializeApp(){this.cleanup(),O.showLoadingScreen(),await Promise.all([l.loadItems(),l.loadGePrices(),o.loadQuests(),p.loadDiaries()]);const t=n.getGroup();this.isConnected&&("@EXAMPLE"===t.groupName?await this.loadExampleData():await this.loadGroup(t),O.hideLoadingScreen())}async loadExampleData(){f.enable(),k.exampleDataEnabled=!0,await k.enable()}async loadGroup(t){const i=e.waitUntilNextEvent("get-group-data",!1);await k.enable(t.groupName,t.groupToken),await i}});customElements.define("group-settings",class extends s{constructor(){super()}html(){const e=t.getLayout(),i=t.getTheme();return`<div class="rsborder rsbackground group-settings__container">\n  <h3>Member settings</h3>\n  <p>These <span class="emphasize">do</span> need to match the in-game names.</p>\n  <div class="group-settings__section-content group-settings__members"></div>\n\n  <h3>Appearance settings</h3>\n  <fieldset class="group-settings__panels">\n    <legend>Player panels</legend>\n    <div>\n      <input id="panel-dock__left" type="radio" value="left" name="panel-dock-side" ${"row-reverse"!==e?"checked":""} />\n      <label for="panel-dock__left">Dock panels to left</label>\n    </div>\n    <div>\n      <input id="panel-dock__right" type="radio" value="right" name="panel-dock-side" ${"row-reverse"===e?"checked":""}/>\n      <label for="panel-dock__right">Dock panels to right</label>\n    </div>\n  </fieldset>\n\n  <fieldset class="group-settings__style">\n    <legend>Style</legend>\n    <div>\n      <input id="style__light" type="radio" value="light" name="appearance-style" ${"dark"!==i?"checked":""} />\n      <label for="style__light">Light</label>\n    </div>\n    <div>\n      <input id="style__dark" type="radio" value="dark" name="appearance-style" ${"dark"===i?"checked":""}/>\n      <label for="style__dark">Dark</label>\n    </div>\n  </fieldset>\n</div>\n`}connectedCallback(){super.connectedCallback(),this.render(),this.memberSection=this.querySelector(".group-settings__members"),this.panelDockSide=this.querySelector(".group-settings__panels"),this.appearanceStyle=this.querySelector(".group-settings__style"),this.subscribe("members-updated",this.handleUpdatedMembers.bind(this)),this.eventListener(this.panelDockSide,"change",this.handlePanelDockSideChange.bind(this)),this.eventListener(this.appearanceStyle,"change",this.handleStyleChange.bind(this))}disconnectedCallback(){super.disconnectedCallback()}handleStyleChange(){const e=this.querySelector('input[name="appearance-style"]:checked').value;t.setTheme(e)}handlePanelDockSideChange(){"right"===this.querySelector('input[name="panel-dock-side"]:checked').value?t.setLayout("row-reverse"):t.setLayout("row")}handleUpdatedMembers(t){t=t.filter((t=>"@SHARED"!==t.name));let e=document.createDocumentFragment();for(let i=0;i<t.length;++i){const s=t[i],n=document.createElement("edit-member");n.member=s,n.memberNumber=i+1,e.appendChild(n)}if(t.length<5){const i=document.createElement("edit-member");i.memberNumber=t.length+1,e.appendChild(i)}this.memberSection.innerHTML="",this.memberSection.appendChild(e)}});var H=class extends s{constructor(){super()}html(){const t=this.getAttribute("input-id"),e=this.getAttribute("placeholder-text"),i=this.getAttribute("input-label"),s=this.hasAttribute("type-password");return`${i?`<label for="${t}">${i}</label>`:""} <input id="${t}" placeholder="${e}"\nmaxlength="${parseInt(this.getAttribute("max-length"))||16}" ${s?'type="password"':""} />\n<div class="validation-error"></div>\n`}connectedCallback(){super.connectedCallback(),this.render(),this.noTrim=this.hasAttribute("no-trim"),this.input=this.querySelector("input");const t=this.trim(this.getAttribute("input-value"));t&&(this.input.value=t),this.validationError=this.querySelector(".validation-error"),this.eventListener(this.input,"blur",this.handleBlurEvent.bind(this))}disconnectedCallback(){super.disconnectedCallback()}trim(t){return this.noTrim?t:t?.trim()}handleBlurEvent(){this.updateValueAndValidity()}makeInvalid(t){this.input.classList.add("invalid"),this.validationError.innerHTML=t}makeValid(){this.input.classList.remove("invalid"),this.validationError.innerHTML=""}get value(){return this.trim(this.input.value)}get valid(){return this.updateValueAndValidity()}updateValueAndValidity(){if(this.input.value=this.trim(this.input.value),this.validators)for(const t of this.validators){const e=t(this.input.value);if(e)return this.makeInvalid(e),!1}return this.makeValid(),!0}};customElements.define("men-input",H);customElements.define("member-name-input",class extends H{constructor(){super()}connectedCallback(){this.memberNumber=parseInt(this.getAttribute("member-number")),this.setAttribute("placeholder-text","Player name"),this.setAttribute("input-id",`member-name${this.memberNumber}`),this.setAttribute("input-label",`Name of member ${this.memberNumber}`),this.setAttribute("no-trim","true"),this.validators=[t=>F(t)?null:"Character name has some unsupported special characters.",t=>U(t)?null:"Character name must be between 1 and 16 characters."],super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}});var z=new class{get globalConfirmDialog(){return this._globalConfirmDialog||(this._globalConfirmDialog=document.querySelector("confirm-dialog")),this._globalConfirmDialog}confirm(t){this.globalConfirmDialog.show(t)}};customElements.define("edit-member",class extends s{constructor(){super()}html(){return`<member-name-input input-value="${this.member?.name||""}" member-number="${this.memberNumber}"></member-name-input>\n\n<div class="edit-member__buttons">\n  ${this.member?'\n  <button class="edit-member__rename men-button small">Rename</button>\n  <button class="edit-member__remove men-button small">Remove</button>\n  ':'\n  <button class="edit-member__add men-button small">Add member</button>\n  '}\n</div>\n\n<div class="edit-member__error validation-error"></div>\n`}connectedCallback(){super.connectedCallback(),this.render(),this.input=this.querySelector("member-name-input"),this.error=this.querySelector(".edit-member__error");const t=this.querySelector(".edit-member__rename"),e=this.querySelector(".edit-member__remove"),i=this.querySelector(".edit-member__add");t&&this.eventListener(t,"click",this.renameMember.bind(this)),e&&this.eventListener(e,"click",this.removeMember.bind(this)),i&&this.eventListener(i,"click",this.addMember.bind(this))}disconnectedCallback(){super.disconnectedCallback()}hideError(){this.error.innerHTML=""}showError(t){this.error.innerHTML=t}async renameMember(){if(this.hideError(),!this.input.valid)return;const t=this.member.name,i=this.input.value;if(t!==i)try{O.showLoadingScreen();const s=await k.renameMember(t,i);if(s.ok)await k.restart(),await e.waitUntilNextEvent("get-group-data",!1);else{const t=await s.text();this.showError(`Failed to rename member ${t}`)}}catch(t){this.showError(`Failed to rename member ${t}`)}finally{O.hideLoadingScreen()}else this.showError("New name is the same as the old name")}removeMember(){this.hideError(),z.confirm({headline:`Delete ${this.member.name}?`,body:"All player data will be lost and cannot be recovered.",yesCallback:async()=>{try{O.showLoadingScreen();const t=await k.removeMember(this.member.name);if(t.ok)await k.restart(),await e.waitUntilNextEvent("get-group-data",!1);else{const e=await t.text();this.showError(`Failed to remove member ${e}`)}}catch(t){this.showError(`Failed to remove member ${t}`)}finally{O.hideLoadingScreen()}},noCallback:()=>{}})}async addMember(){if(this.hideError(),this.input.valid)try{O.showLoadingScreen();const t=await k.addMember(this.input.value);if(t.ok)await k.restart(),await e.waitUntilNextEvent("get-group-data",!1);else{const e=await t.text();this.showError(`Failed to add member ${e}`)}}catch(t){this.showError(`Failed to add member ${t}`)}finally{O.hideLoadingScreen()}}});customElements.define("loading-screen",class extends s{constructor(){super()}html(){return'<div class="loader"><div></div><div></div><div></div><div></div></div>\n'}connectedCallback(){super.connectedCallback(),this.render()}disconnectedCallback(){super.disconnectedCallback()}});customElements.define("login-page",class extends s{constructor(){super()}html(){return'<div class="login__container rsborder rsbackground">\n  <men-input\n    class="login__name"\n    input-id="groupName"\n    placeholder-text="Group name"\n    input-label="Group name"\n  ></men-input>\n  <men-input\n    class="login__token"\n    max-length="60"\n    input-id="groupToken"\n    placeholder-text="Group token"\n    input-label="Group token"\n    type-password\n  ></men-input>\n  <button class="login__button men-button">Login</button>\n  <div class="login__error validation-error"></div>\n</div>\n'}connectedCallback(){super.connectedCallback(),this.render();const t=t=>{if(0===t.length)return"This field is required."};this.name=this.querySelector(".login__name"),this.name.validators=[t],this.token=this.querySelector(".login__token"),this.token.validators=[t],this.loginButton=this.querySelector(".login__button"),this.error=this.querySelector(".login__error"),this.eventListener(this.loginButton,"click",this.login.bind(this))}disconnectedCallback(){super.disconnectedCallback()}async login(){if(this.name.valid&&this.token.valid)try{this.error.innerHTML="",this.loginButton.disabled=!0;const t=this.name.value,e=this.token.value;k.setCredentials(t,e);const i=await k.amILoggedIn();if(i.ok)n.storeGroup(t,e),window.history.pushState("","","/group");else if(401===i.status)this.error.innerHTML="Group name or token is incorrect";else{const t=await i.text();this.error.innerHTML=`Unable to login ${t}`}}catch(t){this.error.innerHTML=`Unable to login ${t}`}finally{this.loginButton.disabled=!1}}});customElements.define("logout-page",class extends s{constructor(){super()}html(){return""}connectedCallback(){super.connectedCallback(),f.disable(),k.disable(),n.clearGroup(),window.history.pushState("","","/")}disconnectedCallback(){super.disconnectedCallback()}});customElements.define("demo-page",class extends s{constructor(){super()}html(){return""}connectedCallback(){super.connectedCallback(),n.storeGroup("@EXAMPLE","00000000-0000-0000-0000-000000000000"),window.history.pushState("","","/group")}disconnectedCallback(){super.disconnectedCallback()}});customElements.define("social-links",class extends s{constructor(){super()}html(){return'<a href="https://ko-fi.com/gimplugin" title="Support me on Ko-fi" target="_blank">\n  <img loading="lazy" src="/images/kofi_p_logo_nolabel.webp" height="20"/>\n</a>\n<a href="https://github.com/christoabrown/group-ironmen-tracker" title="Github" target="_blank">\n  <img loading="lazy" src="/images/github-light.webp" width="20" height="20" />\n</a>\n<a href="https://discord.gg/XmAPkvqVpP" title="Discord" target="_blank">\n  <img loading="lazy" src="/images/discord-light.webp" width="18" height="20" />\n</a>\n'}connectedCallback(){super.connectedCallback(),this.render()}disconnectedCallback(){super.disconnectedCallback()}});customElements.define("rune-pouch",class extends s{constructor(){super()}html(){return""}connectedCallback(){super.connectedCallback();const t=this.getAttribute("player-name");this.pouchName=this.getAttribute("pouch-name"),this.subscribe(`runePouch:${t}`,this.handleUpdatedRunePouch.bind(this))}disconnectedCallback(){super.disconnectedCallback()}handleUpdatedRunePouch(t){this.runePouch=t,this.render();let e=document.createDocumentFragment(),i=[];for(const t of this.runePouch){const s=document.createElement("div");if(s.classList.add("rune-pouch__rune"),t.id>0){const e=document.createElement("item-box");e.setAttribute("very-short-quantity","true"),e.setAttribute("no-tooltip","true"),e.item=t,s.appendChild(e),i.push(`${t.quantity.toLocaleString()} ${t.name}`)}e.appendChild(s)}this.appendChild(e),this.enableTooltip(),this.tooltipText=`${this.pouchName}<br />${i.join("<br />")}`}});customElements.define("stat-bar",class extends s{constructor(){super()}html(){return""}connectedCallback(){if(super.connectedCallback(),this.render(),this.bar=this.querySelector(".stat-bar__current"),this.color=this.getAttribute("bar-color"),this.bgColor=this.getAttribute("bar-bgcolor"),!this.bgColor&&this.color.startsWith("#")){const t=this.darkenColor(this.hexToRgb(this.color));this.bgColor=`rgb(${t.r}, ${t.g}, ${t.b})`}if(this.color.startsWith("hsl")){const[t,e,i]=this.color.match(/\d+/g).map(Number);this.color={hue:t,saturation:e,lightness:i}}const t=parseFloat(this.getAttribute("bar-ratio"),10);isNaN(t)||this.update(t)}disconnectedCallback(){super.disconnectedCallback()}hexToRgb(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,s){return e+e+i+i+s+s}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}darkenColor(t){return{r:Math.round(t.r/3),g:Math.round(t.g/3),b:Math.round(t.b/3)}}getColor(t){if("string"==typeof this.color)return this.color;const e={...this.color};return e.hue=e.hue*t,`hsl(${Math.round(e.hue)}, ${e.saturation}%, ${e.lightness}%)`}update(t){if(!this.isConnected)return;const e=100*t,i=this.getColor(t);this.style.background=1===t?i:`linear-gradient(90deg, ${i}, ${e}%, ${this.bgColor} ${e}%)`}});customElements.define("player-interacting",class extends s{constructor(){super(),this.staleTimeout=3e4}html(){return'<stat-bar bar-color="#A41623"></stat-bar>\n<div class="player-interacting__name"></div>\n'}connectedCallback(){super.connectedCallback(),this.render(),this.hitpointsBar=this.querySelector("stat-bar"),this.name=this.querySelector(".player-interacting__name"),this.map=document.querySelector("#background-worldmap");const t=this.getAttribute("player-name");this.addMapMarker().then((()=>{this.subscribe(`interacting:${t}`,this.handleInteracting.bind(this))}))}disconnectedCallback(){super.disconnectedCallback(),window.clearTimeout(this.hideTimeout),this.marker&&this.map.removeInteractingMarker(this.marker)}handleInteracting(t){this.interacting=t;const e=a.timeSinceLastUpdate(t.last_updated);this.staleTimeout-e>1e3&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=window.setTimeout(this.hide.bind(this),this.staleTimeout),this.hitpointsBar.update(t.ratio/t.scale),this.name.innerHTML=t.name,this.show())}async addMapMarker(){this.marker=this.map.addInteractingMarker(0,0,"")}hide(){this.style.visibility="hidden",this.marker.coordinates={x:-1e6,y:-1e6,plane:0}}show(){this.style.visibility="visible",this.marker.coordinates=this.interacting.location,this.marker.label=this.interacting.name}});customElements.define("skills-graphs",class t extends s{constructor(){super()}html(){return`<div class="skills-graphs__control-container">\n  <button class="skills-graphs__refresh men-button">Refresh</button>\n\n  <div class="men-control-container rsborder-tiny rsbackground rsbackground-hover">\n    <select class="skills-graphs__period-select">\n      <option value="Day">Period: 24 Hours</option>\n      <option value="Week">Period: 7 Days</option>\n      <option value="Month">Period: 30 Days</option>\n      <option value="Year">Period: 12 Months</option>\n    </select>\n  </div>\n\n  <div class="men-control-container rsborder-tiny rsbackground rsbackground-hover">\n    <select class="skills-graphs__skill-select">\n      ${Object.values(c).sort(((t,e)=>"Overall"===t?-1:"Overall"===e?1:t.localeCompare(e))).map((t=>`\n      <option value="${t}">${t}</option>\n      `)).join("")}\n    </select>\n  </div>\n</div>\n<div class="skills-graphs__chart-container rsborder rsbackground"></div>\n`}connectedCallback(){super.connectedCallback(),this.render(),this.period="Day",this.chartContainer=this.querySelector(".skills-graphs__chart-container"),this.periodSelect=this.querySelector(".skills-graphs__period-select"),this.refreshButton=this.querySelector(".skills-graphs__refresh"),this.skillSelect=this.querySelector(".skills-graphs__skill-select"),this.selectedSkill=this.skillSelect.value,this.eventListener(this.periodSelect,"change",this.handlePeriodChange.bind(this)),this.eventListener(this.refreshButton,"click",this.handleRefreshClicked.bind(this)),this.eventListener(this.skillSelect,"change",this.handleSkillSelectChange.bind(this)),this.subscribeOnce("get-group-data",this.createChart.bind(this))}disconnectedCallback(){super.disconnectedCallback()}handleSkillSelectChange(){this.selectedSkill=this.skillSelect.value,this.subscribeOnce("get-group-data",this.createChart.bind(this))}handlePeriodChange(){this.period=this.periodSelect.value,this.subscribeOnce("get-group-data",this.createChart.bind(this))}handleRefreshClicked(){this.subscribeOnce("get-group-data",this.createChart.bind(this))}async createChart(){const t=document.createElement("div");t.classList.add("skills-graphs__loader"),t.classList.add("loader"),this.chartContainer.appendChild(t);try{const[t]=await Promise.all([k.getSkillData(this.period),this.waitForChartjs()]);t.sort(((t,e)=>t.name.localeCompare(e.name))),t.forEach((t=>{t.skill_data.forEach((t=>{t.time=new Date(t.time),t.data=y.transformSkillsFromStorage(t.data)})),t.skill_data.sort(((t,e)=>e.time-t.time))})),console.log(t),this.chartContainer.innerHTML="",Chart.defaults.scale.grid.borderColor="rgba(255, 255, 255, 0)";const e=getComputedStyle(document.body);Chart.defaults.color=e.getPropertyValue("--primary-text"),Chart.defaults.scale.grid.color=e.getPropertyValue("--graph-grid-border");const i=document.createElement("skill-graph");i.skillDataForGroup=t,i.setAttribute("data-period",this.period),i.setAttribute("skill-name",this.selectedSkill),this.chartContainer.appendChild(i)}catch(t){console.error(t),this.chartContainer.innerHTML=`Failed to load ${t}`}}async waitForChartjs(){for(t.chartJsScriptTag||(t.chartJsScriptTag=document.createElement("script"),t.chartJsScriptTag.src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js",document.body.appendChild(t.chartJsScriptTag));"undefined"==typeof Chart;)await new Promise((t=>setTimeout((()=>t(!0)),100)))}});customElements.define("confirm-dialog",class extends s{constructor(){super()}html(){return`<div class="dialog__container confirm-dialog__container rsborder rsbackground">\n  <h2>${this.headline}</h2>\n  <p>${this.body}</p>\n  <div class="confirm-dialog__buttons">\n    <button class="confirm-dialog__yes men-button">\n      Yes\n    </button>\n    <button class="confirm-dialog__no men-button">\n      No\n    </button>\n  </div>\n</div>\n`}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}show(t){this.headline=t.headline,this.body=t.body,this.render();const e=this.querySelector(".confirm-dialog__yes"),i=this.querySelector(".confirm-dialog__no");this.eventListener(e,"click",(()=>{this.unbindEvents(),this.hide(),t.yesCallback()})),this.eventListener(i,"click",(()=>{this.unbindEvents(),this.hide(),t.noCallback()})),this.classList.add("dialog__visible")}hide(){this.classList.remove("dialog__visible")}});customElements.define("panels-page",class extends s{constructor(){super()}html(){return""}connectedCallback(){super.connectedCallback(),document.body.classList.add("panels-page")}disconnectedCallback(){super.disconnectedCallback(),document.body.classList.remove("panels-page")}});customElements.define("diary-dialog",class extends s{constructor(){super()}html(){return`<div class="dialog dialog__visible">\n  <div class="dialog__container rsborder rsbackground">\n    <div class="diary-dialog__header rsborder-tiny">\n      <h2 class="diary-dialog__title">\n        Achievement Diary - ${this.diaryName} - ${this.playerName}\n      </h2>\n      <button class="dialog__close">\n        <img src="/ui/1731-0.png" alt="Close dialog" title="Close dialog" />\n      </button>\n    </div>\n\n    <div class="diary-dialog__scroll-container">\n      <div class="diary-dialog__section rsborder-tiny" diary-tier="Easy">\n        <h2>Easy</h2>\n      </div>\n      <div class="diary-dialog__section rsborder-tiny" diary-tier="Medium">\n        <h2>Medium</h2>\n      </div>\n      <div class="diary-dialog__section rsborder-tiny" diary-tier="Hard">\n        <h2>Hard</h2>\n      </div>\n      <div class="diary-dialog__section rsborder-tiny" diary-tier="Elite">\n        <h2>Elite</h2>\n      </div>\n    </div>\n  </div>\n</div>\n`}connectedCallback(){super.connectedCallback(),this.diaryName=this.getAttribute("diary-name"),this.playerName=this.getAttribute("player-name"),this.render(),this.background=this.querySelector(".dialog__visible"),this.subscribeOnce(`diaries:${this.playerName}`,this.handleDiaries.bind(this)),this.eventListener(this.querySelector(".dialog__close"),"click",this.close.bind(this)),this.eventListener(this.background,"click",this.closeIfBackgroundClick.bind(this))}disconnectedCallback(){super.disconnectedCallback()}closeIfBackgroundClick(t){t.target===this.background&&this.close()}close(){this.remove()}handleDiaries(t,e){const i=p.diaries[this.diaryName];let s=0;for(const[n,a]of Object.entries(i)){const i=document.createDocumentFragment(),r=t.completion[this.diaryName][n];let o=0;for(let t=0;t<a.length;++t){const s=a[t],n=r[t],l=document.createElement("div");l.classList.add("diary-dialog__task"),l.innerText=s.task,n&&(l.classList.add("diary-dialog__task-complete"),++o);const c=[],h=s.requirements?.combat;if(h){const t=e.combatLevel,i=t>=h;c.push(`\n<span class="${i?"diary-dialog__requirement-met":""}">\n  ${t}/${h} Combat\n</span>`)}const d=s.requirements?.skills;if(d)for(const[t,i]of Object.entries(d)){const s=e.skills[t].level,n=s>=i;c.push(`\n<span class="${n?"diary-dialog__requirement-met":""}">\n  ${s}/${i} <img title="${t}" alt="${t}" src="${u.getIcon(t)}" />\n</span>\n`)}const p=s.requirements?.quests;if(p)for(const t of p){const i=e.hasQuestComplete(t);c.push(`<span class="${i?"diary-dialog__requirement-met":""}">${t}</span>`)}if(c.length>0){const t=document.createElement("div");t.classList.add("diary-dialog__requirements"),t.innerHTML=`&nbsp;(${c.join(",&nbsp;")})`,l.appendChild(t)}i.appendChild(l)}const l=this.querySelector(`.diary-dialog__section[diary-tier="${n}"]`),c=l.querySelector("h2"),h=`https://oldschool.runescape.wiki/w/${this.diaryName.replace(/ /g,"_")}_Diary#${n}`;c.innerHTML=`<a href="${h}" target="_blank">${c.innerText} - ${o} / ${a.length}</a>`,o===a.length&&(l.classList.add("diary-dialog__tier-complete"),++s),l.appendChild(i)}4===s&&this.classList.add("diary-dialog__diary-complete"),this.classList.add("dialog__visible")}});customElements.define("player-diaries",class extends s{constructor(){super()}html(){return'<h2 class="player-diaries__title">Achievement Diaries</h2>\n<div class="player-diaries__completions"></div>\n'}connectedCallback(){super.connectedCallback(),this.render(),this.playerName=this.getAttribute("player-name"),this.completionsEl=this.querySelector(".player-diaries__completions"),this.subscribe(`diaries:${this.playerName}`,this.handleDiaries.bind(this))}disconnectedCallback(){super.disconnectedCallback()}handleDiaries(t){const e=document.createDocumentFragment();for(const[i,s]of Object.entries(t.completion)){const t=document.createElement("diary-completion");t.setAttribute("diary-name",i),t.setAttribute("player-name",this.playerName),t.diaryCompletion=s,e.appendChild(t)}this.completionsEl.innerHTML="",this.completionsEl.appendChild(e)}});customElements.define("diary-completion",class extends s{constructor(){super()}html(){return`<div class="rsborder-tiny diary-completion__container">\n  <div class="diary-completion__top">\n    <span>${this.diaryName}</span>\n    <span>${this.totalComplete}/${this.total}</span>\n  </div>\n  <div class="diary-completion__bottom">\n    <stat-bar bar-color="hsl(107, 100%, 41%)" bar-bgColor="rgba(0, 0, 0, 0.5)" bar-ratio="${this.tierCompletions.Easy.complete/this.tierCompletions.Easy.total}"></stat-bar>\n    <stat-bar bar-color="hsl(107, 100%, 41%)" bar-bgColor="rgba(0, 0, 0, 0.5)" bar-ratio="${this.tierCompletions.Medium.complete/this.tierCompletions.Medium.total}"></stat-bar>\n    <stat-bar bar-color="hsl(107, 100%, 41%)" bar-bgColor="rgba(0, 0, 0, 0.5)" bar-ratio="${this.tierCompletions.Hard.complete/this.tierCompletions.Hard.total}"></stat-bar>\n    <stat-bar bar-color="hsl(107, 100%, 41%)" bar-bgColor="rgba(0, 0, 0, 0.5)" bar-ratio="${this.tierCompletions.Elite.complete/this.tierCompletions.Elite.total}"></stat-bar>\n  </div>\n</div>\n`}connectedCallback(){super.connectedCallback(),this.playerName=this.getAttribute("player-name"),this.diaryName=this.getAttribute("diary-name");const t={Easy:{total:0,complete:0},Medium:{total:0,complete:0},Hard:{total:0,complete:0},Elite:{total:0,complete:0}};for(const[e,i]of Object.entries(t)){const t=this.diaryCompletion[e];for(const e of t)++i.total,e&&++i.complete}this.tierCompletions=t,this.total=t.Easy.total+t.Medium.total+t.Hard.total+t.Elite.total,this.totalComplete=t.Easy.complete+t.Medium.complete+t.Hard.complete+t.Elite.complete,this.render(),this.eventListener(this,"click",this.openDiaryDialog.bind(this))}disconnectedCallback(){super.disconnectedCallback()}openDiaryDialog(){const t=document.createElement("diary-dialog");t.setAttribute("player-name",this.playerName),t.setAttribute("diary-name",this.diaryName),document.body.appendChild(t)}});var G=class{constructor(t){t=Object.assign({current:0,target:0,progress:0,time:1},t),this.current=t.current,this.target=t.target,this.progress=t.progress,this.time=t.time,this.start=this.current}goTo(t,e){e<=1&&(this.current=t),this.target=t,this.time=e,this.progress=0,this.start=this.current}animate(t){if(this.progress>=1||isNaN(this.progress)||this.time<=1)return this.current=this.target,!1;const e=this.target;let i=this.progress;const s=this.time,n=this.start;return i+=t/s,i=Math.min(i,1),this.current=n*(1-i)+e*i,this.progress=i,!0}cancelAnimation(){this.target=this.current,this.progress=1}};customElements.define("canvas-map",class extends s{constructor(){super()}html(){return'<canvas></canvas>\n<div class="canvas-map__coordinates"></div>\n'}connectedCallback(){super.connectedCallback(),this.render(),this.coordinatesDisplay=this.querySelector(".canvas-map__coordinates"),this.canvas=this.querySelector("canvas"),this.ctx=this.canvas.getContext("2d",{alpha:!0}),this.eventListener(this,"mousedown",this.onPointerDown.bind(this)),this.eventListener(this,"touchstart",this.onTouchStart.bind(this)),this.eventListener(this,"mouseup",this.onPointerUp.bind(this)),this.eventListener(this,"touchend",this.onPointerUp.bind(this)),this.eventListener(this,"mousemove",this.onPointerMove.bind(this)),this.eventListener(this,"touchmove",this.onTouchMove.bind(this)),this.eventListener(this,"wheel",this.onScroll.bind(this)),this.eventListener(this,"mouseleave",this.stopDragging.bind(this)),this.eventListener(this,"mouseenter",this.stopDragging.bind(this)),this.eventListener(this,"touchcancel",this.stopDragging.bind(this)),this.eventListener(window,"resize",this.onResize.bind(this)),this.playerMarkers=new Map,this.interactingMarkers=new Set,this.subscribe("members-updated",this.handleUpdatedMembers.bind(this)),this.subscribe("coordinates",this.handleUpdatedCoordinates.bind(this)),this.plane=1,this.tileSize=256,this.pixelsPerGameTile=4,this.tiles=[new Map,new Map,new Map,new Map],this.tilesInView=[],this.previousFrameTime=performance.now(),this.followingPlayer={},this.onResize(),this.camera={x:new G({current:0,target:0,progress:1}),y:new G({current:0,target:0,progress:1}),zoom:new G({current:1,target:1,progress:1}),maxZoom:6,minZoom:1,isDragging:!1},this.cursor={x:0,y:0,frameX:[0],frameY:[0]},this.touch={pinchDistance:0};const[t,e]=this.gamePositionToCameraCenter(3103,3095);this.camera.x.goTo(t,1),this.camera.y.goTo(e,1),this.getMapJson(),this.update=this._update.bind(this),this.requestUpdate(),window.requestAnimationFrame(this.update)}disconnectedCallback(){super.disconnectedCallback()}async getMapJson(){const t=await fetch("/data/map.json"),e=await t.json();this.validTiles=[];for(const t of e.tiles)this.validTiles.push(new Set(t));this.locations={};for(const t of Object.keys(e.icons)){const i=parseInt(t);this.locations[i]={};for(const s of Object.keys(e.icons[t])){const n=parseInt(s);this.locations[i][n]={};for(const a of Object.keys(e.icons[t][s]))this.locations[i][n][parseInt(a)]=e.icons[t][s][a]}}this.mapLabels={};for(const t of Object.keys(e.labels)){const i=parseInt(t);this.mapLabels[i]={};for(const s of Object.keys(e.labels[t])){const n=parseInt(s);this.mapLabels[i][n]={};for(const a of Object.keys(e.labels[t][s]))this.mapLabels[i][n][parseInt(a)]=e.labels[t][s][a]}}this.locationIconsSheet=new Image,this.locationIconsSheet.src=a.image("/map/icons/map_icons.webp"),this.locationIconsSheet.onload=()=>{this.requestUpdate()}}handleUpdatedMembers(t){this.playerMarkers=new Map;for(const e of t)"@SHARED"!==e.name&&this.handleUpdatedCoordinates(e)}isValidCoordinates(t){return!isNaN(t?.x)&&!isNaN(t?.y)&&!isNaN(t?.plane)}handleUpdatedCoordinates(t){const e=t.coordinates||{};this.isValidCoordinates(e)&&(this.playerMarkers.set(t.name,{label:t.name,coordinates:e}),this.followingPlayer.name===t.name&&(this.followingPlayer.coordinates=e),this.isGameTileInView(e.x,e.y)&&this.requestUpdate())}followPlayer(t){const e=this.playerMarkers.get(t),i=e?.coordinates;this.isValidCoordinates(i)&&(this.followingPlayer.name=t,this.followingPlayer.coordinates=e.coordinates,this.requestUpdate())}stopFollowingPlayer(){this.followingPlayer.name=null}gamePositionToCameraCenter(t,e){const i=this.pixelsPerGameTile*this.camera.zoom.current/2;return[t*this.pixelsPerGameTile*this.camera.zoom.current-this.canvas.width/2+i,(e*this.pixelsPerGameTile-this.tileSize)*this.camera.zoom.current+this.canvas.height/2]}gamePositionToClient(t,e){const i=this.pixelsPerGameTile*this.camera.zoom.current/2;return[t*this.pixelsPerGameTile*this.camera.zoom.current+i-this.camera.x.current,this.camera.y.current-(e*this.pixelsPerGameTile-this.tileSize)*this.camera.zoom.current]}gamePositionToCanvas(t,e){return[t*this.pixelsPerGameTile,-e*this.pixelsPerGameTile+this.tileSize]}isGameTileInView(t,e){const i=this.tileSize/this.pixelsPerGameTile,[s,n]=this.gamePositionToClient(t+i,e-i),[a,r]=this.gamePositionToClient(t-i,e+i);return s>=0&&a<=this.canvas.width&&n>=0&&r<=this.canvas.height}requestUpdate(){this.updateRequested=1}cantor(t,e){return(t+e)*(t+e+1)/2+e}_update(t){let e=!1;const i=t-this.previousFrameTime;if(this.previousFrameTime=t,this.updateRequested-- >0&&i>0){const t=.001,s=this.cursor.dx*this.cursor.dx+this.cursor.dy*this.cursor.dy;this.camera.isDragging||s>t&&(this.camera.x.goTo(this.camera.x.current+this.cursor.dx*i,1),this.camera.y.goTo(this.camera.y.current+this.cursor.dy*i,1)),s>t&&(this.cursor.dx/=.005*i+1,this.cursor.dy/=.005*i+1,e=!0);const n=this.camera.zoom.animate(i);if(e=n||e,!n&&this.followingPlayer.name){const[t,e]=this.gamePositionToCameraCenter(this.followingPlayer.coordinates.x,this.followingPlayer.coordinates.y);this.camera.x.target!==t&&this.camera.x.goTo(t,100),this.camera.y.target!==e&&this.camera.y.goTo(e,100),this.showPlane(this.followingPlayer.coordinates.plane+1)}e=this.camera.x.animate(i)||e,e=this.camera.y.animate(i)||e;for(let t=0;t<this.tilesInView.length;++t)e=this.tilesInView[t].animation?.animate(i)||e;this.ctx.resetTransform(),this.ctx.fillStyle="black",this.ctx.setTransform(this.camera.zoom.current,0,0,this.camera.zoom.current,Math.round(-this.camera.x.current),Math.round(this.camera.y.current));const a=(Math.abs((this.camera.x.target-this.camera.x.current)/this.camera.x.time)+Math.abs((this.camera.y.target-this.camera.y.current)/this.camera.y.time))/this.camera.zoom.current,r=!n&&a>10,o=this.tileSize*this.camera.zoom.current,l=this.camera.y.current/o,c=this.camera.x.current/o,h=c+this.canvas.width/o,d=l-this.canvas.height/o;this.view={left:Math.floor(c),right:Math.ceil(h),top:Math.ceil(l),bottom:Math.floor(d)},this.drawMapSquaresInView(!r),this.drawLocations(),this.drawMapAreaLabels(!r),this.drawTileMarkers(this.playerMarkers.values(),{fillColor:"#348feb",strokeColor:"#34d8eb",labelPosition:"top",labelFill:"yellow",labelStroke:"black"}),this.drawTileMarkers(this.interactingMarkers.values(),{fillColor:"#a832a8",strokeColor:"#cc2ed1",labelPosition:"bottom",labelFill:"red",labelStroke:"black"}),this.drawCursorTile()}this.updateRequested=e?Math.max(1,this.updateRequested):this.updateRequested,window.requestAnimationFrame(this.update)}addInteractingMarker(t,e,i){const s={label:i,coordinates:{x:t,y:e,plane:0}};return this.interactingMarkers.add(s),s}removeInteractingMarker(t){this.interactingMarkers.delete(t)}drawGameTiles(t,e,i){this.ctx.beginPath(),this.ctx.fillStyle=e,this.ctx.strokeStyle=i,this.ctx.lineWidth=1;for(const e of t)this.ctx.rect(e.x,e.y,this.pixelsPerGameTile,this.pixelsPerGameTile);this.ctx.stroke(),this.ctx.fill(),this.ctx.closePath()}drawLabels(t,e,i,s){const n=new Map;for(const e of t){const t=this.cantor(e.x,e.y);n.has(t)||n.set(t,[]),n.get(t).push(e)}this.ctx.fillStyle=e,this.ctx.strokeStyle=i,this.ctx.font=20/this.camera.zoom.current+"px rssmall",this.ctx.textAlign="center",this.ctx.lineWidth=1/this.camera.zoom.current;const a=this.pixelsPerGameTile/2,r=1/this.camera.zoom.current,o={top:-18/this.camera.zoom.current,bottom:18/this.camera.zoom.current};for(const t of n.values()){let e="top"===s?0:this.pixelsPerGameTile+o[s];for(const i of t){let[t,n]=[i.x,i.y];t+=a,n+=e,e+=o[s],this.ctx.strokeText(i.text,t+r,n+r),this.ctx.fillText(i.text,t,n)}}}drawTileMarkers(t,e){const i=[[],[],[],[]];for(const e of t)this.isValidCoordinates(e?.coordinates)&&i[e.coordinates.plane].push(e);for(let t=0;t<i.length;++t){const s=i[t];this.ctx.globalAlpha=1-.25*Math.abs(this.plane-1-t);const n=[];for(const t of s){const[e,i]=this.gamePositionToCanvas(t.coordinates.x,t.coordinates.y);n.push({x:e,y:i,text:t.label})}this.drawGameTiles(n,e.fillColor,e.strokeColor),this.drawLabels(n,e.labelFill,e.labelStroke,e.labelPosition)}this.ctx.globalAlpha=1}drawCursorTile(){this.drawGameTiles([{x:this.cursor.canvasX,y:this.cursor.canvasY}],"#348feb","#34d8eb")}drawLocations(){if(!this.locations)return;const t=Math.min(this.camera.zoom.current,3),e=7.5/t,i=15/t;for(const t of this.tilesInView){const s=this.locations[t.regionX]?.[t.regionY];if(s)for(const[t,n]of Object.entries(s))for(let s=0;s<n.length;s+=2){const[a,r]=this.gamePositionToCanvas(n[s],n[s+1]);this.ctx.drawImage(this.locationIconsSheet,15*t,0,15,15,Math.round(a-e),Math.round(r-e),i,i)}}}drawMapAreaLabels(t){if(!this.mapLabels)return;this.mapLabelImages=this.mapLabelImages||new Map;const e=Math.min(this.camera.zoom.current,2);for(let i=this.view.left-1;i<this.view.right+1;++i)for(let s=this.view.top+1;s>this.view.bottom;--s){const n=this.mapLabels[i]?.[s]?.[this.plane-1];if(n)for(let i=0;i<n.length;i+=3){const[s,r]=this.gamePositionToCanvas(n[i],n[i+1]),o=n[i+2],l=this.cantor(s,r);let c=this.mapLabelImages.get(l);if(!c&&t)c=new Image,c.src=a.image(`/map/labels/${o}.webp`),this.mapLabelImages.set(l,c);else if(!c&&!t)continue;if(c.loaded=c.loaded||c.complete,c.loaded){const t=c.width/e,i=c.height/e,n=t/2;this.ctx.drawImage(c,Math.round(s-n),r,Math.round(t),Math.round(i))}else c.onload||(c.onload=()=>{c.loaded=!0,this.requestUpdate()})}}}drawMapSquaresInView(t){const e=this.view.top,i=this.view.left,s=this.view.right,n=this.view.bottom,r=this.tiles[this.plane-1],o=this.tileSize;this.tilesInView=[];for(let l=i;l<s;++l){const i=l*o;for(let s=e;s>n;--s){const e=this.cantor(l,s),n=s*o;if(this.validTiles&&!this.validTiles[this.plane-1].has(e)){this.ctx.clearRect(i,-n,o,o);continue}let c=r.get(e);if(!c&&t){c=new Image(this.tileSize,this.tileSize);const t=`${this.plane-1}_${l}_${s}`;c.src=a.image(`/map/${t}.webp`),c.regionX=l,c.regionY=s,r.set(e,c)}else if(!c&&!t)continue;if(this.tilesInView.push(c),c.loaded=c.loaded||c.complete,c.loaded&&c.animation){const t=c.animation.current;this.ctx.globalAlpha=t;try{t<1&&this.ctx.clearRect(i,-n,o,o),this.ctx.drawImage(c,i,-n)}catch{}}else c.onload?this.ctx.clearRect(i,-n,o,o):c.onload=()=>{c.animation=new G({current:0,target:1,time:300}),c.loaded=!0,this.requestUpdate()}}}this.ctx.globalAlpha=1}showPlane(t){this.plane!==t&&(this.plane=t,this.dispatchEvent(new CustomEvent("plane-changed",{detail:{plane:t}})),this.requestUpdate())}onResize(){this.canvas.width=this.offsetWidth,this.canvas.height=this.offsetHeight,this.ctx.imageSmoothingEnabled=!1,this.requestUpdate()}onPointerDown(t){this.startDragging(t.clientX,t.clientY)}pinchDistance(t){const e=t[0],i=t[1],s=e.clientX-i.clientX,n=e.clientY-i.clientY;return Math.sqrt(s*s+n*n)}pinchCenter(t){const e=t[0],i=t[1];return[(e.clientX+i.clientX)/2,(e.clientY+i.clientY)/2]}onTouchStart(t){2===t.touches.length&&(this.touch.startDistance=this.pinchDistance(t.touches),this.touch.startZoom=this.camera.zoom.current)}startDragging(t,e){this.classList.add("dragging"),this.camera.isDragging=!0,this.camera.x.cancelAnimation(),this.camera.y.cancelAnimation(),this.camera.zoom.cancelAnimation(),this.cursor.frameX=[],this.cursor.frameY=[],this.cursor.dx=0,this.cursor.dy=0,this.cursor.previousX=t,this.cursor.previousY=e,this.cursor.lastPointerMoveTime=performance.now(),this.stopFollowingPlayer(),this.requestUpdate()}onPointerUp(){this.stopDragging()}stopDragging(){this.classList.remove("dragging");performance.now()-this.cursor.lastPointerMoveTime>100&&(this.cursor.dx=0,this.cursor.dy=0),this.camera.isDragging=!1,this.requestUpdate()}onPointerMove(t){const e=t.clientX,i=t.clientY,s=e-this.cursor.previousX||0,n=i-this.cursor.previousY||0;this.cursor.previousX=e,this.cursor.previousY=i,this.handleMovement(e,i,s,n)}onTouchMove(t){if(1===t.touches.length){const e=t.touches[0];this.camera.isDragging||this.startDragging(e.clientX,e.clientY);const i=e.clientX,s=e.clientY,n=i-this.cursor.previousX||0,a=s-this.cursor.previousY||0;this.cursor.previousX=i,this.cursor.previousY=s,this.handleMovement(i,s,n,a)}else if(2===t.touches.length){this.stopDragging();const e=this.pinchDistance(t.touches)/this.touch.startDistance*Math.pow(2,this.touch.startZoom),i=Math.log(e)/Math.LN2,[s,n]=this.pinchCenter(t.touches);this.zoomOntoPoint({x:s,y:n,zoom:i})}}handleMovement(t,e,i,s){const n=performance.now()-this.cursor.lastPointerMoveTime;if(this.cursor.lastPointerMoveTime=performance.now(),n){const t=10;this.cursor.frameX.push(-i/n),this.cursor.frameX.length>t&&(this.cursor.frameX=this.cursor.frameX.slice(this.cursor.frameX.length-t)),this.cursor.frameY.push(s/n),this.cursor.frameY.length>t&&(this.cursor.frameY=this.cursor.frameY.slice(this.cursor.frameY.length-t))}this.camera.isDragging&&(this.camera.x.goTo(this.camera.x.target-i,1),this.camera.y.goTo(this.camera.y.target+s,1),this.cursor.dx=a.average(this.cursor.frameX)||0,this.cursor.dy=a.average(this.cursor.frameY)||0),this.cursor.x=t-this.canvas.offsetTop,this.cursor.y=e-this.canvas.offsetLeft,this.cursor.tileX=Math.floor((this.cursor.x+this.camera.x.current)/this.tileSize/this.camera.zoom.current),this.cursor.tileY=Math.floor((this.camera.y.current-this.cursor.y+this.tileSize)/this.tileSize/this.camera.zoom.current),this.cursor.worldX=Math.floor((this.cursor.x+this.camera.x.current)/this.pixelsPerGameTile/this.camera.zoom.current),this.cursor.worldY=Math.floor((this.camera.y.current-this.cursor.y)/this.pixelsPerGameTile/this.camera.zoom.current+this.tileSize/this.pixelsPerGameTile),this.cursor.canvasX=this.cursor.worldX*this.pixelsPerGameTile,this.cursor.canvasY=-this.cursor.worldY*this.pixelsPerGameTile+this.tileSize-this.pixelsPerGameTile,this.requestUpdate(),this.coordinatesDisplay.innerText=`${this.cursor.worldX}, ${this.cursor.worldY}`}onScroll(t){this.camera.isDragging||this.zoomOntoPoint({delta:-.2*Math.sign(t.deltaY)*this.camera.zoom.target,x:this.cursor.x,y:this.cursor.y,animationTime:100})}zoomOntoPoint(t){if(this.camera.isDragging)return;let e;if(this.cursor.dx=0,this.cursor.dy=0,void 0===t.zoom){const i=this.tileSize*t.delta,s=Math.round(i)/this.tileSize;e=(t.delta,Math.min(Math.max(this.camera.zoom.target+s,this.camera.minZoom),this.camera.maxZoom))}else e=Math.min(Math.max(t.zoom,this.camera.minZoom),this.camera.maxZoom);const i=e-this.camera.zoom.target;if(0===i)return;const s=this.canvas.width,n=this.canvas.height;let a=t.x,r=t.y;this.followingPlayer.name&&([a,r]=this.gamePositionToClient(this.followingPlayer.coordinates.x,this.followingPlayer.coordinates.y));const o=(-a-this.camera.x.target)/(s*this.camera.zoom.target),l=(r-this.camera.y.target)/(n*this.camera.zoom.target);this.camera.x.goTo(this.camera.x.target-o*s*i,t.animationTime||1),this.camera.y.goTo(this.camera.y.target-l*n*i,t.animationTime||1),this.camera.zoom.goTo(e,t.animationTime||1),this.requestUpdate()}});var R=new Map([[29472,12013],[29474,12014],[29476,12015],[29478,12016]]),j=class{constructor(t,e){this.logs=e,this.unlockedItems=new Map,this.unlockedItemsCountByPage=new Map;for(const t of this.logs){const e=t.items,i=t.new_items,s=new Set;for(const t of i)s.add(t),this.unlockedItems.set(t,1);for(let t=0;t<e.length;t+=2)this.unlockedItems.set(e[t],e[t+1]),s.add(e[t]);this.unlockedItemsCountByPage.set(t.page_name,s.size)}}isLogComplete(t){return this.unlockedItemsCountByPage.get(t)===Q.pageItems.get(t).length}completionStateClass(t){const e=this.unlockedItemsCountByPage.get(t);return Q.pageItems.get(t).length===e?"collection-log__complete":e>0?"collection-log__in-progress":"collection-log__not-started"}getPage(t){return this.logs.find((e=>e.page_name===t))}},Q=new class{constructor(){}async initLogInfo(){if(this.info)return;this.info=await k.getCollectionLogInfo(),this.pageItems=new Map;const t=new Set;for(const e of this.info)for(const i of e.pages)i.items.forEach((e=>t.add(e.id))),this.pageItems.set(i.name,i.items),i.sortName=a.removeArticles(i.name);this.totalUniqueItems=t.size-R.size}async load(){this.playerLogs=new Map;const t=await k.getCollectionLog();for(const[e,i]of Object.entries(t))this.playerLogs.set(e,new j(e,i));this.playerNames=Array.from(this.playerLogs.keys())}tabName(t){switch(t){case 0:return"Bosses";case 1:return"Raids";case 2:return"Clues";case 3:return"Minigames";case 4:return"Other"}}loadPlayer(t){this.otherPlayers=this.playerNames.filter((e=>e!==t))}isLogComplete(t,e){const i=this.playerLogs.get(t);return i?.isLogComplete(e)||!1}completionStateClass(t,e){const i=this.playerLogs.get(t);return i?.completionStateClass(e)||"collection-log__not-started"}totalUnlockedItems(t){const e=this.playerLogs.get(t),i=e?.unlockedItems;let s=0;if(i){s=e.unlockedItems.size;for(const[t,e]of R.entries())i.has(t)&&i.has(e)&&--s}return s}pageSize(t){return this.pageItems.get(t).length}completionCountForPage(t,e){const i=this.playerLogs.get(t);return i?.unlockedItemsCountByPage.get(e)||0}pageInfo(t){for(const e of this.info)for(const i of e.pages)if(i.name===t)return i;return null}unlockedItemCount(t,e){return this.playerLogs.get(t)?.unlockedItems.get(e)||0}isItemUnlocked(t,e){return this.playerLogs.get(t)?.unlockedItems.has(e)||!1}};customElements.define("collection-log",class extends s{constructor(){super()}html(){return`<div class="collection-log dialog dialog__visible">\n  <div class="collection-log__container dialog__container metal-border rsbackground">\n    <div class="collection-log__header">\n      <div></div>\n      \x3c!-- <search-element class="collection-log__search input-small" placeholder="Search"></search-element> --\x3e\n      <h2 class="collection-log__title">\n        ${this.playerName}'s Collection Log - ${this.unlockedUniqueItems}/${this.totalUniqueItems}\n      </h2>\n      <button class="collection-log__close dialog__close">\n        <img src="/ui/1731-0.png" alt="Close dialog" title="Close dialog" />\n      </button>\n    </div>\n\n    <div class="collection-log__title-border"></div>\n\n    <div class="collection-log__main">\n      <div class="collection-log__tab-buttons">\n        ${Q.info.map((t=>`<button tab-id="${t.tabId}">${Q.tabName(t.tabId)}</button>`)).join("")}\n      </div>\n\n      <div class="collection-log__tab-container">\n      </div>\n    </div>\n  </div>\n</div>\n`}async connectedCallback(){super.connectedCallback(),O.showLoadingScreen(),this.playerName=this.getAttribute("player-name"),await this.init(),this.totalUniqueItems=Q.totalUniqueItems,this.unlockedUniqueItems=Q.totalUnlockedItems(this.playerName),this.render(),this.tabContent=this.querySelector(".collection-log__tab-container"),this.tabButtons=this.querySelector(".collection-log__tab-buttons"),this.background=this.querySelector(".dialog__visible"),this.showTab(0),this.eventListener(this.tabButtons,"click",this.handleTabClick.bind(this)),this.eventListener(this.background,"click",this.closeIfBackgroundClick.bind(this)),this.eventListener(this.querySelector(".dialog__close"),"click",this.close.bind(this))}disconnectedCallback(){super.disconnectedCallback(),O.hideLoadingScreen()}closeIfBackgroundClick(t){t.target===this.background&&this.close()}close(){this.remove()}async init(){await Promise.all([Q.initLogInfo(),Q.load()]),Q.loadPlayer(this.playerName),O.hideLoadingScreen()}handleTabClick(t){const e=t?.target?.getAttribute("tab-id");e&&this.showTab(e)}showTab(t){this.tabButtons.querySelectorAll("button[tab-id]").forEach((e=>{e.getAttribute("tab-id")===`${t}`?e.classList.add("collection-log__tab-button-active"):e.classList.remove("collection-log__tab-button-active")})),this.tabContent.innerHTML=`<collection-log-tab player-name="${this.playerName}" tab-id="${t}"></collection-log-tab>`}});customElements.define("collection-log-page",class extends s{constructor(){super()}html(){return`<div class="collection-log__page-top">\n  <h2 class="rstext">\n    <a href="${this.pageTitleLink}" target="_blank">${this.pageTitle}</a>\n  </h2>\n  <div>Obtained: <span class="${this.completionStateClass}">${this.unlockedItemsCount}/${this.pageItems.length}</span></div>\n  ${this.pageCountLabels.map(((t,e)=>`\n  <div>${t}: <span class="collection-log__count">${this.completionCounts[e]||0}</span></div>\n  `)).join("")}\n</div>\n<div class="collection-log__page-items">\n  ${this.pageItems.map((t=>`\n  <collection-log-item player-name="${this.playerName}" item-id="${t.id}"></collection-log-item>\n  `)).join("")}\n</div>\n`}connectedCallback(){super.connectedCallback(),this.playerName=this.getAttribute("player-name"),this.tabId=parseInt(this.getAttribute("tab-id")),this.pageName=this.getAttribute("page-name"),this.pageInfo=Q.pageInfo(this.pageName),this.pageTitle=this.pageInfo.name,this.pageCountLabels=this.pageInfo.completion_labels,this.pageItems=Q.pageItems.get(this.pageName);const t=Q.playerLogs.get(this.playerName);if(this.completionCounts=t?.getPage(this.pageName)?.completion_counts||[],this.unlockedItemsCount=Q.completionCountForPage(this.playerName,this.pageName),this.completionStateClass=Q.completionStateClass(this.playerName,this.pageName),2===this.tabId)if(this.pageTitle.startsWith("Shared"))this.pageTitleLink="https://oldschool.runescape.wiki/w/Collection_log#Shared_Treasure_Trail_Rewards";else{const t=this.pageTitle.split(" ")[0].toLowerCase();this.pageTitleLink=`https://oldschool.runescape.wiki/w/Clue_scroll_(${t})`}else this.pageTitleLink=`https://oldschool.runescape.wiki/w/Special:Lookup?type=npc&name=${this.pageTitle}`;this.render()}disconnectedCallback(){super.disconnectedCallback()}});customElements.define("collection-log-tab",class extends s{constructor(){super()}html(){return`<div class="collection-log__tab-list">\n  ${this.pages.map((t=>`\n  <button class="${Q.isLogComplete(this.playerName,t.name)?"collection-log__complete":""}" page-name="${t.name}">\n    ${t.name} <span class="${Q.completionStateClass(this.playerName,t.name)}">${Q.completionCountForPage(this.playerName,t.name)||0}/${Q.pageSize(t.name)}</span>\n  </button>`)).join("")}\n</div>\n<div class="collection-log__page-container"></div>\n`}connectedCallback(){super.connectedCallback(),this.playerName=this.getAttribute("player-name"),this.tabId=parseInt(this.getAttribute("tab-id")),this.pages=Q.info[this.tabId].pages,this.render(),this.pageContainer=this.querySelector(".collection-log__page-container"),this.tabList=this.querySelector(".collection-log__tab-list"),this.showPage(this.pages[0].name),this.eventListener(this.tabList,"click",this.handlePageClick.bind(this))}disconnectedCallback(){super.disconnectedCallback()}handlePageClick(t){const e=t.target.getAttribute("page-name");e&&this.showPage(e)}showPage(t){this.tabList.querySelectorAll("button[page-name]").forEach((e=>{e.getAttribute("page-name")===`${t}`?e.classList.add("collection-log__page-active"):e.classList.remove("collection-log__page-active")})),this.pageContainer.innerHTML=`<collection-log-page player-name="${this.playerName}" page-name="${t}" tab-id="${this.tabId}"></collection-log-page>`}});customElements.define("collection-log-item",class extends s{constructor(){super()}html(){return`<a href="https://oldschool.runescape.wiki/w/Special:Lookup?type=item&id=${this.itemId}" target="_blank">\n  <item-box item-id="${this.itemId}"\n            item-quantity="${Q.unlockedItemCount(this.playerName,this.itemId)}"\n            class="${Q.isItemUnlocked(this.playerName,this.itemId)?"collection-log__item-unlocked":""}"\n            no-tooltip="true">\n  </item-box>\n  <div class="collection-log-item__other-players">\n    ${this.otherPlayers.map((t=>Q.isItemUnlocked(t,this.itemId)?`<player-icon player-name="${t}"></player-icon>`:"")).join("")}\n  </div>\n</a>\n`}connectedCallback(){super.connectedCallback(),this.playerName=this.getAttribute("player-name"),this.itemId=parseInt(this.getAttribute("item-id")),this.enableTooltip();let t=[l.itemName(this.itemId)];for(const e of Q.playerNames){const i=Q.unlockedItemCount(e,this.itemId);i>0&&t.push(`<player-icon player-name="${e}"></player-icon> ${e} - ${i}`)}this.tooltipText=t.join("<br >"),this.otherPlayers=Q.otherPlayers,this.render()}disconnectedCallback(){super.disconnectedCallback()}});customElements.define("player-icon",class extends s{constructor(){super()}html(){return'<img src="/ui/player-icon.webp" width="12" height="15" />\n'}connectedCallback(){super.connectedCallback();const t=this.getAttribute("player-name"),e=v.members.get(t).hue||0;this.style.setProperty("--player-icon-color",`${e}deg`),this.render()}disconnectedCallback(){super.disconnectedCallback()}});customElements.define("donate-button",class extends s{constructor(){super()}html(){return'<a class="desktop" href="https://ko-fi.com/gimplugin" target="_blank">\n  <button class="men-button" type="button">\n    <img class="donate-button__logo" loading="lazy" src="/images/kofi_p_logo_nolabel.webp" height="20"/>\n    <span>Support</span>\n  </button>\n</a>\n'}connectedCallback(){super.connectedCallback(),this.render()}disconnectedCallback(){super.disconnectedCallback()}});
//# sourceMappingURL=app.js.map</script>
    <app-route route-path="*" route-redirect="/"></app-route>
  </body>
</html>
